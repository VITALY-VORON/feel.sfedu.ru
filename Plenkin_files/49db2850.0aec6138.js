"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[95245],{471984:(e,t,n)=>{n.d(t,{registrationItemStat:()=>a});var o=n(322695);const i=new o.ProductionStatCollector,r=new o.ActionStatCollector(i),a=new o.RegistrationItemStatCollector(r)},625529:(e,t,n)=>{n.r(t),n.d(t,{Index:()=>F,showJoinBox:()=>T,showQuickLoginBox:()=>k});var o=n(411374),i=n(97875),r=n(449147),a=n(994676),s=n(93367),c=n(488844),l=n(159663),d=n(585703),u=n(471828),_=n(636322),m=n(70689),h=n(322695),g=n(471984),p=n(908627),v=n(235693),S=n(722400),I=n(612291),E=n(166695),w=n(460725),y=n(617974),f=n(977053),b=n(953368);function k(e){const t={act:"box"};return e&&(t.flow_source=e),(0,l.showBox)("al_login.php",t),!1}function T(e){const t={act:"box",from:window.nav.strLoc};return e&&(t.flow_source=e),(0,l.showBox)("join.php",t),!1}let C="",L=[],A=[];const F={initNew:function(){(0,m.$$)(".index_login .big_text").forEach((e=>{(0,r.placeholderInit)(e)})),setTimeout((()=>(0,m.elfocus)("index_email")),0);let e=(0,m.ge)("index_login_form"),t=(0,m.ge)("index_email"),n=(0,m.ge)("index_pass");e&&t&&n&&(e.onsubmit=function(){if(!window.submitQuickLoginForm)return!0;if(!(0,_.trim)(t.value))return(0,c.notaBene)(t),!1;if(!(0,_.trim)(n.value))return(0,c.notaBene)(n),!1;const e=(0,v.isEmail)(t.value)?h.RegistrationItemEventTypes.INPUT_EMAIL:h.RegistrationItemEventTypes.INPUT_PHONE;return g.registrationItemStat.logEvent(e,cur.eventScreen,void 0,{force:!0}),submitQuickLoginForm(t.value,n.value,{prg:"index_login_button",params:{expire_input:(0,m.val)("index_expire_input")}}),!1},t.oninput=function(){F.isLoginInputDirty||(g.registrationItemStat.logEvent(h.RegistrationItemEventTypes.LOGIN_TAP,h.EventScreens.START,void 0,{force:!0}),F.isLoginInputDirty=!0)},n.oninput=function(){F.isPasswordInputDirty||(g.registrationItemStat.logEvent(h.RegistrationItemEventTypes.PASSWORD_TAP,h.EventScreens.START,void 0,{force:!0}),F.isPasswordInputDirty=!0)},window.loginByCredential&&(t.onclick=loginByCredential,n.onclick=loginByCredential),(0,p.initVKComboIndexPromo)(),this.initGallery(),this.initReLoginHandlers())},initGallery:function(){const e=document.querySelector("#user_gallery");e&&(cur.userGallery=new I.UIGallery(e))},initReLoginHandlers:function(){window.onReLoginDone=function(e){location.href=e},window.onReLoginFailed=function(e){-1===e&&(location.href=location.href.replace(/^http:/,"https:"))}},loadSavedUsers(){const e=document.querySelector("#index_saved_users");e&&(0,E.login)("connect_get_saved_users").then((t=>t&&t.user_ids&&t.user_ids.length&&t.auth_hash?(C=t.auth_hash,A=t.hashes,L=t.user_ids,new Promise(((n,o)=>{ajax.post("/al_index.php?act=a_render_users",{user_ids:t.user_ids,hashes:t.hashes},{onDone:t=>{e.insertAdjacentHTML("afterend",t),e.remove(),this.initGallery(),n()},onFail:e=>{o(e)}})}))):Promise.reject())).catch((()=>{e.remove()}))},authSavedUser(e){(0,f.partConfigEnabled)("vkid_add_app_id_to_stats")?(0,w.logSavedUsersAuthStart)(y.AuthAppId.VK):(0,w.logSavedUsersAuthStart)();const t=btoa(location.protocol+"//"+location.host+(0,b.getToParam)());return(0,E.login)("connect_auth_saved_users",{user_id:e,auth_hash:C,from:"carousel",to:t}).then((e=>{if(!e.url)return Promise.reject();location.href=e.url})).catch((()=>{ajax.post("/join.php?act=connect_saved",{user_id:e,auth_hash:C,to:t,user_hash:A[L.indexOf(e)]})})),!1},deleteSavedUser(e,t,n,o){(0,w.logSavedUsersDropAccount)(),(0,E.login)("connect_delete_saved_users",{user_id:e,auth_hash:C});const i=(0,f.partConfigEnabled)("vkidexp_1823_fix_deleted_selector")?n.currentTarget.parentNode:o;return cur.userGallery&&cur.userGallery.removeItem(i),(0,s.cancelEvent)(n)},initVkId:function(e){this.initReLoginHandlers(),"old"===e.mode?this.initGallery():this.loadSavedUsers();const t=document.querySelector(".index_rcolumn--vkid");t&&(0,S.initVkIdForm)(t,"main",e)},showRegTT:function(e,t){let n,o="INPUT"===e.tagName,i=e;(!o&&(n=(0,m.geByClass1)("selector_table",e))||!o&&(n=(0,m.geByClass1)("radiobtn",e)))&&(i=n);let r=function(){(0,d.showTooltip)(i,{text:t,dir:"right",width:320,typeClass:"ij_tt",shift:[335,-(0,m.getSize)(i)[1]/2],hasover:1,nohideover:1,onCreate:function(){(0,s.removeEvent)(i,"mouseout"),o&&(i.onblur=function(){i.tt&&i.tt.hide&&i.tt.hide()})}})};o?(e.onfocus=r,(0,c.notaBene)(e)):(r(),(0,_.each)((0,m.geByClass)("selector_table",e),(function(e,t){(0,c.notaBene)(t)})))},showLoginBox(e,t){if(!t||"Enter"===t.code)return(0,l.showBox)("al_login.php",{act:"auth_box",ul:e},{params:{hideButtons:!0,bodyStyle:"padding: 44px 25px;"}}),!1},showLoginBoxWithStats(e,t){const n=document.querySelector("#index_save_user_checkbox"),o=n?.checked?1:0;return g.registrationItemStat.logFieldInteraction(h.RegistrationFieldItemNames.SAVED_AUTHORIZATION_ON,String(o)),g.registrationItemStat.logEvent(h.RegistrationItemEventTypes.SCREEN_PROCEED,h.EventScreens.NOWHERE,h.EventScreens.START_PROCEED_AS,{force:!0}),g.registrationItemStat.logEvent(h.RegistrationItemEventTypes.ADD_ACCOUNT_TO_SAVED_START,h.EventScreens.START_PROCEED_AS,h.EventScreens.NOWHERE,{force:!0}),F.showLoginBox(e,t)},showQuickLoginBox:k,showJoinBox:T,deleteRecentAccount:function(e,t,n,o,i){return window.tooltips&&tooltips.hideAll(),ajax.post("/al_login.php?act=a_delete_recent_account",{mid:t,hash:n},{onDone:function(){cur.userGallery&&cur.userGallery.removeItem(i)}}),(0,s.cancelEvent)(o)},generateDays:function(e,t){let n=[[0,u.getLang("index_sel_bday")]],i=(0,o.getLastDay)(e,t);for(let e=1;e<=i;++e)n.push([e,e+""]);return n},updateDays:function(e,t,n){n||(n=cur.uiBday),n.val()>(0,o.getLastDay)(e,t)&&n.clear(),n.setData(F.generateDays(e,t).slice((0,_.intval)(cur.options.bday)?1:0))},fbCheck:function(e,t,n){window.fbAsyncInit=function(){FB.init({appId:e,xfbml:!0,version:"v2.7"});let o="_box"===t;n||(n=(0,m.ge)("index_fbcontinuewithsign"+(t||""))),(0,m.setStyle)(n,{opacity:0,height:0,overflow:"hidden"}),(0,m.show)(n),FB.Event.subscribe("xfbml.render",(()=>{(0,i.animate)(n,{height:o?79:55,opacity:1},200)}))},window.FB&&window.FB.init?window.fbAsyncInit():function(e,t,n){let o,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(o=e.createElement(t),o.id=n,o.src="//connect.facebook.net/"+cur.fbLocale+"/sdk.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk")},fbJoin:function(e,t){cur.fbContext=e,cur.fbLoginButton=t,g.registrationItemStat.logFieldInteraction(h.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,h.EventFieldValues.REGISTERED_VIA_FB),g.registrationItemStat.logEvent(h.RegistrationItemEventTypes.SCREEN_PROCEED,h.EventScreens.START,h.EventScreens.OAUTH_FB,{force:!0}),(0,a.setCookie)("remixfbstate",cur.fbState,30,null,"None",!1);let n=location.protocol+"//"+location.host+"/join?act=fb_sign",o=encodeURIComponent(n),i="https://graph.facebook.com/v3.3/oauth/authorize?client_id="+cur.fbApp+"&redirect_uri="+o+"&scope=email,user_birthday&display=popup&state="+cur.fbState,r=void 0!==window.screenX?window.screenX:window.screenLeft,s=void 0!==window.screenY?window.screenY:window.screenTop,c=void 0!==window.outerWidth?window.outerWidth:document.body.clientWidth,l=void 0!==window.outerHeight?window.outerHeight:document.body.clientHeight-22,d=parseInt(r+(c-640)/2,10),u=parseInt(s+(l-340)/2.5,10);return window.open(i,"fb_sign","width=640,height=340,left="+d+",top="+u),!1},fbFinish:function(e){e.error?(g.registrationItemStat.logFieldInteraction(h.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,h.EventFieldValues.REGISTERED_VIA_FB),g.registrationItemStat.logEvent(h.RegistrationItemEventTypes.SCREEN_PROCEED,h.EventScreens.OAUTH_FB,h.EventScreens.FACEBOOK_REGISTRATION_FAILED,{force:!0}),setTimeout((0,l.showFastBox)(u.getLang("global_error"),e.error).hide,2e3)):e.date&&((0,c.lockButton)(cur.fbLoginButton||(0,m.ge)("index_fb"+(cur.fbContext||""))),nav.go("/join?act=fb_start"))}}},235693:(e,t,n)=>{n.d(t,{isEmail:()=>s,isPhoneNumber:()=>a});var o=n(636322);const i=/^\+?[\d]{4,18}$/,r=/^\S+@\S+\.\S+$/;function a(e){return e=(0,o.trim)(e),Boolean(e.match(i))}const s=e=>(e=(0,o.trim)(e),Boolean(e.match(r)))},647379:(e,t,n)=>{n.d(t,{initVkId:()=>r});var o=n(988882);const i=7913379;function r(){const{loginDomain:e,connectDomain:t}=window.vk.apiConfigDomains;o.Config.init({appId:i,loginDomain:e,connectDomain:t})}},617974:(e,t,n)=>{var o;n.d(t,{AuthAppId:()=>o}),function(e){e[e.VK=7913379]="VK",e[e.MVK=7934655]="MVK"}(o||(o={}))},908627:(e,t,n)=>{n.d(t,{initVKComboIndexPromo:()=>r});var o=n(234173),i=n(289372);function r(){(0,o.tq)().setInteractiveHandler("IndexComboPromo/register",(e=>{const{source:t}=e.payload.dataAttrs||{};i.Unauthorized.showMoreBox(null,0,t)}))}},665048:(e,t,n)=>{n.d(t,{showErrorNotification:()=>s});var o=n(785893),i=n(86894),r=n(740685),a=n(284658);function s(e){const t=window.cur;(0,a.showMessageBoxModal)((({onClose:t})=>(0,o.jsx)(i.ModalCardBase,{header:e.title,subheader:e.text,onClose:t})),{hideOnBGClick:!0,onDestroy(){t.zNavInfo&&(0,r.zNav)(t.zNavInfo.info,t.zNavInfo.opts)}})}},826695:(e,t,n)=>{n.d(t,{initJoinForm:()=>m});var o=n(488844),i=n(70689),r=n(251087),a=n(449147),s=n(261712),c=n(953368),l=n(322695),d=n(471984),u=n(226059);const _="join_form_sex";function m(e,t){const{from:n,bdateMonths:m,bdateYears:h,proceedAs:g,fbApp:p,fbState:v,fbLocale:S,ref:I,values:E={},onSignInClick:w,onNotNowClick:y}=t,f=window.cur.options||{},b=f.bday||0,k=f.bmonth||0,T=f.byear||0;let C;C="invite"===I?l.EventScreens.REGISTRATION_INVITE_CONFIRM:g?l.EventScreens.START_PROCEED_AS:"box"===I?l.EventScreens.START_BOX:l.EventScreens.START,window.cur.eventScreen=C,d.registrationItemStat.logEvent(l.RegistrationItemEventTypes.SCREEN_PROCEED,l.EventScreens.NOWHERE,C,{force:!0});const L=e.querySelector(".JoinForm__error"),A=e.querySelector('.JoinForm__textInput[name="first_name"]'),F=e.querySelector('.JoinForm__textInput[name="last_name"]'),R=e.querySelector(".JoinForm__birthdateDayInput"),x=e.querySelector(".JoinForm__birthdateMonthInput"),N=e.querySelector(".JoinForm__birthdateYearInput"),B=e.querySelector(".JoinForm__sex"),D=e.querySelectorAll(".JoinForm__sexRadio"),P=e.querySelector(".JoinForm__birthdate"),O=e.querySelector(".JoinForm__submitButton"),q=e.querySelector(".JoinForm__facebookLogin"),U=e.querySelector(".JoinForm__facebookLogin .FacebookLogin__button"),V=e.querySelector(".JoinForm__signIn"),j=e.querySelector(".JoinForm__notNowLink");let H,J,M;if(!A||!F||!O)return;const K=()=>{if(u.FlatButton.isLocked(O))return;const e={fname:A.value.trim(),lname:F.value.trim(),bday:H.val(),bmonth:J.val(),byear:M.val(),from:n,frm:1,event_screen:C};(0,i.isVisible)(B)&&(e.sex=Number((0,o.radioval)(_))||0),window.tooltips&&window.tooltips.hideAll();const t=(e,t)=>{e&&t&&window.Index.showRegTT(e,t)};L&&(L.innerHTML=""),window.ajax.post("join.php?act=start",e,{onDone:(e,n)=>{switch(e){case"first_name":return t(A,n),void(0,o.notaBene)(A);case"last_name":return t(F,n),void(0,o.notaBene)(F);case"sex_row":return(0,i.show)(B),void t(B,n);case"birthdate_row":return void t(P,n)}n&&(0,s.showMsg)(L,n,"error",!0)},showProgress:()=>u.FlatButton.lock(O),hideProgress:()=>u.FlatButton.unlock(O)})},G=()=>{const e=Number(H.val())||0,t=Number(J.val())||0,n=Number(M.val())||0,o=new Date(0);e&&o.setDate(e),t&&o.setMonth(t),n&&o.setFullYear(n),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.BDAY,o.getTime().toString())},W=function(){const e=window.cur;e.isJoinFieldDirty||(d.registrationItemStat.logEvent(l.RegistrationItemEventTypes.START_REG_TAP,e.eventScreen,void 0,{force:!0}),e.isJoinFieldDirty=!0)};if(d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.FIRST_NAME,A.value,!0),A.addEventListener("keyup",(()=>{W(),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.FIRST_NAME,A.value)})),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.LAST_NAME,F.value,!0),F.addEventListener("keyup",(()=>{W(),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.LAST_NAME,F.value)})),[A,F].forEach((e=>{(0,a.placeholderInit)(e),e.addEventListener("keydown",(e=>{10!==e.keyCode&&13!==e.keyCode||K()}))})),"index"!==I&&requestAnimationFrame((()=>(0,i.elfocus)(A))),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.BDAY,"",!0),H=new window.Dropdown(R,(0,c.generateDays)(T,k),{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:b,onChange:()=>{W(),G()}}),J=new window.Dropdown(x,m,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:k,onChange:e=>{W(),G(),(0,c.updateDayDropdown)(M.val(),e,H,b)}}),M=new window.Dropdown(N,h,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:T,onChange:e=>{W(),G(),(0,c.updateDayDropdown)(e,J.val(),H,b)}}),window.radioBtns[_]={els:[...D],val:0},d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.SEX,Number((0,o.radioval)(_)).toString(),!0),D.forEach((e=>{e.addEventListener("click",(()=>{const t=Number(e.dataset.sex);(0,o.radiobtn)(e,t,_),W(),d.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.SEX,t.toString())}))})),void 0!==E.sex){const t=E.sex,n=e.querySelector(`.JoinForm__sexRadio[data-sex="${t}"]`);n&&n.click()}if(O.addEventListener("click",(e=>{e.preventDefault(),K()})),p){const e=window.cur;e.fbApp=p,e.fbState=v,e.fbLocale=S,window.Index.fbCheck(p,"",q)}U?.addEventListener("click",(e=>{e.preventDefault(),window.Index.fbJoin("",U)})),V&&w&&V.addEventListener("click",w),j&&y&&j.addEventListener("click",y);const Q=(0,r.curBox)();Q&&Q.setOptions({onClean:()=>{H&&H.destroy(),J&&J.destroy(),M&&M.destroy()}}),window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"]).catch((()=>{}))}},722400:(e,t,n)=>{n.d(t,{initJoinVKConnectButton:()=>y,initJoinVKConnectForm:()=>f,initVkIdForm:()=>b});var o=n(988882),i=n(322695),r=n(471984),a=n(488844),s=n(226059),c=n(449147),l=n(471828),d=n(977070),u=n(2190),_=n(647379),m=n(618418),h=n(665048),g=n(977053),p=n(617974),v=n(953368);const S=7913379;let I=i.EventScreens.START;function E(e){const{loginDomain:t,connectDomain:n}=window.vk.apiConfigDomains;o.Config.init({appId:S,loginDomain:t,connectDomain:n,appSettings:{external_device_id:e,vkc_auth_action:"registration",promo:"registration"}})}function w(e){const{proceedAs:t,savedUsersCount:n,availableQR:o,saveUserChecked:a}=e;t&&(I=i.EventScreens.START_PROCEED_AS),window.cur.eventScreen=I,o&&r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.AVAILABLE_AUTH_WITH_QR,"1"),n&&r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.ACCOUNTS_COUNT,n.toString()),a&&r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.SAVED_AUTHORIZATION_ON,"1"),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.SCREEN_PROCEED,i.EventScreens.NOWHERE,I,{force:!0})}function y(e,t){const{proceedAs:n,unauthId:i}=t;E(i),w({proceedAs:n});const r=e.querySelector(".JoinForm__connectButton");if(!r)return;r.addEventListener("click",(e=>{e.preventDefault(),(()=>{let e=location.protocol+"//"+location.host+"/join";o.Connect.redirectAuth({url:e})})()}))}function f(e,t){const{proceedAs:n,unauthId:d,phonePrefix:u,hash:_,fbApp:m,fbState:h,fbLocale:g}=t;E(d),w({proceedAs:n});const p=e.querySelector('.JoinForm__textInput[name="phone"]'),v=e.querySelector(".JoinForm__connectButton"),S=e.querySelector(".JoinForm__connectError"),y=e.querySelector(".JoinForm__form"),f=e.querySelector(".JoinForm__facebookLogin"),b=e.querySelector(".JoinForm__facebookLogin .FacebookLogin__button");let k=!1;if(!(p&&v&&S&&y))return;const T=e=>{(0,a.notaBene)(p),S&&e&&(S.innerHTML=e),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.INCORRECT_PHONE_NUMBER,I,void 0,{force:!0})},C=()=>{if(s.FlatButton.isLocked(v))return;if(!(e=>{const t=String(e).replace(/[^0-9]/g,"").length;return t>=10&&t<=13})(p.value.trim().replace(" ","")))return void T(l.getLang("index_error_bad_phone"));((e,t,n)=>{const i=e.hash;window.ajax.post("join.php?act=connect",e,{onDone:(e,r)=>{if("error"===e)return T(l.getLang("index_error_bad_phone")),void(0,a.notaBene)(n);s.FlatButton.lock(t);const c={url:location.protocol+"//"+location.host+"/join",action:{name:"registration_with_phone",token:r,params:{csrf_hash:i}}};o.Connect.redirectAuth(c)},showProgress:()=>s.FlatButton.lock(t),hideProgress:()=>s.FlatButton.unlock(t)})})({phone:p.value.trim(),hash:_},v,p)};if((0,c.placeholderInit)(p),p.value=u,p.addEventListener("keyup",(e=>{"Enter"!==e.key&&(S&&S.innerHTML&&(S.innerHTML=""),k||(r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.START_REG_TAP,I,void 0,{force:!0}),k=!0))})),y.addEventListener("submit",(e=>{e.preventDefault(),C()})),v.addEventListener("click",(e=>{e.preventDefault(),C()})),m){const e=window.cur;e.fbApp=m,e.fbState=h,e.fbLocale=g,window.Index.fbCheck(m,"",f)}b?.addEventListener("click",(e=>{e.preventDefault(),window.Index.fbJoin("",b)}))}function b(e,t,n){(0,_.initVkId)();let a=u.ColorSchemeName[u.colorScheme.isDarkScheme()?"Dark":"Light"],c=null;n?.proceed_as&&(I=i.EventScreens.START_PROCEED_AS);const S=u.colorScheme.subscribe((()=>{c&&c.update({scheme:u.colorScheme.isDarkScheme()?u.ColorSchemeName.WebDark:u.ColorSchemeName.Light}),a=u.colorScheme.isDarkScheme()?u.ColorSchemeName.Dark:u.ColorSchemeName.Light}));let E=t;const y=location.search.match(/to=(?:[A-Za-z\d+/]{4})*(?:[A-Za-z\d+/]{3}=|[A-Za-z\d+/]{2}==)?/);if(y){const e=atob(y[0].slice(3)).replace(/\W*/g,"");E=""===e?"main":e}const f=e.querySelector(".VkIdForm__signInButton"),b=e.querySelector(".VkIdForm__signUpButton"),k=e.querySelector(".VkIdForm__businessSignUpButton"),T=e.querySelector(".VkIdForm__signInQRButton"),C=e.querySelector(".VkIdForm__qrPanel"),L=e.querySelector(".VkIdForm__qrPanelStub"),A=e.querySelector(".VkIdForm__input"),F=e.querySelector(".VkIdForm__messageError"),R=document.querySelector(".VkIdCheckbox--save"),x=R?.querySelector("#index_save_user_checkbox"),N=document.querySelector(".VkIdCheckbox--save .VkIdCheckbox__rightIcon");if(n&&w({proceedAs:n?.proceed_as??!1,savedUsersCount:n?.saved_users_count,availableQR:Boolean(C),saveUserChecked:Boolean(x?.checked)}),!f||!b)return;const B=e=>{A&&A.classList.add("VkIdForm__input--error"),F&&e&&(F.classList.remove("VkIdForm__messageError--hidden"),F.innerHTML=e)},D=()=>{A&&A.classList.remove("VkIdForm__input--error"),F&&F.innerHTML&&(F.classList.add("VkIdForm__messageError--hidden"),F.innerHTML="")},P=(e,t,n)=>{const a=e.hash||"",c=x?.checked?1:0;r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.SAVED_AUTHORIZATION_ON,String(c)),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.SCREEN_PROCEED,I,i.EventScreens.NOWHERE,{force:!0}),window.ajax.post("join.php?act=connect",e,{onDone:(e,i)=>{if("error"===e)return B(l.getLang("vkconnect_auth_empty_login")),void s.FlatButton.unlock(n);const r={name:"no_password_flow",token:i,params:{type:"sign_in",csrf_hash:a}};t.action=r,o.Connect.redirectAuth(t)},onFail:e=>("security_error"===e&&(0,h.showErrorNotification)({title:l.getLang("vkconnect_auth_security_error_title"),text:l.getLang("vkconnect_auth_security_error_text")}),!1),showProgress:()=>s.FlatButton.lock(n),hideProgress:()=>{(0,g.partConfigEnabled)("vkconnect_auth_flat_button_unlock")&&s.FlatButton.unlock(n)}})},O=e=>{const t={url:e||location.protocol+"//"+location.host+"/join"+location.search,action:{name:"no_password_flow",params:{type:"sign_up"}},entry:{source:E,screen:I},scheme:a};o.Connect.redirectAuth(t)};(()=>{const e=`\n      <div class="VkIdCheckbox__saveTooltipHeader">\n        ${l.getLang("vkconnect_auth_save_user_tooltip_header")}\n      </div>\n      <div>\n        ${l.getLang("vkconnect_auth_save_user_tooltip_body")}\n      </div>\n    `;if(N){let t=new d.ElementTooltip(N,{autoShow:!0,width:260,content:e,cls:"feature_intro_tt",align:d.ElementTooltip.ALIGN_CENTER,forceSide:"bottom",appendToParent:!0,withCloseButton:!1,noHideOnClick:!0,offset:[1,0],onWindowClick(){},autoAdjustToViewport:!1,onHide:function(){}});(0,m.pushNavDestroy)((()=>{t&&(t.destroy(),t=null)}))}})(),(()=>{const e=location.protocol+"//"+location.host;if(!C)return;const t={source:E,screen:I};c=new o.AuthQR({container:C,entry:t}),c.on("VKSDKQRScaned",(n=>{o.Connect.redirectAuth({action:{name:"qr_auth",token:n??"qr_auth_scanned"},url:e+(0,v.getToParam)(),entry:t,scheme:a})})),c.on("VKSDKQRClicked",(()=>{o.Connect.redirectAuth({action:{name:"qr_auth"},url:e+(0,v.getToParam)(),entry:t,scheme:a})})),c.open({scheme:u.colorScheme.isDarkScheme()?u.ColorSchemeName.WebDark:u.ColorSchemeName.Light}).then((()=>{L&&L.remove()})).catch((()=>{c&&c.close(),C.remove()}))})(),b.addEventListener("click",(e=>{e.preventDefault(),S(),O()})),k&&k.addEventListener("click",(e=>{const t=`${location.protocol}//${location.host}/groups_create?type=business&source=registration`;e.preventDefault(),S(),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.CREATE_BUSINESS_START,I,i.EventScreens.NOWHERE,void 0,void 0,p.AuthAppId.VK),O(t)})),A&&(A.addEventListener("focus",(()=>{D()})),A.addEventListener("input",(()=>{D()})),e.addEventListener("submit",(e=>{e.preventDefault(),S(),(()=>{const e=location.protocol+"//"+location.host,i={source:E,screen:I},r={url:n?.to_feed?e+"/feed":e+(0,v.getToParam)(),action:{name:"no_password_flow",params:{type:"sign_in"}},entry:i,scheme:a};if(!A)return void o.Connect.redirectAuth(r);const c=A.value?.trim().replace(" ","");if(!c)return void B(l.getLang("vkconnect_auth_empty_login"));r.entry&&(r.entry.source=t);const d=document.querySelector("#index_expire_input"),u=d?.checked?1:0,_=document.querySelector("#index_save_user_checkbox"),m=_?.checked?1:0;s.FlatButton.lock(f),P({login:encodeURIComponent(c),hash:n?.hash,expire:u,save_user:m},r,f)})()}))),T&&T.addEventListener("click",(e=>{e.preventDefault(),S(),(()=>{const e=location.protocol+"//"+location.host,t={source:E,screen:I},i={url:n?.to_feed?e+"/feed":e+(0,v.getToParam)(),action:{name:"qr_auth"},entry:t,scheme:a};o.Connect.redirectAuth(i)})()}))}},953368:(e,t,n)=>{n.d(t,{generateDays:()=>r,getToParam:()=>s,updateDayDropdown:()=>a});var o=n(659397),i=n(471828);function r(e,t){const n=[[0,i.getLang("index_sel_bday")]],r=(0,o.getLastDayOfMonth)(e,t);for(let e=1;e<=r;++e)n.push([e,String(e)]);return n}function a(e,t,n,i){Number(n.val())>(0,o.getLastDayOfMonth)(e,t)&&n.clear(),n.setData(r(e,t).slice(Number(i)?1:0))}function s(){if(location.href.includes("login"))return"/login"+location.search;const e=new URLSearchParams(window.location.search).get("to");return e?"/"+e:""}},751602:(e,t,n)=>{function o(e){const t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;const[,n,o]=t;return{objectType:n,objectId:o}}n.d(t,{getElementLikeButtonCount:()=>s,getElementLikeButtonIcon:()=>c,getElementLikeButtonLabel:()=>l,isObjectTypeIsVideo:()=>a,likePostObjectId:()=>i,likeReplyObjectId:()=>r,parseLikeObjectId:()=>o});const i=e=>`wall${e}`,r=e=>`wall_reply${e}`,a=e=>["video","video_comment"].includes(e),s=e=>e?.querySelector(".like_button_count, ._like_button_count")??void 0,c=e=>e?.querySelector(".like_button_icon, ._like_button_icon")??void 0,l=e=>e.querySelector(".like_button_label, ._like_button_label")??void 0},750030:(e,t,n)=>{n.d(t,{isIntentPreviewHidden:()=>c,isIntentPreviewInActionStatusBar:()=>s,isIntentPreviewUseCurrent:()=>l,isVariantHidden:()=>r,isVariantInActionStatusBar:()=>i,parsePreviewVariant:()=>u,previewVisibilityIntentForVariant:()=>d,previewVisibilityUseCurrent:()=>a});var o=n(771220);const i=e=>e===o.PreviewVariantActionStatusBar,r=e=>e===o.PreviewVariantHidden,a={kind:"useCurrent"},s=e=>e.kind===o.PreviewVariantActionStatusBar,c=e=>e.kind===o.PreviewVariantHidden,l=e=>"useCurrent"===e.kind,d=e=>e?{kind:e}:a,u=e=>o.PreviewVariants.includes(e)?e:void 0},771220:(e,t,n)=>{n.d(t,{PreviewVariantActionStatusBar:()=>o,PreviewVariantHidden:()=>i,PreviewVariants:()=>r});const o="action_status_bar",i="hidden",r=[o,i]},863218:(e,t,n)=>{n.d(t,{REACTIONS_COUNTS_RESPONSE_FIELD:()=>c,SIZE_128:()=>s,SIZE_32:()=>i,SIZE_40:()=>r,SIZE_96:()=>a,SUPPORTED_OBJECT_TYPES:()=>o,WK_SECTION_PREFIX_REACTIONS:()=>l});const o={wall:"wall",wall_reply:"wall_reply"},i={width:32,height:32},r={width:40,height:40},a={width:96,height:96},s={width:128,height:128},c="reactions_counts",l="reactions"},894289:(e,t,n)=>{n.d(t,{isReactionsFullUpdatePayload:()=>r,reactionsCountsOnlyUpdatePayload:()=>a,reactionsCountsUpdatePayload:()=>i});var o=n(776590);const i=(e,t)=>({kind:o.PayloadKindFull,...e,reactionIdState:{reactionId:t.id}}),r=e=>e.kind===o.PayloadKindFull,a=e=>({kind:o.PayloadKindCountsOnly,...e})},776590:(e,t,n)=>{n.d(t,{PayloadKindCountsOnly:()=>o,PayloadKindFull:()=>i});const o="counts_only",i="counts_with_current_reaction"},511051:(e,t,n)=>{n.d(t,{triggerReactionsUpdate:()=>s});var o=n(751602),i=n(863218),r=n(214009),a=n(894289);const s=(e,t,n,s)=>{const c=(0,o.parseLikeObjectId)(e);c&&c.objectType===i.SUPPORTED_OBJECT_TYPES.wall&&c.objectId?(0,r.emitEvent)(r.WallDataEvents.post_reactions_counts_update,function(e,t,n,o){const i={counts:e,isFromWkLayer:t?.isFromWkLayer,isPrimaryLikeButtonClick:t?.isPrimaryLikeButtonClick,isQueueUpdate:t?.isQueueUpdate,isUserAction:t.isUserAction,postFullId:n.objectId,previewVisibility:t.previewVisibility,reactionIdState:o?{reactionId:o.id}:void 0,suggestSubscribe:t.suggestSubscribe};return o?(0,a.reactionsCountsUpdatePayload)(i,o):(0,a.reactionsCountsOnlyUpdatePayload)(i)}(t,s,c,n)):c&&c.objectType===i.SUPPORTED_OBJECT_TYPES.wall_reply&&c.objectId?(0,r.emitEvent)(r.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:c.objectId,reactionIdState:n?{reactionId:n.id}:void 0}):console.warn("Unsupported reactions object update",e)}},430506:(e,t,n)=>{n.d(t,{UnauthActionBox:()=>d});var o=n(322695),i=n(324153),r=n(625529),a=n(159663),s=n(659397),c=n(48204),l=n(826695);const d={show:function(e,t={}){const{onHide:n,onLogin:d}=t,u=e.withForm,_=new a.MessageBox({title:"",width:u?796:450,hideButtons:!0,containerClass:(0,s.classNames)("UnauthActionBoxContainer",{"UnauthActionBoxContainer--form":u}),onHide:()=>{n&&n()}});_.content(e.html),_.changed=!0;const m=_.bodyNode.querySelector(".UnauthActionBox__close"),h=_.bodyNode.querySelector(".UnauthActionBox__join"),g=_.bodyNode.querySelector(".UnauthActionBox__login"),p=t=>{o.marketingTransitionItemStat.logEvent(i.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,t,e.action,window.location.href)};m?.addEventListener("click",(()=>{p(i.MarketingTransitionItemEventType.CLOSE),_.hide()})),h?.addEventListener("click",(()=>{p(i.MarketingTransitionItemEventType.CLICK_SIGN_UP),(0,r.showJoinBox)(e.action)})),g?.addEventListener("click",(()=>{p(i.MarketingTransitionItemEventType.CLICK_SIGN_IN),d?d():(0,r.showQuickLoginBox)(e.action)})),p(i.MarketingTransitionItemEventType.OPEN),_.show();const v=_.bodyNode.querySelector(".LoginCombinedBox"),S=_.bodyNode.querySelector(".JoinForm"),I=e=>{e.preventDefault(),p(i.MarketingTransitionItemEventType.CLOSE),_.hide()};return _.bodyNode.querySelectorAll(".LoginBox").forEach((e=>{(0,c.initLoginBoxForm)(e)})),_.bodyNode.querySelectorAll(".LoginBox__notNow").forEach((e=>{e.addEventListener("click",I)})),_.bodyNode.querySelectorAll(".JoinForm__signIn, .LoginRecentBox__alternative").forEach((e=>{e.addEventListener("click",(()=>{p(i.MarketingTransitionItemEventType.CLICK_SIGN_IN)}))})),_.bodyNode.querySelectorAll(".LoginBox__buttonSignUp").forEach((e=>{e.addEventListener("click",(()=>{p(i.MarketingTransitionItemEventType.CLICK_SIGN_UP)}))})),v?(0,c.initLoginCombinedBoxForm)(v,e.formOptions):S&&(0,l.initJoinForm)(S,{...e.formOptions,onSignInClick:()=>{(0,r.showQuickLoginBox)()},onNotNowClick:I,ref:"box"}),requestAnimationFrame((()=>window.tooltips&&window.tooltips.hideAll())),_}}},214009:(e,t,n)=>{n.d(t,{WallDataEvents:()=>r,emitEvent:()=>d,registerNonGlobalNonUniqueListener:()=>l,registerUniqueListener:()=>c});var o=n(288824),i=n(195763);const r={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},a=(0,o.makeSharedState)("wall-data",(()=>({emitter:new i.default,keyedListeners:Object.create(null)})),{version:0}),s=(e,t,n)=>{const o=a(),i=o.keyedListeners?.[e]?.[t];return i&&o.emitter.removeListener(e,i),((e,t,n)=>{const o=a();return o.emitter.addListener(e,n),o.keyedListeners[e]={...o.keyedListeners[e],[t]:n},()=>{o.emitter.removeListener(e,n);const i=o.keyedListeners[e]?.[t];i===n&&delete o.keyedListeners[e]?.[t]}})(e,t,n)},c=(e,t,n)=>s(t,e,n),l=(e,t)=>((e,t)=>{const n=a();return n.emitter.addListener(e,t),()=>{n.emitter.removeListener(e,t)}})(e,t),d=(e,t)=>{a().emitter.emit(e,t)}}}]);try{stManager.done("dist/web/chunks/49db2850.0aec6138.js")}catch(e){}