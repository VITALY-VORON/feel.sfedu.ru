"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[5950],{471984:(e,t,o)=>{o.d(t,{registrationItemStat:()=>a});var n=o(322695);const i=new n.ProductionStatCollector,r=new n.ActionStatCollector(i),a=new n.RegistrationItemStatCollector(r)},625529:(e,t,o)=>{o.r(t),o.d(t,{Index:()=>L,showJoinBox:()=>T,showQuickLoginBox:()=>k});var n=o(411374),i=o(97875),r=o(449147),a=o(994676),c=o(93367),s=o(488844),d=o(159663),l=o(585703),u=o(471828),_=o(636322),v=o(70689),p=o(322695),h=o(471984),m=o(908627),g=o(235693),f=o(722400),y=o(612291),w=o(166695),I=o(460725),E=o(617974),S=o(977053),b=o(953368);function k(e){const t={act:"box"};return e&&(t.flow_source=e),(0,d.showBox)("al_login.php",t),!1}function T(e){const t={act:"box",from:window.nav.strLoc};return e&&(t.flow_source=e),(0,d.showBox)("join.php",t),!1}let C="",A=[],R=[];const L={initNew:function(){(0,v.$$)(".index_login .big_text").forEach((e=>{(0,r.placeholderInit)(e)})),setTimeout((()=>(0,v.elfocus)("index_email")),0);let e=(0,v.ge)("index_login_form"),t=(0,v.ge)("index_email"),o=(0,v.ge)("index_pass");e&&t&&o&&(e.onsubmit=function(){if(!window.submitQuickLoginForm)return!0;if(!(0,_.trim)(t.value))return(0,s.notaBene)(t),!1;if(!(0,_.trim)(o.value))return(0,s.notaBene)(o),!1;const e=(0,g.isEmail)(t.value)?p.RegistrationItemEventTypes.INPUT_EMAIL:p.RegistrationItemEventTypes.INPUT_PHONE;return h.registrationItemStat.logEvent(e,cur.eventScreen,void 0,{force:!0}),submitQuickLoginForm(t.value,o.value,{prg:"index_login_button",params:{expire_input:(0,v.val)("index_expire_input")}}),!1},t.oninput=function(){L.isLoginInputDirty||(h.registrationItemStat.logEvent(p.RegistrationItemEventTypes.LOGIN_TAP,p.EventScreens.START,void 0,{force:!0}),L.isLoginInputDirty=!0)},o.oninput=function(){L.isPasswordInputDirty||(h.registrationItemStat.logEvent(p.RegistrationItemEventTypes.PASSWORD_TAP,p.EventScreens.START,void 0,{force:!0}),L.isPasswordInputDirty=!0)},window.loginByCredential&&(t.onclick=loginByCredential,o.onclick=loginByCredential),(0,m.initVKComboIndexPromo)(),this.initGallery(),this.initReLoginHandlers())},initGallery:function(){const e=document.querySelector("#user_gallery");e&&(cur.userGallery=new y.UIGallery(e))},initReLoginHandlers:function(){window.onReLoginDone=function(e){location.href=e},window.onReLoginFailed=function(e){-1===e&&(location.href=location.href.replace(/^http:/,"https:"))}},loadSavedUsers(){const e=document.querySelector("#index_saved_users");e&&(0,w.login)("connect_get_saved_users").then((t=>t&&t.user_ids&&t.user_ids.length&&t.auth_hash?(C=t.auth_hash,R=t.hashes,A=t.user_ids,new Promise(((o,n)=>{ajax.post("/al_index.php?act=a_render_users",{user_ids:t.user_ids,hashes:t.hashes},{onDone:t=>{e.insertAdjacentHTML("afterend",t),e.remove(),this.initGallery(),o()},onFail:e=>{n(e)}})}))):Promise.reject())).catch((()=>{e.remove()}))},authSavedUser(e){(0,S.partConfigEnabled)("vkid_add_app_id_to_stats")?(0,I.logSavedUsersAuthStart)(E.AuthAppId.VK):(0,I.logSavedUsersAuthStart)();const t=btoa(location.protocol+"//"+location.host+(0,b.getToParam)());return(0,w.login)("connect_auth_saved_users",{user_id:e,auth_hash:C,from:"carousel",to:t}).then((e=>{if(!e.url)return Promise.reject();location.href=e.url})).catch((()=>{ajax.post("/join.php?act=connect_saved",{user_id:e,auth_hash:C,to:t,user_hash:R[A.indexOf(e)]})})),!1},deleteSavedUser(e,t,o,n){(0,I.logSavedUsersDropAccount)(),(0,w.login)("connect_delete_saved_users",{user_id:e,auth_hash:C});const i=(0,S.partConfigEnabled)("vkidexp_1823_fix_deleted_selector")?o.currentTarget.parentNode:n;return cur.userGallery&&cur.userGallery.removeItem(i),(0,c.cancelEvent)(o)},initVkId:function(e){this.initReLoginHandlers(),"old"===e.mode?this.initGallery():this.loadSavedUsers();const t=document.querySelector(".index_rcolumn--vkid");t&&(0,f.initVkIdForm)(t,"main",e)},showRegTT:function(e,t){let o,n="INPUT"===e.tagName,i=e;(!n&&(o=(0,v.geByClass1)("selector_table",e))||!n&&(o=(0,v.geByClass1)("radiobtn",e)))&&(i=o);let r=function(){(0,l.showTooltip)(i,{text:t,dir:"right",width:320,typeClass:"ij_tt",shift:[335,-(0,v.getSize)(i)[1]/2],hasover:1,nohideover:1,onCreate:function(){(0,c.removeEvent)(i,"mouseout"),n&&(i.onblur=function(){i.tt&&i.tt.hide&&i.tt.hide()})}})};n?(e.onfocus=r,(0,s.notaBene)(e)):(r(),(0,_.each)((0,v.geByClass)("selector_table",e),(function(e,t){(0,s.notaBene)(t)})))},showLoginBox(e,t){if(!t||"Enter"===t.code)return(0,d.showBox)("al_login.php",{act:"auth_box",ul:e},{params:{hideButtons:!0,bodyStyle:"padding: 44px 25px;"}}),!1},showLoginBoxWithStats(e,t){const o=document.querySelector("#index_save_user_checkbox"),n=o?.checked?1:0;return h.registrationItemStat.logFieldInteraction(p.RegistrationFieldItemNames.SAVED_AUTHORIZATION_ON,String(n)),h.registrationItemStat.logEvent(p.RegistrationItemEventTypes.SCREEN_PROCEED,p.EventScreens.NOWHERE,p.EventScreens.START_PROCEED_AS,{force:!0}),h.registrationItemStat.logEvent(p.RegistrationItemEventTypes.ADD_ACCOUNT_TO_SAVED_START,p.EventScreens.START_PROCEED_AS,p.EventScreens.NOWHERE,{force:!0}),L.showLoginBox(e,t)},showQuickLoginBox:k,showJoinBox:T,deleteRecentAccount:function(e,t,o,n,i){return window.tooltips&&tooltips.hideAll(),ajax.post("/al_login.php?act=a_delete_recent_account",{mid:t,hash:o},{onDone:function(){cur.userGallery&&cur.userGallery.removeItem(i)}}),(0,c.cancelEvent)(n)},generateDays:function(e,t){let o=[[0,u.getLang("index_sel_bday")]],i=(0,n.getLastDay)(e,t);for(let e=1;e<=i;++e)o.push([e,e+""]);return o},updateDays:function(e,t,o){o||(o=cur.uiBday),o.val()>(0,n.getLastDay)(e,t)&&o.clear(),o.setData(L.generateDays(e,t).slice((0,_.intval)(cur.options.bday)?1:0))},fbCheck:function(e,t,o){window.fbAsyncInit=function(){FB.init({appId:e,xfbml:!0,version:"v2.7"});let n="_box"===t;o||(o=(0,v.ge)("index_fbcontinuewithsign"+(t||""))),(0,v.setStyle)(o,{opacity:0,height:0,overflow:"hidden"}),(0,v.show)(o),FB.Event.subscribe("xfbml.render",(()=>{(0,i.animate)(o,{height:n?79:55,opacity:1},200)}))},window.FB&&window.FB.init?window.fbAsyncInit():function(e,t,o){let n,i=e.getElementsByTagName(t)[0];e.getElementById(o)||(n=e.createElement(t),n.id=o,n.src="//connect.facebook.net/"+cur.fbLocale+"/sdk.js",i.parentNode.insertBefore(n,i))}(document,"script","facebook-jssdk")},fbJoin:function(e,t){cur.fbContext=e,cur.fbLoginButton=t,h.registrationItemStat.logFieldInteraction(p.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,p.EventFieldValues.REGISTERED_VIA_FB),h.registrationItemStat.logEvent(p.RegistrationItemEventTypes.SCREEN_PROCEED,p.EventScreens.START,p.EventScreens.OAUTH_FB,{force:!0}),(0,a.setCookie)("remixfbstate",cur.fbState,30,null,"None",!1);let o=location.protocol+"//"+location.host+"/join?act=fb_sign",n=encodeURIComponent(o),i="https://graph.facebook.com/v3.3/oauth/authorize?client_id="+cur.fbApp+"&redirect_uri="+n+"&scope=email,user_birthday&display=popup&state="+cur.fbState,r=void 0!==window.screenX?window.screenX:window.screenLeft,c=void 0!==window.screenY?window.screenY:window.screenTop,s=void 0!==window.outerWidth?window.outerWidth:document.body.clientWidth,d=void 0!==window.outerHeight?window.outerHeight:document.body.clientHeight-22,l=parseInt(r+(s-640)/2,10),u=parseInt(c+(d-340)/2.5,10);return window.open(i,"fb_sign","width=640,height=340,left="+l+",top="+u),!1},fbFinish:function(e){e.error?(h.registrationItemStat.logFieldInteraction(p.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,p.EventFieldValues.REGISTERED_VIA_FB),h.registrationItemStat.logEvent(p.RegistrationItemEventTypes.SCREEN_PROCEED,p.EventScreens.OAUTH_FB,p.EventScreens.FACEBOOK_REGISTRATION_FAILED,{force:!0}),setTimeout((0,d.showFastBox)(u.getLang("global_error"),e.error).hide,2e3)):e.date&&((0,s.lockButton)(cur.fbLoginButton||(0,v.ge)("index_fb"+(cur.fbContext||""))),nav.go("/join?act=fb_start"))}}},235693:(e,t,o)=>{o.d(t,{isEmail:()=>c,isPhoneNumber:()=>a});var n=o(636322);const i=/^\+?[\d]{4,18}$/,r=/^\S+@\S+\.\S+$/;function a(e){return e=(0,n.trim)(e),Boolean(e.match(i))}const c=e=>(e=(0,n.trim)(e),Boolean(e.match(r)))},250546:(e,t,o)=>{o.d(t,{default:()=>v,lazyLoadPlayer:()=>p});var n=o(902947),i=o(379440),r=o(508917),a=o(70689),c=o(491495),s=o(977053),d=o(105940),l=o(624350);const u={queue:[],timeout:null,sig:""};function _(e,t){if(!t.send_debug)return;u.sig=[t.action_hash,t.oid,t.vid,t.viewer_id].join("_");const o={ts:Math.round(Date.now()/1e3),video_id:[t.oid,t.vid].join("_"),e:"video_event",event:"debug",value:e,ov_id:t.ov_id,ad_data:t.ad_data,autoplay:t.autoplay,track_code:t.track_code,player_type:window.Videoview?.getLayoutType?.()??"",ref:t.module??window.Videoview?.getVideoModule?.()??""};u.queue.push(o),u.timeout=u.timeout??window.setTimeout((()=>{ajax.post("al_video.php?act=track_player_events",{events:JSON.stringify(u.queue),sig:u.sig}),u.queue=[],u.timeout=null}),1e3)}const v={initPlayer(e,t,o){if((0,a.hide)((0,a.domByClass)(e,"video_box_msg")),(0,l.isInteractiveVideo)(o[0])){const n=(0,l.prepareInteractivePlayerVars)(o[0]);VideoInitializer[t].apply(VideoInitializer,[e,n])}else VideoInitializer[t].apply(VideoInitializer,[e].concat(o));window.stManager.add(window.jsc("web/notifier.js"),(function(){const e=Videoview.togglePlay.pbind(!1);Notifier.addRecvClbk("audio_start","video",e),Notifier.addRecvClbk("video_start","video",e),Notifier.addRecvClbk("videocall_start","video",e)}))},vk(e,t){const o=t.oid+"_"+t.vid;if(t.vsegs)ls.remove("vsegs"+vk.id+"_"+o);else{const e=ls.get("vsegs"+vk.id+"_"+o);e&&e.ts&&e.segments&&Date.now()-e.ts<864e5&&(t.vsegs=e.segments.replace(/[^0-9\,\|]/gi,""))}if(e&&e instanceof HTMLElement){const o=(0,d.getTrackCodeFromPost)(e);o&&(t.feed_track_code=o)}window.onLoaded((function(){VideoInitializer.unionPlayer(e,t)}))},unionPlayer(e,t){_("requested",t);const i=window.mvLayer&&window.mvLayer.contains(e);(0,a.val)(e,""),window.stManager.add(["videoplayer.css"]),((0,l.isInteractiveVideo)(t)?(0,l.interactivePlayerLazyLoad)():Promise.all([o.e(89334),o.e(56668)]).then(o.bind(o,318959))).then((({Player:o,InteractivePlayer:r})=>{if(!document.body.contains(e))return void _("domabort",t);let c;_("imported",t);try{c=new(o??r)(t,e),c.init()}catch(e){throw _("constructor_failed",t),e}i?(mvcur.player&&mvcur.player.destroy(),mvcur.sdkPlayer=c,mvcur.player=mvcur.sdkPlayer):t.is_embed?cur.player=c:cur.videoInlinePlayer=c;const s=(0,a.ce)("div",{id:"video_player"});(0,a.attr)(s,"preventhide",1),s.appendChild(c.el),e.appendChild(s),(0,n.isFunction)(t.onPlayerLoaded)&&t.onPlayerLoaded(c)}),(e=>{throw _("import_failed",t),e}))},youtube(e,t){const o=t.oid,n=t.vid,c=t.report_error_hash;t.restriction||(document.pictureInPictureEnabled&&document.pictureInPictureElement&&document.exitPictureInPicture(),window.onYouTubeIframeAPIReady=function(){const r=(0,a.domByClass)(e,"video_yt_player"),s=new window.YT.Player(r,{events:{onError:function(e){e.data&&[100,101,150].includes(e.data)&&ajax.post("al_video.php?act=reparseDeletedYoutube",{vid:n,oid:o}),(0,i.debugLog)("YT player error",arguments),ajax.post("al_video.php?act=external_error",{oid:o,vid:n,hash:c})},onStateChange:function(e){switch(e.data){case window.YT.PlayerState.ENDED:window.stManager.add([window.jsc("web/videoview.js"),"videoview.css",window.jsc("web/external_video.js")],(function(){const e=document.getElementById("video_yt");window.ExternalVideo?.onExternalVideoEnded(e)}));break;case window.YT.PlayerState.PLAYING:const e=window.ap;e&&e.isPlaying()&&e.pauseByChangeChannel();break;default:document.getElementById("mv_external_finish")&&window.ExternalVideo?.removeExternalVideoFinishBlock()}}}});window.stManager.add([window.jsc("web/video_youtube.js")],(function(){VideoYoutube.initStatOnly(s,t)}))},window.YT?window.onYouTubeIframeAPIReady():(0,r.loadScript)("https://www.youtube.com/iframe_api",{attributes:{async:!0,fetchPriority:"high"}}))},iframeOrFlash(e,t,o,n,i,r){(0,a.val)(e,'<iframe class="extra_player" type="text/html" width="100%" height="100%" src="'+encodeURI(n)+'" frameborder="0" '+i+"></iframe>"),r&&setTimeout((()=>{cur&&cur.incViews&&cur.incViews()}),100)}},p=(e="vk")=>{if((0,s.partConfigEnabled)("video_lazy_load_player"))try{(0,c.idlizeCall)((()=>window.setTimeout((()=>(0,c.idlizeCall)((()=>(e=>{switch(e){case"vk":window.stManager.add(["videoplayer.css"]),Promise.all([o.e(89334),o.e(56668)]).then(o.bind(o,318959));break;case"youtube":const e="https://www.youtube.com/iframe_api";(window.YT||document.head.querySelector(`script[src="${e}"]`))&&(0,r.loadScript)(e,{attributes:{defer:!0,fetchPriority:"low"}})}})(e)))),300)))}catch(e){console.error(e)}}},50614:(e,t,o)=>{o.d(t,{useIsMounted:()=>i});var n=o(667294);const i=()=>{const e=(0,n.useRef)(!1);return(0,n.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,n.useCallback)((()=>e.current),[])}},76927:(e,t,o)=>{o.d(t,{createGroupsEditFx:()=>c,createGroupsGetByIdFx:()=>i,createGroupsGetMembersFx:()=>s,createGroupsJoinFx:()=>r,createGroupsLeaveFx:()=>a});var n=o(876354);const i=e=>(0,n.createApiEffect)("groups.getById",e),r=e=>(0,n.createApiEffect)("groups.join",e),a=e=>(0,n.createApiEffect)("groups.leave",e),c=e=>(0,n.createApiEffect)("groups.edit",e),s=e=>(0,n.createApiEffect)("groups.getMembers",e)},97391:(e,t,o)=>{o.d(t,{connectTrackTmrGroupsJoin:()=>d,groupsJoinAction:()=>l,trackTmrGroupsJoin:()=>c});var n=o(963526),i=o(166695),r=o(798116),a=o(977053);const c=()=>{(0,a.partConfigEnabled)("group_join_track_event_count")&&(0,n.tmrSendTimespentEvent)(n.MY_TRACKER_COUNT_EVENT_IDS.COMMUNITY_SUBSCRIBE)},s=(0,r.createEffect)({name:"fx/track_group_join",handler:c}),d=e=>(0,r.sample)({clock:e.done,target:s}),l=(e,t,o)=>(0,i.api)("groups.join",e,t,o).then((e=>(c(),e)))},34467:(e,t,o)=>{o.d(t,{connectTrackTmrGroupsJoin:()=>n.connectTrackTmrGroupsJoin,groupsJoinAction:()=>n.groupsJoinAction,trackTmrGroupsJoin:()=>n.trackTmrGroupsJoin});var n=o(97391)},119798:(e,t,o)=>{o.d(t,{fetchInteractiveInfo:()=>r});var n=o(166695),i=o(397631);const r=async(e,t)=>{const{ownerId:o,itemId:r,externalId:a}=(0,i.splitRawId)(e);return(0,n.api)("video.getInteractiveVideoInfo",{owner_id:o,video_id:r,access_key:a||""},void 0,{signal:t})}},225515:(e,t,o)=>{o.d(t,{createLocalStorageHistoryApi:()=>u,createServerHistoryApi:()=>d});var n=o(597978),i=o(397631),r=o(595815),a=o(119798),c=o(713639);const s="interactive_history",d=()=>({get:async e=>(await(0,a.fetchInteractiveInfo)(e)).history||[],save:async(e,t)=>{await(0,c.saveInteractiveVideoHistory)(e,t)}}),l=e=>{const{externalId:t,...o}=(0,i.splitRawId)(e);return(0,r.joinRawId)(o)},u=()=>({get:e=>{const t=l(e);return new Promise(((e,o)=>{const i=n.bestAvailableStorage.getItem(s)||"{}";try{i&&e(JSON.parse(i)[t]?.value||[])}catch(e){o("Error while parsing interactive history data")}}))},save:(e,t)=>{const o=l(e);return new Promise(((e,i)=>{try{const i=JSON.parse(n.bestAvailableStorage.getItem(s)||"{}"),r=t.length-100,a=(new Date).getTime(),c=Object.entries({...i,[o]:{value:r>0?t.slice(r):t,expiry:(new Date).getTime()+7776e6}}).filter((([,{expiry:e}])=>e>=a)).sort((([,{expiry:e}],[,{expiry:t}])=>t-e));for(;c.length>50;)c.pop();n.bestAvailableStorage.setItem(s,JSON.stringify(Object.fromEntries(c))),e()}catch(e){i("Attempt to save history failed")}}))}})},338995:(e,t,o)=>{o.d(t,{createInteractiveData:()=>l,getVKVideoIdByMedia:()=>d});var n=o(595815),i=o(361189),r=o(65718),a=o(119798),c=o(225515);function s(e=[]){const t=e.sort(((e,t)=>e.height-t.height))??[];return t.find((({height:e})=>e>500))??t[t.length-1]}function d(e){for(const o of e.variants)if("custom"===(t=o).type&&"payload"in t&&"vk"===t.payload.type&&"payload"in o)return o.payload.id;var t}async function l(e,t){const{manifestUrl:o,ownerId:l,videoId:u,accessKey:_="",currentChapterVideoId:v}=e;try{const p=Boolean(window.vk.id);async function h(){const e=await fetch(o,{signal:t});return await e.json()}const m=h(),g=(0,a.fetchInteractiveInfo)((0,n.joinRawId)({ownerId:parseInt(l,10),itemId:parseInt(u,10),externalId:_}),t),[f,y]=await Promise.allSettled([m,g]),w="fulfilled"===f.status?f.value:null,I="fulfilled"===y.status?y.value:null;let E;if(!w||!I)throw new Error("Can't fetch interactive video data");{let S,b=[];const k=[],T={};for(const C of I.chapters)for(const A of w.media.videos){const R=d(A)?.split("_").at(-1);if(C.video_id.toString()===R){for(const L of w.chapters)if(L.videoId===A.id){C?.image?.length&&k.push({id:L.videoId,cover:s(C.image).url}),p&&(Boolean(C.viewed_duration)&&b.push(L.id),S||C.video_id!==v||(S=L.id)),R&&C.access_key&&(T[R]=C.access_key);break}break}}if(!p){const x=(0,n.joinRawId)({ownerId:+l,itemId:+u}),V=await(0,c.createLocalStorageHistoryApi)().get(x);b=(0,i.vkVideoIdsToChapterIds)(V,w).filter(Boolean)}E={manifest:w,initChapterId:S,visitedChapters:b,videosInfo:k,historyApi:p?(0,c.createLocalStorageHistoryApi)():(0,c.createServerHistoryApi)(),accessKeysMap:T}}return E}catch(B){if("AbortError"===B?.name)return;(0,r.logError)(new Error("Interactive video manifest initialization error"))}}},713639:(e,t,o)=>{o.d(t,{saveInteractiveVideoHistory:()=>r});var n=o(166695),i=o(397631);const r=async(e,t,o)=>{const{ownerId:r,itemId:a,externalId:c}=(0,i.splitRawId)(e);return(0,n.api)("video.saveInteractiveVideoHistory",{owner_id:r,video_id:a,history:JSON.stringify(t),access_key:c||""},void 0,{method:"POST",signal:o})}},647379:(e,t,o)=>{o.d(t,{initVkId:()=>r});var n=o(988882);const i=7913379;function r(){const{loginDomain:e,connectDomain:t}=window.vk.apiConfigDomains;n.Config.init({appId:i,loginDomain:e,connectDomain:t})}},617974:(e,t,o)=>{var n;o.d(t,{AuthAppId:()=>n}),function(e){e[e.VK=7913379]="VK",e[e.MVK=7934655]="MVK"}(n||(n={}))},625855:(e,t,o)=>{o.d(t,{showWatchLaterSnackbar:()=>s});var n=o(785893),i=o(471828),r=o(936167),a=o(978631),c=o(775830);const s=({isBookmarked:e,rollbackCallback:t})=>{const o=e?{text:`${i.getLang("video_deleted_from_section")} «${i.getLang("video_catalog_showcase_section_my_watch_later_title")}»`,before:{content:(0,n.jsx)(a.Icon28ClockOutline,{})},action:{label:i.getLang("global_cancel"),onClick:(e,o)=>{t&&t(),(0,r.hideSnackbar)(o)}}}:{text:`${i.getLang("video_added_to_section")} «${i.getLang("video_catalog_showcase_section_my_watch_later_title")}»`,before:{content:(0,n.jsx)(a.Icon28ClockOutline,{})},action:"my_bookmarks"!==window.cur?.section_id?{label:i.getLang("global_open_section"),onClick:()=>window.location.href=c.BOOKMARKS_URL}:void 0};(0,r.showSnackbar)(o)}},908627:(e,t,o)=>{o.d(t,{initVKComboIndexPromo:()=>r});var n=o(234173),i=o(289372);function r(){(0,n.tq)().setInteractiveHandler("IndexComboPromo/register",(e=>{const{source:t}=e.payload.dataAttrs||{};i.Unauthorized.showMoreBox(null,0,t)}))}},665048:(e,t,o)=>{o.d(t,{showErrorNotification:()=>c});var n=o(785893),i=o(86894),r=o(740685),a=o(284658);function c(e){const t=window.cur;(0,a.showMessageBoxModal)((({onClose:t})=>(0,n.jsx)(i.ModalCardBase,{header:e.title,subheader:e.text,onClose:t})),{hideOnBGClick:!0,onDestroy(){t.zNavInfo&&(0,r.zNav)(t.zNavInfo.info,t.zNavInfo.opts)}})}},722400:(e,t,o)=>{o.d(t,{initJoinVKConnectButton:()=>E,initJoinVKConnectForm:()=>S,initVkIdForm:()=>b});var n=o(988882),i=o(322695),r=o(471984),a=o(488844),c=o(226059),s=o(449147),d=o(471828),l=o(977070),u=o(2190),_=o(647379),v=o(618418),p=o(665048),h=o(977053),m=o(617974),g=o(953368);const f=7913379;let y=i.EventScreens.START;function w(e){const{loginDomain:t,connectDomain:o}=window.vk.apiConfigDomains;n.Config.init({appId:f,loginDomain:t,connectDomain:o,appSettings:{external_device_id:e,vkc_auth_action:"registration",promo:"registration"}})}function I(e){const{proceedAs:t,savedUsersCount:o,availableQR:n,saveUserChecked:a}=e;t&&(y=i.EventScreens.START_PROCEED_AS),window.cur.eventScreen=y,n&&r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.AVAILABLE_AUTH_WITH_QR,"1"),o&&r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.ACCOUNTS_COUNT,o.toString()),a&&r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.SAVED_AUTHORIZATION_ON,"1"),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.SCREEN_PROCEED,i.EventScreens.NOWHERE,y,{force:!0})}function E(e,t){const{proceedAs:o,unauthId:i}=t;w(i),I({proceedAs:o});const r=e.querySelector(".JoinForm__connectButton");if(!r)return;r.addEventListener("click",(e=>{e.preventDefault(),(()=>{let e=location.protocol+"//"+location.host+"/join";n.Connect.redirectAuth({url:e})})()}))}function S(e,t){const{proceedAs:o,unauthId:l,phonePrefix:u,hash:_,fbApp:v,fbState:p,fbLocale:h}=t;w(l),I({proceedAs:o});const m=e.querySelector('.JoinForm__textInput[name="phone"]'),g=e.querySelector(".JoinForm__connectButton"),f=e.querySelector(".JoinForm__connectError"),E=e.querySelector(".JoinForm__form"),S=e.querySelector(".JoinForm__facebookLogin"),b=e.querySelector(".JoinForm__facebookLogin .FacebookLogin__button");let k=!1;if(!(m&&g&&f&&E))return;const T=e=>{(0,a.notaBene)(m),f&&e&&(f.innerHTML=e),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.INCORRECT_PHONE_NUMBER,y,void 0,{force:!0})},C=()=>{if(c.FlatButton.isLocked(g))return;if(!(e=>{const t=String(e).replace(/[^0-9]/g,"").length;return t>=10&&t<=13})(m.value.trim().replace(" ","")))return void T(d.getLang("index_error_bad_phone"));((e,t,o)=>{const i=e.hash;window.ajax.post("join.php?act=connect",e,{onDone:(e,r)=>{if("error"===e)return T(d.getLang("index_error_bad_phone")),void(0,a.notaBene)(o);c.FlatButton.lock(t);const s={url:location.protocol+"//"+location.host+"/join",action:{name:"registration_with_phone",token:r,params:{csrf_hash:i}}};n.Connect.redirectAuth(s)},showProgress:()=>c.FlatButton.lock(t),hideProgress:()=>c.FlatButton.unlock(t)})})({phone:m.value.trim(),hash:_},g,m)};if((0,s.placeholderInit)(m),m.value=u,m.addEventListener("keyup",(e=>{"Enter"!==e.key&&(f&&f.innerHTML&&(f.innerHTML=""),k||(r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.START_REG_TAP,y,void 0,{force:!0}),k=!0))})),E.addEventListener("submit",(e=>{e.preventDefault(),C()})),g.addEventListener("click",(e=>{e.preventDefault(),C()})),v){const e=window.cur;e.fbApp=v,e.fbState=p,e.fbLocale=h,window.Index.fbCheck(v,"",S)}b?.addEventListener("click",(e=>{e.preventDefault(),window.Index.fbJoin("",b)}))}function b(e,t,o){(0,_.initVkId)();let a=u.ColorSchemeName[u.colorScheme.isDarkScheme()?"Dark":"Light"],s=null;o?.proceed_as&&(y=i.EventScreens.START_PROCEED_AS);const f=u.colorScheme.subscribe((()=>{s&&s.update({scheme:u.colorScheme.isDarkScheme()?u.ColorSchemeName.WebDark:u.ColorSchemeName.Light}),a=u.colorScheme.isDarkScheme()?u.ColorSchemeName.Dark:u.ColorSchemeName.Light}));let w=t;const E=location.search.match(/to=(?:[A-Za-z\d+/]{4})*(?:[A-Za-z\d+/]{3}=|[A-Za-z\d+/]{2}==)?/);if(E){const e=atob(E[0].slice(3)).replace(/\W*/g,"");w=""===e?"main":e}const S=e.querySelector(".VkIdForm__signInButton"),b=e.querySelector(".VkIdForm__signUpButton"),k=e.querySelector(".VkIdForm__businessSignUpButton"),T=e.querySelector(".VkIdForm__signInQRButton"),C=e.querySelector(".VkIdForm__qrPanel"),A=e.querySelector(".VkIdForm__qrPanelStub"),R=e.querySelector(".VkIdForm__input"),L=e.querySelector(".VkIdForm__messageError"),x=document.querySelector(".VkIdCheckbox--save"),V=x?.querySelector("#index_save_user_checkbox"),B=document.querySelector(".VkIdCheckbox--save .VkIdCheckbox__rightIcon");if(o&&I({proceedAs:o?.proceed_as??!1,savedUsersCount:o?.saved_users_count,availableQR:Boolean(C),saveUserChecked:Boolean(V?.checked)}),!S||!b)return;const P=e=>{R&&R.classList.add("VkIdForm__input--error"),L&&e&&(L.classList.remove("VkIdForm__messageError--hidden"),L.innerHTML=e)},D=()=>{R&&R.classList.remove("VkIdForm__input--error"),L&&L.innerHTML&&(L.classList.add("VkIdForm__messageError--hidden"),L.innerHTML="")},F=(e,t,o)=>{const a=e.hash||"",s=V?.checked?1:0;r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.SAVED_AUTHORIZATION_ON,String(s)),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.SCREEN_PROCEED,y,i.EventScreens.NOWHERE,{force:!0}),window.ajax.post("join.php?act=connect",e,{onDone:(e,i)=>{if("error"===e)return P(d.getLang("vkconnect_auth_empty_login")),void c.FlatButton.unlock(o);const r={name:"no_password_flow",token:i,params:{type:"sign_in",csrf_hash:a}};t.action=r,n.Connect.redirectAuth(t)},onFail:e=>("security_error"===e&&(0,p.showErrorNotification)({title:d.getLang("vkconnect_auth_security_error_title"),text:d.getLang("vkconnect_auth_security_error_text")}),!1),showProgress:()=>c.FlatButton.lock(o),hideProgress:()=>{(0,h.partConfigEnabled)("vkconnect_auth_flat_button_unlock")&&c.FlatButton.unlock(o)}})},O=e=>{const t={url:e||location.protocol+"//"+location.host+"/join"+location.search,action:{name:"no_password_flow",params:{type:"sign_up"}},entry:{source:w,screen:y},scheme:a};n.Connect.redirectAuth(t)};(()=>{const e=`\n      <div class="VkIdCheckbox__saveTooltipHeader">\n        ${d.getLang("vkconnect_auth_save_user_tooltip_header")}\n      </div>\n      <div>\n        ${d.getLang("vkconnect_auth_save_user_tooltip_body")}\n      </div>\n    `;if(B){let t=new l.ElementTooltip(B,{autoShow:!0,width:260,content:e,cls:"feature_intro_tt",align:l.ElementTooltip.ALIGN_CENTER,forceSide:"bottom",appendToParent:!0,withCloseButton:!1,noHideOnClick:!0,offset:[1,0],onWindowClick(){},autoAdjustToViewport:!1,onHide:function(){}});(0,v.pushNavDestroy)((()=>{t&&(t.destroy(),t=null)}))}})(),(()=>{const e=location.protocol+"//"+location.host;if(!C)return;const t={source:w,screen:y};s=new n.AuthQR({container:C,entry:t}),s.on("VKSDKQRScaned",(o=>{n.Connect.redirectAuth({action:{name:"qr_auth",token:o??"qr_auth_scanned"},url:e+(0,g.getToParam)(),entry:t,scheme:a})})),s.on("VKSDKQRClicked",(()=>{n.Connect.redirectAuth({action:{name:"qr_auth"},url:e+(0,g.getToParam)(),entry:t,scheme:a})})),s.open({scheme:u.colorScheme.isDarkScheme()?u.ColorSchemeName.WebDark:u.ColorSchemeName.Light}).then((()=>{A&&A.remove()})).catch((()=>{s&&s.close(),C.remove()}))})(),b.addEventListener("click",(e=>{e.preventDefault(),f(),O()})),k&&k.addEventListener("click",(e=>{const t=`${location.protocol}//${location.host}/groups_create?type=business&source=registration`;e.preventDefault(),f(),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.CREATE_BUSINESS_START,y,i.EventScreens.NOWHERE,void 0,void 0,m.AuthAppId.VK),O(t)})),R&&(R.addEventListener("focus",(()=>{D()})),R.addEventListener("input",(()=>{D()})),e.addEventListener("submit",(e=>{e.preventDefault(),f(),(()=>{const e=location.protocol+"//"+location.host,i={source:w,screen:y},r={url:o?.to_feed?e+"/feed":e+(0,g.getToParam)(),action:{name:"no_password_flow",params:{type:"sign_in"}},entry:i,scheme:a};if(!R)return void n.Connect.redirectAuth(r);const s=R.value?.trim().replace(" ","");if(!s)return void P(d.getLang("vkconnect_auth_empty_login"));r.entry&&(r.entry.source=t);const l=document.querySelector("#index_expire_input"),u=l?.checked?1:0,_=document.querySelector("#index_save_user_checkbox"),v=_?.checked?1:0;c.FlatButton.lock(S),F({login:encodeURIComponent(s),hash:o?.hash,expire:u,save_user:v},r,S)})()}))),T&&T.addEventListener("click",(e=>{e.preventDefault(),f(),(()=>{const e=location.protocol+"//"+location.host,t={source:w,screen:y},i={url:o?.to_feed?e+"/feed":e+(0,g.getToParam)(),action:{name:"qr_auth"},entry:t,scheme:a};n.Connect.redirectAuth(i)})()}))}},953368:(e,t,o)=>{o.d(t,{generateDays:()=>r,getToParam:()=>c,updateDayDropdown:()=>a});var n=o(659397),i=o(471828);function r(e,t){const o=[[0,i.getLang("index_sel_bday")]],r=(0,n.getLastDayOfMonth)(e,t);for(let e=1;e<=r;++e)o.push([e,String(e)]);return o}function a(e,t,o,i){Number(o.val())>(0,n.getLastDayOfMonth)(e,t)&&o.clear(),o.setData(r(e,t).slice(Number(i)?1:0))}function c(){if(location.href.includes("login"))return"/login"+location.search;const e=new URLSearchParams(window.location.search).get("to");return e?"/"+e:""}},751602:(e,t,o)=>{function n(e){const t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;const[,o,n]=t;return{objectType:o,objectId:n}}o.d(t,{getElementLikeButtonCount:()=>c,getElementLikeButtonIcon:()=>s,getElementLikeButtonLabel:()=>d,isObjectTypeIsVideo:()=>a,likePostObjectId:()=>i,likeReplyObjectId:()=>r,parseLikeObjectId:()=>n});const i=e=>`wall${e}`,r=e=>`wall_reply${e}`,a=e=>["video","video_comment"].includes(e),c=e=>e?.querySelector(".like_button_count, ._like_button_count")??void 0,s=e=>e?.querySelector(".like_button_icon, ._like_button_icon")??void 0,d=e=>e.querySelector(".like_button_label, ._like_button_label")??void 0},205070:(e,t,o)=>{o.d(t,{LikeButtonTypes:()=>n});const n={like:"like",share:"share",views:"views",comment:"comment"}},13101:(e,t,o)=>{o.d(t,{VideoForYouEvents:()=>i,VideoPlayerSyncEvents:()=>n,VideoPlaylistEvents:()=>r});const n={TOGGLE_FAVORITE:"VideoPlayerSyncEvents/TOGGLE_FAVORITE",TOGGLE_ADDING_TO_MY_VIDEOS:"VideoPlayerSyncEvents/TOGGLE_ADDING_TO_MY_VIDEOS"},i={VIEW_BLOCK:"VideoForYouEvents/VIEW_BLOCK"},r={SUBSCRIPTION_STATE_CHANGE:"VideoPlaylistEvents/SUBSCRIPTION_STATE_CHANGE"}},985403:(e,t,o)=>{o.d(t,{VideoForYouEvents:()=>n.VideoForYouEvents,VideoPlayerSyncEvents:()=>n.VideoPlayerSyncEvents,VideoPlaylistEvents:()=>n.VideoPlaylistEvents});var n=o(13101)},624350:(e,t,o)=>{o.d(t,{adaptToAlVideoResponse:()=>s,createInteractiveData:()=>r.createInteractiveData,createLocalStorageHistoryApi:()=>a.createLocalStorageHistoryApi,createServerHistoryApi:()=>a.createServerHistoryApi,debugLog:()=>_,findMaxResolutionFrame:()=>c,getManifestSrc:()=>v,getVKVideoIdByMedia:()=>r.getVKVideoIdByMedia,getVarsFromAlVideoResponse:()=>l,getVarsFromMedia:()=>d,getVideoId:()=>u,interactivePlayerLazyLoad:()=>g,isInteractiveVideo:()=>p,joinRawId:()=>n.joinRawId,prepareInteractivePlayerVars:()=>m,promisifyAct:()=>h,splitRawId:()=>i.splitRawId});var n=o(595815),i=o(397631),r=o(338995),a=o(225515);function c(e){if(!e)return;const t=["first_frame_1280","first_frame_800","first_frame_320","first_frame_160","first_frame_130","jpg"];let o;for(const n of t)if(e[n]){o=e[n];break}return o}function s(e){if(e)return{player:{params:[e]}}}function d(e){return e.variants[0].vkVideoModel?.player?.params[0]}function l(e){return e.player?.params[0]}function u(e){if(e)return(0,n.joinRawId)({ownerId:e.oid,itemId:e.vid})}function _(e,{type:t="log",force:o=!1}={}){if(window?.videoPlayerConfig.debugLogs||o)try{console[t](...["%c interactive ","background:#ff4757;"].concat(e))}catch(e){}}function v(e){return e.interactive_info.src}function p(e){return!!e.interactive_info}function h(e,t,o,n){return new Promise(((i,r)=>{const a=()=>{r(new DOMException("Operation aborted","AbortError"))};n&&(n.aborted&&a(),n.addEventListener("abort",a,{once:!0})),window.ajax.post(e,t,{...o,onDone:(...e)=>{n&&n.removeEventListener("abort",a);const t=[...e];i(t)},onFail:e=>(r(e),!0)})}))}function m(e){const t=window.structuredClone(e),o=window.structuredClone(function(e){return e.interactive_info.current_video}(e)),n=t.url_interactive_manifest;return delete t.interactive_info.current_video,delete t.url_interactive_manifest,t.interactive_info={enable_interactive_graph:t.interactive_info.enable_interactive_graph,enable_interactive_stats:t.interactive_info.enable_interactive_stats,enable_interactive_last_frame:t.interactive_info.enable_interactive_last_frame,enable_interactive_go_to_action:t.interactive_info.enable_interactive_go_to_action,enable_interactive_go_to_prev_chapter:t.interactive_info.enable_interactive_go_to_prev_chapter,src:n},o.interactive_info={src:n,project:t},o}function g(){return Promise.all([o.e(2067),o.e(89334),o.e(56668),o.e(16285)]).then(o.bind(o,651651))}}}]);try{stManager.done("dist/web/chunks/a94f76e2.a94da45b.js")}catch(e){}