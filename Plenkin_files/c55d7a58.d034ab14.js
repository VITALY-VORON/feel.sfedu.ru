"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[93402],{74106:(e,t,o)=>{o.d(t,{Icon16ChevronOutline:()=>n});var n=(0,o(28178).makeIcon)("Icon16ChevronOutline","chevron_outline_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M4.22 3.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06L7.69 8 4.22 4.53a.75.75 0 0 1 0-1.06" clip-rule="evenodd" /></symbol>',12,16,!1,void 0)},883949:(e,t,o)=>{o.d(t,{Icon20BlockOutline:()=>n});var n=(0,o(28178).makeIcon)("Icon20BlockOutline","block_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="block_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17m4.391-3.048a7 7 0 0 1-9.843-9.843zm1.06-1.06L5.61 4.547a7 7 0 0 1 9.843 9.843" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},893535:(e,t,o)=>{o.d(t,{Icon28UsersCircleFillBlue:()=>n});var n=(0,o(28178).makeIcon)("Icon28UsersCircleFillBlue","users_circle_fill_blue_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="users_circle_fill_blue_28"><linearGradient id="users_circle_fill_blue_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#users_circle_fill_blue_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M10.5 15c2.25 0 4.5.9 4.5 2.846v.134c0 .295-.04.447-.113.585a.77.77 0 0 1-.322.321c-.138.075-.29.114-.585.114H7.02c-.295 0-.447-.04-.585-.113a.77.77 0 0 1-.321-.322c-.075-.138-.114-.29-.114-.585v-.134C6 15.9 8.25 15 10.5 15m7 0c2.25 0 4.5.9 4.5 2.846v.134c0 .295-.04.447-.113.585a.77.77 0 0 1-.322.321c-.138.075-.29.114-.585.114H16.6c.084-.248.13-.508.144-.797l.006-.223v-.134c0-1.069-.358-1.957-.971-2.659A7.7 7.7 0 0 1 17.5 15m-7-6a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5m7 0a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5" /></symbol>',28,28,!1,void 0)},506890:(e,t,o)=>{o.d(t,{default:()=>n});const n={userItemSizeS:"UserItem-module__userItemSizeS--oMiTx",userItemSizeM:"UserItem-module__userItemSizeM--UqwG8",userItemSizeL:"UserItem-module__userItemSizeL--kqPlM",userItemRoot:"UserItem-module__userItemRoot--m7aTv",userItemRootHide:"UserItem-module__userItemRootHide--Dgb5w"}},745077:(e,t,o)=>{o.d(t,{default:()=>n});const n={usersBlockItemsWrap:"UsersBlock-module__usersBlockItemsWrap--nIQ4U",usersBlockItems:"UsersBlock-module__usersBlockItems--ouRV0",usersBlockFooterSpacing:"UsersBlock-module__usersBlockFooterSpacing--RPQSD"}},557568:(e,t,o)=>{o.d(t,{default:()=>n});const n={usersBlockItems:"UsersBlockMVK-module__usersBlockItems--lH0fn"}},649629:(e,t,o)=>{o.d(t,{default:()=>n});const n={usersBlockFooterSpacing:"UsersBlockWEB-module__usersBlockFooterSpacing--xHY2H"}},132831:(e,t,o)=>{o.d(t,{default:()=>n});const n={usersFooterActionRoot:"UsersFooterAction-module__usersFooterActionRoot--kvsgz",usersFooterActionLink:"UsersFooterAction-module__usersFooterActionLink--DMdL7",usersFooterActionMiddle:"UsersFooterAction-module__usersFooterActionMiddle--FZnJe",usersFooterActionIcon:"UsersFooterAction-module__usersFooterActionIcon--UPavX"}},733526:(e,t,o)=>{o.d(t,{default:()=>n});const n={feedBlockHeaderWrap:"FeedBlockHeader-module__feedBlockHeaderWrap--A5IW4",feedBlockHeaderWrapDecreaseMargin:"FeedBlockHeader-module__feedBlockHeaderWrapDecreaseMargin--_CxFl",feedBlockHeaderMoreIcon:"FeedBlockHeader-module__feedBlockHeaderMoreIcon--pFTPX",feedBlockHeaderContent:"FeedBlockHeader-module__feedBlockHeaderContent--rYOiQ",feedBlockHeaderTitleIcon:"FeedBlockHeader-module__feedBlockHeaderTitleIcon--_vVRe"}},387042:(e,t,o)=>{o.d(t,{default:()=>n});const n={feedBlockHeaderWrapDecreaseMargin:"FeedBlockHeaderMVK-module__feedBlockHeaderWrapDecreaseMargin--IQEVs",feedBlockHeaderMoreIcon:"FeedBlockHeaderMVK-module__feedBlockHeaderMoreIcon--OEyma"}},687164:(e,t,o)=>{o.d(t,{FriendsAddResponseEnumNames:()=>n});const n={SEND:1,APPROVED:2,RESEND:4}},50614:(e,t,o)=>{o.d(t,{useIsMounted:()=>s});var n=o(667294);const s=()=>{const e=(0,n.useRef)(!1);return(0,n.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,n.useCallback)((()=>e.current),[])}},146932:(e,t,o)=>{function n(e){return 17===e?.error_code}function s(e){return n(e)&&Boolean(e.redirect_uri?.includes("act=validate"))}function r(e){return!!e&&"object"==typeof e&&"error_code"in e}o.d(t,{isApiError:()=>r,isPhoneValidationError:()=>s})},221810:(e,t,o)=>{o.d(t,{getBrowserHiddenAndVisibilityEvent:()=>n});const n=()=>{let e="",t="";return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityEvent:t}}},379036:(e,t,o)=>{o.d(t,{getEnvConfigValue:()=>r,isEnvConfigEnabled:()=>s});var n=o(977053);function s(e){return(0,n.partConfigEnabled)(e)}function r(e){return(0,n.getConfigValue)(e)}},397863:(e,t,o)=>{o.d(t,{times:()=>n});const n=(e,t)=>Array.from({length:e},((e,o)=>t(o)))},369418:(e,t,o)=>{o.d(t,{isUserAuthorized:()=>s});var n=o(184132);function s(){const e=window?.vk?.id||0;return!n.Ranges.isZeroOwner(e)}},781281:(e,t,o)=>{o.d(t,{fetchUsersRecommendations:()=>i});var n=o(166695),s=o(171366),r=o(517257);function i(e,t,o,i,a,d=r.USERS_PER_PAGE_NUMBER){return(0,n.api)("friends.getRecommendations",(0,s.getFetchUsersRecommendationsParams)(e,t,o,i,a,d)).then((e=>(0,s.isErrorType)(e)?Promise.reject(e):(0,s.transformFetchUsersRecommendationsResponse)(e,t)))}},802587:(e,t,o)=>{o.d(t,{withErrorBoundary:()=>l});var n=o(785893),s=o(667294),r=o(806660),i=o(258037),a=o(441430),d=o(471828),c=o(938346);function l(e,t){return o=>(0,n.jsx)(u,{...t,children:(0,n.jsx)(e,{...o})})}class u extends s.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){(0,c.logProfileError)({error:e,additionalText:"Rendering error has happened in component",extra:t})}render(){return this.state.hasError?(0,n.jsx)(r.Group,{separator:this.props.withSeparator?"show":"hide",children:(0,n.jsx)(i.Placeholder,{header:d.getLang("global_error"),action:(0,n.jsx)(a.Button,{mode:"tertiary",loading:this.state.isReloading,onClick:this.onClick,children:d.getLang("global_reload")}),children:d.getLang("profile_unknown_error")})}):this.props.children}constructor(...e){super(...e),this.state={hasError:!1,isReloading:!1},this.onClick=()=>{this.setState({isReloading:!0}),window.nav.reload({force:!0})}}}u.defaultProps={withSeparator:!0}},29394:(e,t,o)=>{o.d(t,{UserItemView:()=>m});var n=o(785893),s=o(173864),r=o(441430),i=o(358493),a=o(407729),d=o(659397),c=o(471828),l=o(666764),u=o(506890);const m=({user:e,image:t,imagePosition:o,isMobile:m,status:_,descriptions:h,isHiding:f,isAdding:g,buttonDisabled:p,buttonLabel:S,mode:k,href:R,getRootRef:v,onAdd:b,onHide:E,onClick:w,onTransitionEnd:C})=>{const I=m?"l":"m";return(0,n.jsx)("div",{className:(0,d.classNames)(l.sizeModifiersMap[I],u.default.userItemRoot,f&&u.default.userItemRootHide),children:(0,n.jsx)(s.UserRecommendationItem,{"aria-label":`${e.first_name} ${e.last_name}`,getRootRef:v,name:`${e.first_name} ${e.last_name}`,image:t,imagePosition:o,descriptions:h,status:_,size:I,hide:f,onClose:E,closeAriaLabel:c.getLang("global_hide"),after:(0,n.jsx)(r.Button,{before:!p&&(m?(0,n.jsx)(i.Icon16Add,{}):(0,n.jsx)(a.Icon24Add,{})),stretched:!0,size:"m",role:"button","aria-label":S,appearance:"overlay",mode:k,loading:g,disabled:p,onClick:b,children:S}),href:R,target:m?"_self":"_blank",onHide:C,onClick:w})})}},925315:(e,t,o)=>{o.d(t,{UserItemViewRedesign:()=>i});var n=o(785893),s=o(975689),r=o(471828);const i=({user:e,image:t,imagePosition:o,isMobile:i,subtitle:a,badge:d,isHiding:c,isAdding:l,buttonDisabled:u,buttonLabel:m,href:_,getRootRef:h,buttonType:f,badgeStyle:g,cardBackground:p,photoSize:S,onAdd:k,onHide:R,onClick:v,onTransitionEnd:b})=>{const E=f&&m?{buttonType:f,buttonLabel:m}:{};return(0,n.jsx)(s.RecommendationBlock.Card,{...E,spacing:12,"aria-label":`${e.first_name} ${e.last_name}`,getRootRef:h,title:`${e.first_name} ${e.last_name}`,subtitle:a,image:t,imagePosition:o,badge:d,hide:c,closeAriaLabel:r.getLang("global_hide"),badgeStyle:g,cardBackground:p,photoSize:S,isButtonDisabled:u,isButtonLoading:l,href:_,target:i?"_self":"_blank",onClose:R,onButtonClick:k,onHide:b,onClick:v})}},598381:(e,t,o)=>{o.d(t,{friendsAdd:()=>r,friendsHideSuggestion:()=>s});var n=o(166695);async function s(e){return(0,n.api)("friends.hideSuggestion",e)}async function r(e){return(0,n.api)("friends.add",e,{grouping:!1})}},441669:(e,t,o)=>{o.d(t,{UserRecommendationItem:()=>p});var n=o(785893),s=o(667294),r=o(997650),i=o(146427),a=o(687164),d=o(380526),c=o(471828),l=o(626863),u=o(916348),m=o(29394),_=o(925315),h=o(659397),f=o(517257),g=o(598381);const p=({user:e,newIndex:t,itemSize:o,trackCode:p,analyticRef:S,enabledCropPhotoCanvas:k,enabledCropPhotoCss:R,isRedesignV3:v,buttonType:b,badgeStyle:E,cardBackground:w,photoSize:C,onView:I,onHide:x,onAddToFriendsDone:y,onAddToFriendsFail:F,...N})=>{const[T,A]=(0,r.useInView)({triggerOnce:!0,threshold:.75}),[M,B]=(0,s.useState)(),[L,O]=(0,s.useState)(),[j,D]=(0,s.useState)(!1),[U,P]=(0,s.useState)(!1),[H,V]=(0,s.useState)(!1),[z,$]=(0,s.useState)(!1),[W,G]=(0,s.useState)(!1),[K,Y]=(0,s.useState)(null),[q,Q]=(0,s.useState)(e.friend_status||i.FriendsFriendStatusStatusEnumNames.NOT_A_FRIEND),X=(0,s.useCallback)((t=>{t.stopPropagation(),t.preventDefault(),V(!0),(0,g.friendsHideSuggestion)({user_id:e.id,track_code:p,ref:S})}),[e,p,S]),Z=(0,s.useCallback)((t=>{(0,d.isMainClick)(t.nativeEvent)&&(t.stopPropagation(),t.preventDefault(),D(!0),(0,g.friendsAdd)({user_id:e.id,track_code:e.track_code,source:S}).then((t=>{t===a.FriendsAddResponseEnumNames.APPROVED?Q(i.FriendsFriendStatusStatusEnumNames.IS_FRIEND):t===a.FriendsAddResponseEnumNames.SEND&&Q(i.FriendsFriendStatusStatusEnumNames.OUTCOMING_REQUEST),P(!0),y?.(e,t)}),(({error:t})=>{F?.(e,t)})).finally((()=>D(!1))))}),[e,S,y,F]),J=(0,s.useCallback)((()=>{$(!0),x?.(e.id)}),[x,e.id]);(0,s.useEffect)((()=>{A&&I()}),[A]),(0,s.useEffect)((()=>{z&&V(!1)}),[z]),(0,s.useEffect)((()=>{U&&V(!0)}),[U]);const ee=(0,s.useMemo)((()=>q===i.FriendsFriendStatusStatusEnumNames.IS_FRIEND?"primary":q===i.FriendsFriendStatusStatusEnumNames.OUTCOMING_REQUEST?"secondary":q===i.FriendsFriendStatusStatusEnumNames.INCOMING_REQUEST?"primary":"secondary"),[q]),te=(0,s.useMemo)((()=>q===i.FriendsFriendStatusStatusEnumNames.IS_FRIEND?c.getLang("friends_request_become_friend"):q===i.FriendsFriendStatusStatusEnumNames.OUTCOMING_REQUEST?c.getLang("friends_request_friend_sent"):q===i.FriendsFriendStatusStatusEnumNames.INCOMING_REQUEST?c.getLang("global_accept"):"follow"===e?.social_button_type?c.getLang("public_subscribe"):c.getLang("global_add")),[q,e]),oe=(0,s.useMemo)((()=>q===i.FriendsFriendStatusStatusEnumNames.IS_FRIEND||q===i.FriendsFriendStatusStatusEnumNames.OUTCOMING_REQUEST),[q]),ne=(0,s.useMemo)((()=>e.descriptions?.map((e=>({text:e.text,photos:"images"===e.content_type?e.images?.map((e=>(0,h.getPhotoSize)(e,f.USER_STACK_AVATAR_SIZE*window.devicePixelRatio)?.url||"")):void 0})))||[]),[e]),se=(0,s.useMemo)((()=>ne.find((e=>!e.photos))?.text||""),[ne]),re=(0,s.useMemo)((()=>ne.find((e=>!!e.photos))),[ne]),ie=(0,s.useMemo)((()=>(0,l.getOwnerUrl)(e)),[e]),ae=(0,s.useMemo)((()=>{if(U)return q===i.FriendsFriendStatusStatusEnumNames.IS_FRIEND?c.getLang("friends_recom_accepted"):Boolean(e.can_access_closed)?c.getLang("friends_you_are_subscribed"):c.getLang("friends_request_friend_sent")}),[q,U,e]);return(0,s.useEffect)((()=>{if(e&&!W&&!M){if(k&&(0,u.needCrop)(e,10)||R)if(o&&R){const t=(0,u.getCropRectObject)(e);let n=e.photo_400||e.photo_200||e.photo_100||"";const s=(0,u.getUserPhotoPosition)(t,e,o.width,o.height);if(s){const{url:e,userPhotoPosition:t}=s;O(t),n=e}B(n)}else o&&k&&Y(setTimeout((()=>{G(!0);const t=(0,u.getCropRectObject)(e);(0,u.getUserPhoto)(t,e,o.width,o.height).then(B)}),Math.floor(t/f.COUNT_VISIBLE_ITEMS)*f.STEP_ASYNC_LOAD_PHOTOS_TIMEOUT));else B(e.photo_400||e.photo_200||e.photo_100||"");return()=>{K&&clearTimeout(K)}}}),[e,o,t]),z?null:v?(0,n.jsx)(_.UserItemViewRedesign,{...N,user:e,image:M,imagePosition:L,subtitle:se,badge:re,isHiding:H,isAdding:j,buttonDisabled:oe,buttonLabel:te,href:ie,getRootRef:T,buttonType:b,badgeStyle:E,cardBackground:w,photoSize:C,onAdd:Z,onHide:X,onTransitionEnd:J}):(0,n.jsx)(m.UserItemView,{...N,user:e,image:M,imagePosition:L,status:ae,descriptions:ne,isHiding:H,isAdding:j,buttonDisabled:oe,buttonLabel:te,mode:ee,href:ie,getRootRef:T,onAdd:Z,onHide:X,onTransitionEnd:J})}},666764:(e,t,o)=>{o.d(t,{ContentStatus:()=>n,sizeModifiersMap:()=>r});var n,s=o(506890);!function(e){e.exist="exist",e.notEnoughData="notEnoughData"}(n||(n={}));const r={s:s.default.userItemSizeS,m:s.default.userItemSizeM,l:s.default.userItemSizeL}},719935:(e,t,o)=>{o.d(t,{UsersBlockView:()=>S});var n=o(785893),s=o(667294),r=o(86894),i=o(806660),a=o(296184),d=o(659397),c=o(122398),l=o(85166),u=o(441669),m=o(471828),_=o(980370),h=o(745077),f=o(649629),g=o(557568),p=o(977053);const S=({isLoading:e,items:t,title:o,lastViewIndex:S,linkMore:k,blockTitle:R,showIcon:v,actions:b=[],isMobile:E,needFooter:w,onCardView:C,onClick:I,onHideFriend:x,...y})=>(0,n.jsx)(i.Group,{separator:"hide",mode:(0,p.partConfigEnabled)("mkv_feed_redesign_no_islands")?"plain":"card",header:(0,n.jsx)(c.FeedBlockHeader,{showIcon:v,isMobile:E,actions:b,children:R??o}),children:(0,n.jsxs)(i.Group.ExpandedContent,{children:[(0,n.jsx)(r.HorizontalScroll,{getScrollToLeft:_.handleScrollToLeft,getScrollToRight:_.handleScrollToRight,arrowSize:"l",children:(0,n.jsx)("div",{className:h.default.usersBlockItemsWrap,children:(0,n.jsxs)("div",{className:(0,d.classNames)(h.default.usersBlockItems,E&&g.default.usersBlockItems),children:[t?.map(((e,t)=>(0,s.createElement)(u.UserRecommendationItem,{...y,key:e.id,user:e,isMobile:E,newIndex:Math.abs(t-S)+1,trackCode:e.track_code||"",onHide:x,onView:()=>C(e,t),onClick:()=>I?.(e)}))),e&&(0,n.jsx)(a.UserRecommendationLoadingItem,{size:E?"l":"m"})]})})}),w?(0,n.jsx)(l.UsersFooterAction,{isMobile:E,href:k,text:m.getLang("friends_show_more_rec")}):(0,n.jsx)("div",{className:(0,d.classNames)(h.default.usersBlockFooterSpacing,!E&&f.default.usersBlockFooterSpacing)})]})})},233144:(e,t,o)=>{o.d(t,{UsersBlockViewRedesign:()=>c});var n=o(785893),s=o(975689),r=o(282788),i=o(441669),a=o(471828),d=o(980370);const c=({isLoading:e,items:t,title:o,lastViewIndex:c,linkMore:l,blockTitle:u,isMobile:m,buttonType:_,photoSize:h,isShowAllCard:f,isBlockErrorRedesignV3:g,onCardView:p,onHideFriend:S,onHideBlock:k,onClick:R,loadUsersRecommendations:v,...b})=>{const E=h??"square";return(0,n.jsx)(s.RecommendationBlock,{title:u??(o||""),isMobile:m,onClose:k,children:g?(0,n.jsx)(s.RecommendationBlock.ContentError,{size:E,buttonLabel:a.getLang("groups_feed_recommend_repeat_try"),hasSeparator:m,onButtonClick:v,cardProps:{buttonType:_},children:a.getLang("groups_feed_recommend_loading_error")}):(0,n.jsx)(r.Grid,{columns:"dynamic",rowSpacing:12,children:(0,n.jsxs)(r.Grid.HorizontalScroll,{padding:"base",getScrollToLeft:d.handleScrollToLeft,getScrollToRight:d.handleScrollToRight,arrowSize:"m",children:[t?.map(((e,t)=>(0,n.jsx)(r.Grid.Item,{children:(0,n.jsx)(i.UserRecommendationItem,{...b,user:e,isMobile:m,newIndex:Math.abs(t-c)+1,trackCode:e.track_code||"",isRedesignV3:!0,buttonType:_,photoSize:h,onView:()=>p(e,t),onHide:S,onClick:()=>R?.(e)})},e.id))),e&&(0,n.jsx)(r.Grid.Item,{children:(0,n.jsx)(s.RecommendationBlock.LoadingCard,{size:E,cardProps:{buttonType:_}})}),f&&(0,n.jsx)(r.Grid.Item,{children:(0,n.jsx)(s.RecommendationBlock.ShowAllCard,{size:E,href:l,cardProps:{buttonType:_},children:a.getLang("groups_feed_recommend_show_all")})})]})})})}},296034:(e,t,o)=>{o.d(t,{UsersBlockWrap:()=>m});var n=o(785893),s=o(562856),r=o(471828),i=o(75002),a=o(166191),d=o(685905),c=o(765166),l=o(691620),u=o(977053);const m=(0,l.withUsersRecomStatisticMethods)((0,c.withStatisticMethods)((({stateAsync:e,reloadBlockNode:t,reloadHeaderBlockNode:o,block:c,blockTitle:l,showIcon:m,isMobile:_,needFooter:h=!0,isRedesignV3:f,buttonType:g,photoSize:p,isBlockErrorRedesignV3:S,...k})=>(c||e===d.STATE_ASYNC.NONE)&&e!==d.STATE_ASYNC.LOADING&&e!==d.STATE_ASYNC.ERROR||S?e===d.STATE_ASYNC.NONE?null:(0,n.jsx)(s.UsersBlock,{...k,stateAsync:e,block:c,showIcon:m,blockTitle:l,isMobile:_,needFooter:h,isRedesignV3:f,buttonType:g,photoSize:p,isBlockErrorRedesignV3:S}):f?(0,n.jsx)(a.RecommendationSkeleton,{cardsAmount:5,blockTitle:l??r.getLang("friends_recs_block_title"),buttonType:g,photoSize:p,isMobile:_}):(0,n.jsx)(i.CarouselSkeleton,{cardsAmount:5,type:"full",blockTitle:l??r.getLang("friends_recs_block_title"),showIcon:m,isMobile:_,size:_?"l":"m",footerNode:t,moreIconNode:o,needFooter:h,withBorder:!(0,u.partConfigEnabled)("mkv_feed_redesign_no_islands")}))))},562856:(e,t,o)=>{o.d(t,{UsersBlock:()=>k});var n=o(785893),s=o(667294),r=o(687164),i=o(893682),a=o(659397),d=o(883949),c=o(517257),l=o(146932),u=o(626863),m=o(802587),_=o(719935),h=o(233144),f=o(471828),g=o(916363),p=o(869043),S=o(977053);o(745077);const k=(0,m.withErrorBoundary)((({block:e,blockType:t,trackCode:o,analyticRef:m,onLoadMore:k,isLoading:R,showIcon:v,unmount:b,showDoneBox:E,showValidationError:w,needFooter:C,isRedesignV3:I,buttonType:x,badgeStyle:y,cardBackground:F,photoSize:N,isBlockErrorRedesignV3:T,loadUsersRecommendations:A,handleHideBlock:M,handleShowCard:B,handleOpenCard:L,handleAddToFriendsDone:O,...j})=>{const[D,U]=(0,s.useState)(0),P=(0,g.useUserRecommendationsServiceInstance)(),H=(0,s.useCallback)((()=>{b(),(0,S.partConfigEnabled)("feed_user_rec_news_feed_ignore_item_in_statistic_hoc")||(0,p.newsfeedIgnoreItem)({type:t,ref:m,item_id:window.vk.id,owner_id:window.vk.id,track_code:o}),M&&M()}),[b,t,m,o,M]),V=(0,s.useMemo)((()=>[{text:f.getLang("global_hide"),onClick:H,beforeIcon:(0,n.jsx)(d.Icon20BlockOutline,{})}]),[H]),z=(0,s.useCallback)(((t,o)=>{U(o);const{id:n,track_code:s=""}=t;B&&B(n,s,o);const{items:r=[]}=e||{};o>=r.length-1-c.LOAD_MORE_OFFSET&&k?.()}),[e,k]),$=(0,s.useCallback)(((e,t)=>{let o="";const n=(0,u.getOwnerUrl)(e),s=`<a href="${n}">${(0,a.encodeHTMLEntities)((0,a.escape)(e.first_name_acc||""))}</a>`,d=`<a href="${n}">${(0,a.encodeHTMLEntities)((0,a.escape)(e.first_name||""))}</a>`,c=`<a href="${n}">${(0,a.encodeHTMLEntities)((0,a.escape)(e.first_name_gen||""))}</a>`;if(t===r.FriendsAddResponseEnumNames.APPROVED)o=f.getLang("global_friend_add_result_msg_are_friends").replace("{user_genetive}",c),E?.(o);else if(t===r.FriendsAddResponseEnumNames.SEND){let t="";t=e.can_access_closed?"follow"===e?.social_button_type?f.getLang("global_friend_subscribe_result_msg"):(0,f.langSex)(e.sex||i.BaseSexEnumNames.UNKNOWN,f.getLang("global_friend_add_result_msg_subscribed","raw")):"follow"===e?.social_button_type?(0,f.langSex)(e.sex||i.BaseSexEnumNames.UNKNOWN,f.getLang("global_closed_friend_add_subscribe_request_sent","raw")):f.getLang("global_closed_friend_request_sent_msg"),t=t.replace("{user_accusative}",s).replace("{user_nominative}",d).replace("{user_genetive}",c),E?.(t)}O&&O(e.track_code)}),[]),W=(0,s.useCallback)(((e,t)=>{(0,l.isPhoneValidationError)(t)?w?.(e):E?.(f.getLang("global_unknown_error"))}),[]),G=(0,s.useCallback)((e=>{const{id:t,track_code:o=""}=e||{};L&&L(t,o)}),[L]),{items:K=[],next_from:Y,title:q}=e||{},Q=!Y&&!R;return I?(0,n.jsx)(h.UsersBlockViewRedesign,{...j,isLoading:R,lastViewIndex:D,items:K,title:q,analyticRef:m,buttonType:x,badgeStyle:y,cardBackground:F,photoSize:N,isShowAllCard:Q,isBlockErrorRedesignV3:T,onCardView:z,onAddToFriendsDone:$,onAddToFriendsFail:W,onHideFriend:P.fireHideUserFromFriendsRecommendations,onHideBlock:H,onClick:G,loadUsersRecommendations:A}):(0,n.jsx)(_.UsersBlockView,{...j,isLoading:R,lastViewIndex:D,items:K,title:q,analyticRef:m,showIcon:v,actions:V,needFooter:C,onCardView:z,onAddToFriendsDone:$,onAddToFriendsFail:W,onHideFriend:P.fireHideUserFromFriendsRecommendations,onClick:G})}))},980370:(e,t,o)=>{o.d(t,{handleScrollToLeft:()=>s,handleScrollToRight:()=>r});var n=o(517257);const s=e=>e-2*(n.CARD_WIDTH+n.CARD_GAP),r=e=>e+2*(n.CARD_WIDTH+n.CARD_GAP)},85166:(e,t,o)=>{o.d(t,{UsersFooterAction:()=>d});var n=o(785893),s=o(659397),r=o(990460),i=o(74106),a=o(132831);const d=({text:e,href:t,isMobile:o,withIcon:d=!0,className:c,onClick:l,role:u="button"})=>{const m=o?(0,n.jsx)(r.Headline,{level:"1",weight:"2",children:e}):(0,n.jsx)(r.Text,{children:e}),_=(0,n.jsxs)(n.Fragment,{children:[m,d&&(0,n.jsx)("div",{className:a.default.usersFooterActionIcon,"aria-hidden":!0,children:(0,n.jsx)(i.Icon16ChevronOutline,{})})]}),h=(0,s.classNames)(a.default.usersFooterActionRoot,c);return t?(0,n.jsx)("div",{className:h,onClick:l,role:u,children:(0,n.jsx)("div",{className:a.default.usersFooterActionMiddle,children:(0,n.jsx)("a",{role:"link",target:o?"_self":"_blank",href:t,className:a.default.usersFooterActionLink,children:_})})}):(0,n.jsx)("div",{className:h,role:u,children:(0,n.jsx)("div",{className:a.default.usersFooterActionMiddle,children:(0,n.jsx)("div",{className:a.default.usersFooterActionLink,onClick:l,children:_})})})}},517257:(e,t,o)=>{o.d(t,{CARD_GAP:()=>i,CARD_WIDTH:()=>r,COUNT_VISIBLE_ITEMS:()=>u,FriendsRecommendationsBlockTypes:()=>f,FriendsRecommendationsRef:()=>h,LOAD_MORE_OFFSET:()=>a,MAX_PAGE_NUMBER:()=>d,MAX_RETRY_COUNT:()=>c,MIN_RECOMMENDATION_COUNT:()=>_,RETRY_CODES:()=>l,STEP_ASYNC_LOAD_PHOTOS_TIMEOUT:()=>m,USERS_PER_PAGE_NUMBER:()=>n,USER_STACK_AVATAR_SIZE:()=>s,UsersRecommendationsBlockName:()=>g});const n=20,s=50,r=210,i=12,a=7,d=3,c=2,l=[1,8,10],u=3,m=300,_=3;var h,f,g;!function(e){e.PROFILE="profile",e.FRIENDS_RIGHT="friends_right",e.FEED_RIGHT="feed_right",e.FEED_RECOMMENDED_FRIENDS_RIGHT_BLOCK="feed_recommended_friends_right_block",e.FEED_MAIN_RECOMMENDED_FRIENDS_RIGHT_BLOCK="friends_main_recommended_friends_right_block"}(h||(h={})),function(e){e.INLINE_USER_REC="inline_user_rec",e.OTHER="other"}(f||(f={})),function(e){e.FriendsRecommendationsBlock="FriendsRecommendationsBlockRedesign",e.AuthorsRecommendationsBlock="AuthorsRecommendationsBlockRedesign"}(g||(g={}))},559057:(e,t,o)=>{o.d(t,{UsersRecommendationsBlockRedesignServiceExtended:()=>f});var n=o(785893),s=o(667294),r=o(504190),i=o(975689),a=o(173864),d=o(916363),c=o(296034),l=o(511279),u=o(85166),m=o(471828),_=o(278673),h=o(776629);const f=(0,_.connectServiceProvider)((({blockType:e,analyticRef:t,trackCode:o="",ownerId:_,isMobile:f,wrapperComponent:g,shouldUseHeaderLoadMore:p,hideSkeleton:S,skipError:k,isRedesignV3:R,photoSize:v,unmount:b,...E})=>{const w=R?i.RecommendationBlock.Card.SIZE[v||"square"]:a.UserRecommendationItem.SIZE[f?"l":"m"],C=(0,d.useUserRecommendationsServiceInstance)(),I=(0,r.useStore)(C.$friendsRecommendations),x=(0,r.useStore)(C.$shouldShowFriendsRecommendations),y=(0,r.useStore)(C.loadFriendsRecommendationsFx.pending),F=(0,r.useStore)(C.$loadFriendsRecommendationsError),N=(0,r.useStore)(C.$canRetryFriendsRecommendations),T=(0,r.useStore)(C.$loadingCountsFriendsRecommendations),[A,M]=(0,s.useState)(!1),B=I?.track_code||o,L=(0,s.useCallback)((()=>{M(!0),b()}),[M,b]),O=(0,s.useMemo)((()=>(0,h.getStateAsync)({blocks:I,error:F,isLoading:y,hidden:A,showUsersRecommendations:x,hideSkeleton:S,skipError:k})),[I,F,y,A,x,S,k]),j=(0,s.useCallback)((()=>{C.fireLoadFriendsRecommendationsEvent({blockType:e,analyticsRef:t,trackCode:B,ownerId:_})}),[e,t,B,C,_]),D=(0,s.useCallback)((()=>{y||j()}),[y,j]),U=(0,s.useMemo)((()=>!F||N||y?null:(0,n.jsx)(u.UsersFooterAction,{isMobile:f,withIcon:!1,text:m.getLang("friends_refresh"),onClick:j})),[F,N,y,j]),P=(0,s.useMemo)((()=>F&&!N&&!y&&p?(0,n.jsx)(l.FeedBlockHeaderMoreIcon,{actions:[{text:m.getLang("friends_refresh"),onClick:j}],isMobile:f}):null),[F,N,y,p,j]),H=!!F&&!N&&!y&&R;(0,s.useEffect)((()=>{(I&&!(T.length>1)||F)&&!N||y||j()}),[I,F,N,T.length,y,j]);const V=(0,n.jsx)(c.UsersBlockWrap,{...E,stateAsync:O,reloadBlockNode:U,reloadHeaderBlockNode:P,block:I,blockType:e,trackCode:B,analyticRef:t,itemSize:w,isLoading:y,isMobile:f,onLoadMore:D,unmount:L,isRedesignV3:R,photoSize:v,isBlockErrorRedesignV3:H,loadUsersRecommendations:j});return g?(0,n.jsx)(g,{children:V}):V}),d.UserRecommendationsServiceProvider)},776629:(e,t,o)=>{o.d(t,{getStateAsync:()=>s});var n=o(685905);const s=({blocks:e,error:t,isLoading:o,hidden:s,showUsersRecommendations:r,hideSkeleton:i,skipError:a})=>s||!r||i&&!e?.items.length&&o||a&&t?n.STATE_ASYNC.NONE:t&&!e?.items.length?n.STATE_ASYNC.ERROR:!e||!e?.items.length&&o?n.STATE_ASYNC.LOADING:n.STATE_ASYNC.LOADED},638696:(e,t,o)=>{o.d(t,{initUserRecommendationsActions:()=>s});var n=o(781281);const s=e=>{e.loadFriendsRecommendationsFx.use((({user_id:e,next_from:t,analyticsRef:o,blockType:s,trackCode:r,perPage:i})=>(0,n.fetchUsersRecommendations)(o,s,t,e,r,i)))}},239367:(e,t,o)=>{o.d(t,{addUserRecommendationsDependenciesToModel:()=>i});var n=o(798116),s=o(666764),r=o(517257);const i=(e,t)=>{e.$loadingCountsFriendsRecommendations.reset(e.fireResetStore),e.$hiddenFriendsRecommendationsIds.reset(e.fireResetStore),e.$friendsRecommendationsRetryCounter.reset(e.fireResetStore),e.$loadFriendsRecommendationsError.reset(e.fireResetStore),e.$friendsRecommendations.reset(e.fireResetStore),(0,n.sample)({clock:e.fireHideUserFromFriendsRecommendations,source:e.$hiddenFriendsRecommendationsIds,fn:(e,t)=>[...e,t],target:e.$hiddenFriendsRecommendationsIds}),(0,n.sample)({clock:e.fireHideUserFromFriendsRecommendations,source:e.$friendsRecommendations,filter:e=>Boolean(e&&e.items),fn:(e,t)=>({...e,items:e?.items.filter((e=>e.id!==t))}),target:e.$friendsRecommendations}),(0,n.sample)({clock:e.loadFriendsRecommendationsFx.doneData,source:e.$loadingCountsFriendsRecommendations,filter:e=>e.length>1,fn:e=>e.slice(1),target:e.$loadingCountsFriendsRecommendations}),(0,n.sample)({clock:e.loadFriendsRecommendationsFx.doneData,source:{friendsRecommendations:e.$friendsRecommendations,hiddenFriendsRecommendationsIds:e.$hiddenFriendsRecommendationsIds},fn:({friendsRecommendations:e,hiddenFriendsRecommendationsIds:t},o)=>{const n=o?.items||[],i=e?.items.map((e=>n.find((t=>t.id===e.id))||e))||[],a=new Set(i.map((({id:e})=>e)).concat(t)),d=[...i,...n.filter((({id:e})=>!a.has(e)))],c=(!e||0===e.items.length)&&o.items.length<r.MIN_RECOMMENDATION_COUNT?s.ContentStatus.notEnoughData:s.ContentStatus.exist;return{...e||{},...o||{},title:o?.title??e?.title,next_from:o?.next_from,count:d.length,items:d,contentStatus:c}},target:e.$friendsRecommendations}),(0,n.sample)({clock:e.loadFriendsRecommendationsFx.doneData,source:e.$loadFriendsRecommendationsError,filter:e=>!!e,fn:()=>null,target:e.$loadFriendsRecommendationsError}),(0,n.sample)({clock:e.loadFriendsRecommendationsFx.doneData,source:e.$friendsRecommendationsRetryCounter,filter:e=>!!e,fn:()=>0,target:e.$friendsRecommendationsRetryCounter}),(0,n.sample)({clock:e.loadFriendsRecommendationsFx.failData,fn:e=>e,target:e.$loadFriendsRecommendationsError}),(0,n.sample)({clock:e.loadFriendsRecommendationsFx.failData,source:e.$friendsRecommendationsRetryCounter,fn:e=>e+1,target:e.$friendsRecommendationsRetryCounter}),(0,n.sample)({clock:e.fireLoadFriendsRecommendationsEvent,source:{friendsRecommendations:e.$friendsRecommendations,pending:e.loadFriendsRecommendationsFx.pending,loadingCounts:e.$loadingCountsFriendsRecommendations,shouldShowFriendsRecommendations:e.$shouldShowFriendsRecommendations},filter:(e,t)=>{const{friendsRecommendations:o,pending:n,shouldShowFriendsRecommendations:s}=e,{count:r,next_from:i}=o||{},{isPlaceholderView:a,analyticsRef:d,blockType:c}=t;return s&&!a&&!n&&!!d&&!!c&&(0!==r&&!!i||null===o)},fn:({friendsRecommendations:e,loadingCounts:t},{ownerId:o,analyticsRef:n,blockType:s,trackCode:r})=>({user_id:o,next_from:e?.next_from??"",analyticsRef:n,blockType:s,trackCode:e?.track_code||r,perPage:t[0]}),target:e.loadFriendsRecommendationsFx}),t?.fireExternalRecommendationsLoading&&(0,n.sample)({clock:t.fireExternalRecommendationsLoading,fn:e=>e,target:e.fireLoadFriendsRecommendationsEvent}),t?.fireResetFriendsRecommendations&&((0,n.sample)({clock:t.fireResetFriendsRecommendations,fn:e=>e,target:e.fireResetStore}),e.$friendsRecommendations.reset(t.fireResetFriendsRecommendations))}},100824:(e,t,o)=>{o.d(t,{DEFAULT_USER_RECOMMENDATION_DOMAIN_NAME:()=>a,getUserRecommendationsModel:()=>d});var n=o(798116),s=o(666764),r=o(171366),i=o(517257);const a="Block/FriendsRecommendations",d=(e=a,t)=>{const o=(0,n.createDomain)(e),d=o.createStore(null),c=o.createStore(null),l=o.createStore(0),u=(0,n.combine)(c,l,((e,t)=>!(!(0,r.needRetryLoadData)(e)||t>i.MAX_RETRY_COUNT))),m=o.createStore([]),_=(0,n.combine)(d,m,((e,t)=>{if(null===e)return!0;if(!e?.count||e?.contentStatus===s.ContentStatus.notEnoughData)return!1;return(e?.items||[]).some((({id:e})=>!t.includes(e)))})),h=o.createStore((0,r.getInitialPerPageCounts)(t?.isAdoptedLoadingsCount)),f=o.createEvent("fire/resetStore"),g=o.createEvent("fire/loadFriendsRecommendationsEvent"),p=o.createEvent("fire/hideUserFromFriendsRecommendations"),S=o.createEffect({sid:"loadFriendsRecommendationsFx"});return{friendsRecommendationsDomain:o,$friendsRecommendations:d,$loadFriendsRecommendationsError:c,$friendsRecommendationsRetryCounter:l,$canRetryFriendsRecommendations:u,$hiddenFriendsRecommendationsIds:m,$shouldShowFriendsRecommendations:_,$loadingCountsFriendsRecommendations:h,fireLoadFriendsRecommendationsEvent:g,fireHideUserFromFriendsRecommendations:p,fireResetStore:f,loadFriendsRecommendationsFx:S}}},916363:(e,t,o)=>{o.d(t,{UserRecommendationsServiceProvider:()=>a,useUserRecommendationsServiceInstance:()=>d});var n=o(100824),s=o(239367),r=o(638696),i=o(278673);const{ServiceProvider:a,useServiceInstance:d}=(0,i.getServiceProvider)(((e,t)=>{const o=(0,n.getUserRecommendationsModel)(t,e);return(0,s.addUserRecommendationsDependenciesToModel)(o,e),(0,r.initUserRecommendationsActions)(o),o}),void 0,n.DEFAULT_USER_RECOMMENDATION_DOMAIN_NAME)},171366:(e,t,o)=>{o.d(t,{getFetchUsersRecommendationsParams:()=>r,getFriendsLinkMore:()=>u,getInitialPerPageCounts:()=>c,isBlockInitData:()=>a,isErrorType:()=>l,needRetryLoadData:()=>d,transformFetchUsersRecommendationsResponse:()=>i});var n=o(568963),s=o(517257);function r(e,t,o,n,r,i=s.USERS_PER_PAGE_NUMBER){return{fields:"first_name,first_name_gen,first_name_dat,first_name_acc,sex,screen_name,friend_status,can_access_closed,photo_200,photo_400,photo_100,social_button_type",block_type:t,start_from:o,count:i,ref:e,friend_id:n,need_description:1,track_code:r}}function i(e,t){return{type:t,title:e.title,next_from:e.next_from,items:e.items,date:Date.now()/1e3,count:e.count,track_code:e.track_code}}function a(e){return!!e&&!!e.block_type&&!!e.block_ref}const d=e=>{if(!e)return!1;const{type:t,error:o}=e,{error_code:r=0}=o||{};return!(t===n.APIErrorType.API_ERROR&&!s.RETRY_CODES.includes(r))},c=e=>e?[4,7,10]:[s.USERS_PER_PAGE_NUMBER],l=e=>e.error&&e.type,u=(e,t)=>t?`/friends?section=suggestions&ref=${e}`:`/friends?act=find&from_ref=${e}`},869043:(e,t,o)=>{o.d(t,{newsfeedIgnoreItem:()=>s});var n=o(166695);const s=e=>(0,n.api)("newsfeed.ignoreItem",e)},511279:(e,t,o)=>{o.d(t,{FeedBlockHeaderMoreIcon:()=>d});var n=o(785893),s=o(924766),r=o(981284),i=o(583117),a=o(432483);const d=({actions:e,isMobile:t})=>e?.length>0?(0,n.jsx)(s.DropdownActionSheet,{offsetDistance:-7,placement:"bottom-end",content:(0,n.jsx)(n.Fragment,{children:e.map((e=>(0,n.jsx)(s.DropdownActionSheet.Item,{href:e.href,before:e.beforeIcon,onClick:e.onClick,children:e.text},e.text)))}),children:(0,n.jsx)(r.IconButton,{children:t?(0,n.jsx)(i.Icon24MoreVertical,{width:24}):(0,n.jsx)(a.Icon24MoreHorizontal,{})})}):null},122398:(e,t,o)=>{o.d(t,{FeedBlockHeader:()=>m});var n=o(785893),s=o(597535),r=o(249779),i=o(733552),a=o(893535),d=o(659397),c=o(511279),l=o(733526),u=o(387042);const m=({actions:e=[],showIcon:t,isMobile:o,children:m})=>(0,n.jsxs)("div",{className:(0,d.classNames)(l.default.feedBlockHeaderWrap,l.default.feedBlockHeaderWrapDecreaseMargin,o&&u.default.feedBlockHeaderWrapDecreaseMargin),children:[(0,n.jsx)(s.HeaderLayout,{aside:(0,n.jsx)(s.HeaderLayout.Content,{align:"bottom",children:(0,n.jsx)("div",{className:(0,d.classNames)(l.default.feedBlockHeaderMoreIcon,o&&u.default.feedBlockHeaderMoreIcon),children:(0,n.jsx)(c.FeedBlockHeaderMoreIcon,{actions:e,isMobile:o})})}),children:(0,n.jsx)(r.Header,{mode:"primary",children:(0,n.jsxs)("div",{className:l.default.feedBlockHeaderContent,children:[t&&(0,n.jsx)(a.Icon28UsersCircleFillBlue,{className:l.default.feedBlockHeaderTitleIcon}),m]})})}),(0,n.jsx)(i.Spacing,{size:4})]})},925695:(e,t,o)=>{o.d(t,{useElementOnScreen:()=>s});var n=o(667294);const s=(e,t=[],o=!1,s)=>{const r=(0,n.useRef)(null),i=(0,n.useRef)(null),[a,d]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const n=t.some((e=>!e)),a=()=>{if(r.current&&!n)try{i.current=new IntersectionObserver(((e,t)=>{const[n]=e;d((e=>e!==!!n?.isIntersecting?!!n?.isIntersecting:e)),n?.isIntersecting&&s&&(s(r.current),o&&t.disconnect())}),e),i.current.observe(r.current)}catch{return}else setTimeout((()=>a()),0)};return a(),()=>{i.current&&r.current&&o&&i.current.unobserve(r.current)}}),[e,o,...t]),[r,a]}},12459:(e,t,o)=>{o.d(t,{useVisibilityChange:()=>r});var n=o(667294),s=o(221810);const r=()=>{const{hidden:e,visibilityEvent:t}=(0,s.getBrowserHiddenAndVisibilityEvent)(),[o,r]=(0,n.useState)(!document[e]),i=(0,n.useCallback)((()=>r((t=>t!==!document[e]?!document[e]:t))),[e]);return(0,n.useEffect)((()=>(document.addEventListener(t,i,!1),()=>document.removeEventListener(t,i,!1))),[t,i]),o}},380526:(e,t,o)=>{o.d(t,{KEY:()=>n,checkEvent:()=>r,isMainClick:()=>s,preventLinkOpening:()=>i});const n={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,CTRL:17,ALT:18,SHIFT:16,META_LEFT:91,META_RIGHT:93};function s(e){return!("click"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type||0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)}function r(e){return!!(e&&e instanceof MouseEvent)&&!s(e)}const i=e=>new Promise((t=>{s(e instanceof MouseEvent?e:e.nativeEvent)&&(e.stopPropagation(),e.preventDefault(),t())}))},641309:(e,t,o)=>{o.d(t,{MVK_WALL_ITEM_SELECTOR:()=>n,WEB_FEED_ITEM_SELECTOR:()=>s});const n=".wall_item, .post_item, .js-wall_item",s=".feed_row"},23812:(e,t,o)=>{o.d(t,{getEnabledMvkTabs:()=>_,getEnabledWebTabs:()=>u,getMainDataLoadParams:()=>a,getOwnerContentTabsDataRequestParams:()=>c,getSupportedMvkTabs:()=>m,getSupportedWebTabs:()=>l,getViewerDataLoadParams:()=>d});var n=o(379036),s=o(369418);function r(e){return e.join(",")}const i=r(["age_mark","is_sber_verified","is_tinkoff_verified","is_esia_verified","can_ban","can_see_gifts","followers_count","no_index","about","activities","activity","bdate","no_index","blacklisted","blacklisted_by_me","books","buttons","can_call","can_invite_to_chats","can_post","can_see_all_posts","can_see_wishes","can_send_friend_request","can_subscribe_stories","can_write_private_message","career","city","connections","counters","country","emoji_status","first_name_acc","first_name_dat","first_name_gen","first_name_ins","friend_status","games","gifts_tooltip","has_photo","home_town","image_status","interests","is_dead","is_favorite","is_hidden_from_feed","is_subscribed","is_subscribed_stories","last_name_acc","last_name_dat","last_name_gen","last_name_ins","last_seen","military","movies","music","mutual","occupation","online","online_info","owner_state","personal","quotes","relation","relatives","schools","screen_name","social_button_type","domain","sex","site","status","trending","tv","universities","verified","video_live","wall_default","bdate_visibility","contacts","photo_max","photo_medium_rec","photo_rec","can_ask_question","can_subscribe_posts","cover","first_name_nom","lists","maiden_name","nickname","photo_200","photo_400","photo_avg_color","photo_id","photo_max_size","profile_buttons","stories_archive_count","third_party_buttons","service_description","is_best_friend","is_nft","is_followers_mode_on","is_personal_ads_easy_promote_enabled","need_big_msg_btn_in_profile"]);function a(e,t,o){const n=e===t,s={"photos.get":{owner_id:e,album_id:"profile",rev:1,count:1},"users.getSubscriptions":{fields:r(["photo_200","photo_100","description","status","is_nft"]),count:5,extended:1,user_id:e},"users.getFollowers":{fields:r(["photo_200","photo_100","photo_50","is_friend","sex"]),count:n?8:3,user_id:e},"gifts.get":{user_id:e,count:6}};return t&&(o.withoutFriends||(s["friends.get"]={user_id:e,count:12,fields:r(["domain","photo_100","photo_200","online","is_nft"]),order:"hints"}),s["stories.get"]={owner_id:e}),n&&(s["friends.getRequests"]={need_count:1,count:3,need_viewed:0,fields:r(["photo_100","photo_200","sex"]),extended:1},o.withOnlineFriends&&(s["friends.getOnline"]={user_id:e,count:8,order:"hints"}),s["account.getPrivacySettings"]={privacy_keys:"friends_requests,audios,stories,gifts",need_default:0},s["account.getSilentModeStatus"]={}),o.withoutUser||(s["users.get"]={user_ids:e.toString(),fields:i}),s}function d(e){return{user_ids:String(e),fields:r(["is_followers_mode_on","social_button_type"])}}function c(e,t,o={}){const s={};return t.forEach((t=>{switch(t){case"photos":o.isPhotoFeedEnabled?s["photos.photoFeedGet"]={owner_id:e,extended:1,photo_sizes:1,count:6}:s["photos.getAll"]={owner_id:e,photo_sizes:1,extended:1,skip_hidden:1};break;case"videos":s["video.get"]={owner_id:e,need_privacy:1,count:9};break;case"music":s["audio.get"]={owner_id:e,photo_sizes:1,count:8},s["audio.getPlaylists"]={owner_id:e,photo_sizes:1,count:9};break;case"short_videos":s["shortVideo.getOwnerVideos"]={owner_id:e,count:9};break;case"articles":s["articles.getOwnerPublished"]={owner_id:e,count:3};break;case"narratives":s["narratives.getFromOwner"]={owner_id:e,limit:9};break;case"nfts":{const t=(0,n.getEnvConfigValue)("nft_profile_content_count"),o=t||9;(0,n.isEnvConfigEnabled)("nft_profile_market")?s["nftMarket.searchTokens"]={result_type:"model",search_type:"published",limit:o,props:JSON.stringify({owner_id:e}),fields:JSON.stringify(["collection"])}:s["nft.getCollection"]={owner_id:e,limit:o};break}case"albums":s["photos.getAlbums"]={owner_id:e,count:9,need_system:1,need_covers:1,photo_sizes:1}}})),s}function l(){const e=(0,s.isUserAuthorized)(),t=e?["photos","short_videos","videos","music","articles","narratives","nfts"]:["short_videos","articles"];return(0,n.isEnvConfigEnabled)("profile_enable_album_tabs")&&e&&t.push("albums"),t}function u(){const e=(0,s.isUserAuthorized)(),t=e?["photos","short_videos","music","articles","nfts"]:["short_videos","articles"];return(0,n.isEnvConfigEnabled)("profile_enable_album_tabs")&&e&&t.push("albums"),t}function m(){const e=(0,s.isUserAuthorized)(),t=e?["photos","short_videos","videos","music","narratives","articles","nfts"]:["short_videos"];return(0,n.isEnvConfigEnabled)("profile_enable_album_tabs")&&e&&t.push("albums"),t}function _(){const e=(0,s.isUserAuthorized)(),t=e?["photos","short_videos","videos","music","narratives","articles","nfts"]:["short_videos"];return(0,n.isEnvConfigEnabled)("profile_enable_album_tabs")&&e&&t.push("albums"),t}},960864:(e,t,o)=>{o.d(t,{execute:()=>_,loadMainData:()=>g});var n=o(166695),s=o(306529),r=o(304939),i=o(23812),a=o(835609),d=o(433830),c=o(977053),l=o(5603),u=o(184132),m=o(938346);function _(e,t){const o=[],s=[],i=Object.keys(e),l={},_=new Set;if(!(u.Ranges.isUserId(window.vk?.id)&&(0,c.partConfigEnabled)("web_api_fork"))){const t=(0,c.partConfigEnabled)("profile_unauth_prefetch_web_fix"),o=[];for(const s of i)if(t){try{l[s]=(0,a.loadPrefetchCache)(s,r.API_VERSION,e[s])}catch(e){_.add(s)}l[s]||_.has(s)||o.push((0,n.api)(s,e[s]))}else o.push((0,n.api)(s,e[s]));return t&&!o.length?Promise.resolve(l):Promise.allSettled(o).then((e=>{const o=t?{...l}:{};return e.forEach(((e,t)=>{const n=i[t];"fulfilled"===e.status?o[n]=e.value:((0,c.partConfigEnabled)("web_execute_empty_response_log")&&!(0,d.isMvk)()&&"profile"===window.cur?.module&&"users.get"===n&&(0,m.logProfileError)({error:e.reason,additionalText:"Empty response in fork fallback",extra:{method:n}}),o[n]=!1)})),o}))}for(const t of i){try{l[t]=(0,a.loadPrefetchCache)(t,r.API_VERSION,e[t])}catch(e){_.add(t)}l[t]||_.has(t)||(o.push(`'${t}': fork(API.${t}(${JSON.stringify(e[t])}))`),s.push(`'${t}': wait(forks['${t}'])`))}if(!o.length)return Promise.resolve(l);const h=`\n    var forks = { ${o.join(",")} };\n\n    return { ${s.join(",")} };\n  `;return(0,n.api)("execute",{code:h},t).then((e=>{if((0,c.partConfigEnabled)("profile_fix_bad_execute_response")&&e.response){const t={...l,...e.response};return e.execute_errors&&(t.execute_errors=e.execute_errors),t}return{...l,...e}}))}const h=e=>new Promise((t=>{e?(0,n.apiWithPrefetch)("onboarding.getCards",{icon_sizes:"24,48",block_type:"multi"}).then((e=>{if(!e.count&&!(0,d.isMvk)())return(0,n.apiWithPrefetch)("onboarding.getCards",{icon_sizes:"24,48",block_type:"single"});t({onboardingCards:e})})).then((e=>{t({onboardingSingleCards:e})})).catch((()=>{console.error("error while loading onboarding"),t()})):t()})),f=(e,t)=>new Promise((o=>{e?(0,n.apiWithPrefetch)("users.get",(0,i.getViewerDataLoadParams)(e),t).then((e=>{o(e)})):o([{id:0}])}));function g(e,t,o,n){const r=e===t,u=(0,i.getMainDataLoadParams)(e,t,o),g=(0,a.startCacheMissLog)("profile_main_data"),p=[_(u,n),f(t,n),h(r)];return g(),Promise.all(p).then((([e,t,n])=>{if(!(o?.withoutUser||e["users.get"]&&e["users.get"].length)){const t=e.execute_errors;(0,c.partConfigEnabled)("web_execute_empty_response_log")&&!(0,d.isMvk)()&&t&&(0,m.logProfileError)({error:t,additionalText:"Empty response in users.get execute",extra:{method:"users.get"}});const o="something wrong with owner loading";throw console.error(o),new Error(o)}const i=e["users.get"]&&e["users.get"][0],a=t?.[0],u={viewer:a,owner:i||void 0};return e["friends.get"]&&(u.friends=e["friends.get"]),e["account.getSilentModeStatus"]&&(u.silentModeStatus=e["account.getSilentModeStatus"]),e["photos.get"]&&(u.avatar=e["photos.get"].items[0]),e["stories.get"]&&(u.stories=e["stories.get"]),e["users.getSubscriptions"]&&(u.subscriptions=e["users.getSubscriptions"]),e["users.getFollowers"]&&(u.followers=e["users.getFollowers"]),e["friends.getRequests"]&&(u.friendRequests=e["friends.getRequests"]),e["account.getPrivacySettings"]&&(u.viewerPrivacySettings=e["account.getPrivacySettings"]),e["gifts.get"]&&(u.gifts=e["gifts.get"]),e["friends.getOnline"]&&(u.onlineFriendIds=e["friends.getOnline"]),n&&(u.onboardingCards=n.onboardingCards,u.onboardingSingleCards=n.onboardingSingleCards),i&&(!r&&i.mutual?.count&&(u.mutual={status:s.LoadingStatus.initial}),r&&u.onlineFriendIds?.length&&(u.onlineFriends={status:s.LoadingStatus.initial}),!r&&i.gifts_tooltip&&(u.giftsCatalog={status:s.LoadingStatus.initial}),u.broadcastStatus=(0,l.getUserBroadcastStatus)(i)||void 0),u}))}},306529:(e,t,o)=>{var n;o.d(t,{LoadingStatus:()=>n}),function(e){e[e.initial=0]="initial",e[e.pending=1]="pending",e[e.reloading=2]="reloading",e[e.loaded=3]="loaded",e[e.failed=4]="failed"}(n||(n={}))},66452:(e,t,o)=>{o.d(t,{friendsRecommLogAddVisited:()=>i,friendsRecommLogCheckVisited:()=>a,friendsRecommLogCleanVisited:()=>d});var n,s=o(180937),r=o(921175);function i(e,t,o){const n=c();n[e]={ref:t,trackCode:o,date:Date.now()},s.multiAccountLs.set("friends_recomm_visited",n),window.setTimeout((()=>d(e)),r.TIME_TO_SAVE_FRIENDS_VISITED)}function a(e){return c()[e]}function d(e){if(e){const t=c();delete t[e],s.multiAccountLs.set("friends_recomm_visited",t)}else s.multiAccountLs.remove("friends_recomm_visited")}function c(){const e=s.multiAccountLs.get("friends_recomm_visited")||{};return Object.keys(e).forEach((t=>{Date.now()-e[t]?.date>r.TIME_TO_SAVE_FRIENDS_VISITED&&(delete e[t],s.multiAccountLs.set("friends_recomm_visited",e))})),Object.keys(e).length||s.multiAccountLs.remove("friends_recomm_visited"),e}!function(e){e.friends_recomm_visited="friends_recomm_visited"}(n||(n={}))},5603:(e,t,o)=>{o.d(t,{getUserBroadcastStatus:()=>n});const n=e=>{if(!e.status_audio)return null;const t={text:`${e.status_audio.artist} — ${e.status_audio.title}`};return e.status_audio.owner_id&&e.status_audio.id&&(t.audioRawId=`${e.status_audio.owner_id}_${e.status_audio.id}`),t}},399761:(e,t,o)=>{o.d(t,{RecommendationBlockSkeleton:()=>i});var n=o(785893),s=(o(667294),o(806660)),r=o(39849);function i({blockTitle:e,isMobile:t,children:o}){return(0,n.jsx)(n.Fragment,{children:window._elephizeIsServer?(0,n.jsxs)("div",{className:"RecommendationBlockSkeleton"+(t?"":" RecommendationBlockSkeleton__border"),children:[(0,n.jsx)(r.RecommendationHeaderSkeleton,{blockTitle:e,isMobile:t}),(0,n.jsx)("div",{className:"RecommendationBlockSkeleton__cardsWrap",children:(0,n.jsx)("div",{className:"RecommendationBlockSkeleton__cards",children:o})})]}):(0,n.jsx)(s.Group,{className:"RecommendationBlockSkeleton",separator:"hide",mode:t?"plain":"card",header:(0,n.jsx)(r.RecommendationHeaderSkeleton,{blockTitle:e,isMobile:t}),children:(0,n.jsx)("div",{className:"RecommendationBlockSkeleton__cardsWrap",children:(0,n.jsx)("div",{className:"RecommendationBlockSkeleton__cards",children:o})})})})}},702354:(e,t,o)=>{o.d(t,{RecommendationCardSkeleton:()=>i});var n=o(785893),s=(o(667294),o(351157)),r=o(862700);function i(e){const t=e.buttonType,o=e.photoSize,i=e.hideButtonIcon;return(0,n.jsxs)("div",{className:"RecommendationCardSkeleton",children:[(0,n.jsx)(s.Skeleton,{className:"RecommendationCardSkeleton__background"}),(0,n.jsx)("div",{className:"RecommendationCardSkeleton__image"+("portrait"===o?" RecommendationCardSkeleton__portraitImage":""),children:(0,n.jsx)("div",{className:"RecommendationCardSkeleton__closeButton",children:(0,n.jsx)(r.Icon20DismissDark,{})})}),(0,n.jsxs)("div",{className:"RecommendationCardSkeleton__caption",children:[(0,n.jsx)(s.Skeleton,{height:12,width:164,borderRadius:4,noAnimation:!0,className:"RecommendationCardSkeleton__title"}),(0,n.jsx)(s.Skeleton,{height:8,width:96,borderRadius:2,noAnimation:!0,className:"RecommendationCardSkeleton__subtitle"})]}),"link"===t&&(0,n.jsxs)("div",{className:"RecommendationCardSkeleton__linkButton",children:[!i&&(0,n.jsx)(s.Skeleton,{width:12,circle:!0,noAnimation:!0,className:"RecommendationCardSkeleton__buttonCircleElement"}),(0,n.jsx)(s.Skeleton,{height:8,width:56,borderRadius:2,noAnimation:!0,className:"RecommendationCardSkeleton__linkButtonElement"})]}),t&&"link"!==t&&(0,n.jsx)("div",{className:"RecommendationCardSkeleton__buttonLage",children:(0,n.jsx)(s.Skeleton,{width:"100%",borderRadius:8,noAnimation:!0,className:"RecommendationCardSkeleton__buttonElement"})})]})}},39849:(e,t,o)=>{o.d(t,{RecommendationHeaderSkeleton:()=>a});var n=o(785893),s=(o(667294),o(351157)),r=o(616414),i=o(315954);function a({blockTitle:e,isMobile:t}){const o=t?"":" RecommendationHeaderSkeleton__decreaseMargin",a=`RecommendationHeaderSkeleton${window._elephizeIsServer?o:""}`,d=t?(0,n.jsx)(r.Icon28Dismiss,{}):(0,n.jsx)(i.Icon24Cancel,{}),c=(0,n.jsx)("div",{className:"RecommendationHeaderSkeleton__closeButton",children:window._elephizeIsServer?(0,n.jsx)(s.Skeleton,{circle:!0,width:t?28:24,className:"RecommendationHeaderSkeleton__element"}):d});return(0,n.jsx)("div",{className:a,children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"RecommendationHeaderSkeleton__title",children:e}),c]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"RecommendationHeaderSkeleton__title",children:(0,n.jsx)(s.Skeleton,{height:16,width:180,className:"RecommendationHeaderSkeleton__element"})}),c]})})}},166191:(e,t,o)=>{o.d(t,{RecommendationSkeleton:()=>d});var n=o(785893),s=(o(667294),o(397863)),r=o(702354),i=o(399761);const a=e=>(0,s.times)(e.cardsAmount,(t=>(0,n.jsx)(r.RecommendationCardSkeleton,{buttonType:e.buttonType,photoSize:e.photoSize,hideButtonIcon:e.hideButtonIcon},t)));function d(e){const t=(0,n.jsx)(n.Fragment,{children:a(e)});return(0,n.jsx)(i.RecommendationBlockSkeleton,{isMobile:e.isMobile,blockTitle:e.blockTitle,children:t})}},75002:(e,t,o)=>{o.d(t,{CarouselSkeleton:()=>u});var n=o(785893),s=(o(667294),o(806660)),r=o(397863),i=o(783720),a=o(198003),d=o(351157),c=o(126466);const l=(e,t="m")=>(0,r.times)(e,(e=>(0,n.jsx)(a.CarouselSkeletonCard,{size:t},e)));function u({cardsAmount:e,type:t,blockTitle:o,showIcon:r,isMobile:a,size:u,footerNode:m,moreIconNode:_,needFooter:h,withBorder:f=!0}){let g=null;"full"===t&&(g=(0,n.jsx)(n.Fragment,{children:l(e,u)}));const p=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"CarouselSkeleton__cardsWrap",children:(0,n.jsx)("div",{className:"CarouselSkeleton__cards",children:g})}),h?m||(0,n.jsx)(d.Skeleton,{height:16,className:"CarouselSkeleton__element CarouselSkeleton__element--more"}):(0,n.jsx)("div",{className:"CarouselSkeleton__footerSpacing"})]});return(0,n.jsx)(n.Fragment,{children:window._elephizeIsServer?(0,n.jsxs)("div",{className:(0,c.classNames)("CarouselSkeleton",f&&"CarouselSkeleton--withBorder"),children:[(0,n.jsx)(i.CarouselSkeletonHeader,{blockTitle:o,showIcon:r}),p]}):(0,n.jsx)(s.Group,{separator:"hide",mode:f?"card":"plain",header:(0,n.jsx)(i.CarouselSkeletonHeader,{blockTitle:o,showIcon:r,isMobile:a,moreIconNode:_}),children:p})})}},198003:(e,t,o)=>{o.d(t,{CarouselSkeletonCard:()=>a});var n=o(785893),s=(o(667294),o(351157));const r={s:{width:165,height:212},m:{width:210,height:274},l:{width:225,height:300}},i={s:"CarouselSkeletonCard__sizeS",m:"CarouselSkeletonCard__sizeM",l:"CarouselSkeletonCard__sizeL"};function a({size:e}){const{width:t,height:o}=r[e];return(0,n.jsxs)("div",{className:`CarouselSkeletonCard ${i[e]}`,style:{width:t,height:o},children:[(0,n.jsx)(s.Skeleton,{height:16,width:164,className:"CarouselSkeletonCard__header"}),(0,n.jsx)(s.Skeleton,{height:12,width:96,className:"CarouselSkeletonCard__text"}),(0,n.jsx)(s.Skeleton,{height:32,width:"100%",borderRadius:8,className:"CarouselSkeletonCard__button"})]})}},783720:(e,t,o)=>{o.d(t,{CarouselSkeletonHeader:()=>a});var n=o(785893),s=(o(667294),o(351157)),r=o(264500),i=o(235740);function a({blockTitle:e,showIcon:t,isMobile:o,moreIconNode:a}){return(0,n.jsxs)("div",{className:"CarouselSkeletonHeader",children:[e?(0,n.jsxs)("div",{className:"CarouselSkeletonHeader__title",children:[t&&(0,n.jsx)(r.CarouselSkeletonHeaderIcon,{}),e]}):(0,n.jsx)(s.Skeleton,{height:16,width:212,className:"CarouselSkeleton__element"}),a?(0,n.jsx)("div",{className:"CarouselSkeletonHeader__moreIconNode",children:a}):(0,n.jsx)("div",{className:"CarouselSkeletonHeader__moreIcon",children:(0,n.jsx)(i.CarouselSkeletonMoreIcon,{isMobile:o})})]})}},264500:(e,t,o)=>{o.d(t,{CarouselSkeletonHeaderIcon:()=>a});var n=o(785893),s=(o(667294),o(893535)),r=o(351157);const i=window._elephizeIsServer?null:(0,n.jsx)(s.Icon28UsersCircleFillBlue,{className:"CarouselSkeletonHeaderIcon__svg"});function a(){return(0,n.jsx)(n.Fragment,{children:i||(0,n.jsx)(r.Skeleton,{circle:!0,width:28,className:"CarouselSkeletonHeaderIcon"})})}},235740:(e,t,o)=>{o.d(t,{CarouselSkeletonMoreIcon:()=>a});var n=o(785893),s=(o(667294),o(583117)),r=o(432483),i=o(351157);function a({isMobile:e}){return(0,n.jsx)(n.Fragment,{children:window._elephizeIsServer?(0,n.jsxs)("div",{className:"CarouselSkeletonMoreIcon",children:[(0,n.jsx)(i.Skeleton,{height:4,width:4,noAnimation:!0,className:"CarouselSkeletonMoreIcon__dot"}),(0,n.jsx)(i.Skeleton,{height:4,width:4,noAnimation:!0,className:"CarouselSkeletonMoreIcon__dot"}),(0,n.jsx)(i.Skeleton,{height:4,width:4,noAnimation:!0,className:"CarouselSkeletonMoreIcon__dot"})]}):e?(0,n.jsx)(s.Icon24MoreVertical,{width:24}):(0,n.jsx)(r.Icon24MoreHorizontal,{})})}},727172:(e,t,o)=>{var n;o.d(t,{BasicStatisticsEvents:()=>n,DEFAULT_BLOCK_LS_KEY_NAME:()=>s,MAX_RETRY_COUNT:()=>r}),function(e){e.ViewBlock="view_block",e.ViewTime="view_time",e.HideBlock="hide_block",e.OpenUser="open_user"}(n||(n={}));const s="block_stat",r=3},963339:(e,t,o)=>{o.d(t,{Stats:()=>c});var n=o(288824),s=o(166695),r=o(180937),i=o(618418),a=o(727172);const d=(0,n.makeSharedState)("block-stats",(()=>({blockStatsInstance:null})),{version:0});class c{static getInstance(){let e=d().blockStatsInstance;return e||(e=new c(a.DEFAULT_BLOCK_LS_KEY_NAME),d().blockStatsInstance=e),e}destroyInterval(){clearInterval(this._sendInterval),this.send()}resetInterval(e){(!e&&this.errorCount<this._MAXIMUM_ERROR_COUNT||this.errorCount)&&(this.errorCount=e?0:this.errorCount+1,clearInterval(this._sendInterval),this._sendInterval=setInterval(this.send,this._DELAY_SEND*(this.errorCount+1)))}destroyInstance(){d().blockStatsInstance=null}registerConsumer(e){this.consumerList.includes(e)||this.consumerList.push(e)}unRegisterConsumer(e){this.consumerList=this.consumerList.filter((t=>t!==e)),this.consumerList.length||this.destroyInterval()}pushLs(e,t){const o=r.multiAccountLs.get(t??this._lsKeyName)||[];o.push(e),r.multiAccountLs.set(t??this._lsKeyName,o)}log(e,t){this.pushLs(e,t)}setLs(e,t,o,n){const s=o??this._lsKeyName,i=r.multiAccountLs.get(s)||{};n&&(Object.keys(i).forEach((e=>{Date.now()-i[e]?.date>n&&delete i[e]})),window.setTimeout((()=>{const t=r.multiAccountLs.get(s)||{};delete t[e],Object.keys(t).length?r.multiAccountLs.set(s,t):r.multiAccountLs.remove(s)}),n)),i[e]=t,r.multiAccountLs.set(s,i)}async send(e,t){const o=t??(r.multiAccountLs.get(e??this._lsKeyName)||[]);if(o.length){r.multiAccountLs.remove(e??this._lsKeyName);try{await c.request(JSON.stringify(o)),this.resetInterval(!0)}catch{this.log(o,e??this._lsKeyName),this.resetInterval()}}}static request(e){return(0,s.api)("stats.trackEvents",{events:e})}constructor(e){this._lsKeyName=a.DEFAULT_BLOCK_LS_KEY_NAME,this._DELAY_SEND=15e3,this._MAXIMUM_ERROR_COUNT=15e3,this.errorCount=0,this.consumerList=[],this.send=this.send.bind(this),this.destroyInstance=this.destroyInstance.bind(this),e&&(this._lsKeyName=e),this._sendInterval=setInterval(this.send,this._DELAY_SEND*(this.errorCount+1)),(0,i.pushNavDestroy)((()=>{this.destroyInstance()}))}}},685905:(e,t,o)=>{var n;o.d(t,{STATE_ASYNC:()=>n}),function(e){e.NONE="none",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error"}(n||(n={}))},55839:(e,t,o)=>{o.d(t,{useHandleStatisticEvents:()=>i});var n=o(667294),s=o(925695),r=o(12459);const i=(e,t,o,i,a=[],d=!1)=>{const[c,l]=(0,s.useElementOnScreen)(i,a,d),u=(0,r.useVisibilityChange)(),m=(0,n.useRef)(!1),_=(0,n.useRef)(0),h=(0,n.useRef)(0),f=(0,n.useRef)(o);return(0,n.useEffect)((()=>{if(!m.current&&l){const t=c.current;t?e(t):console.warn("withStatisticMethods: unexpected missing element"),m.current=!0}}),[l,e]),(0,n.useEffect)((()=>{u&&l&&!_.current&&(_.current=performance.now()),u&&l&&f.current===o||!_.current||h.current||(h.current=performance.now()),_.current&&h.current&&(t(c.current,f.current,_.current,h.current),_.current=f.current!==o?performance.now():0,h.current=0,f.current=o),_.current||h.current||f.current===o||(f.current=o)}),[u,l,o,t]),[c]}},765166:(e,t,o)=>{o.d(t,{withStatisticMethods:()=>f});var n=o(785893),s=o(667294),r=o(963339),i=o(727172),a=o(433830),d=o(460199),c=o(977053),l=o(869043),u=o(517257),m=o(55839),_=o(685905);const h={threshold:.35};function f(e,t=e.displayName??e.name){function o(o){const{blockType:f,analyticRef:g,trackCode:p,stateAsync:S,registerComponentName:k,trackEvents:R,handleViewBlock:v,handleViewTime:b,handleHideBlock:E,...w}=o,C=r.Stats.getInstance(),I=(0,s.useMemo)((()=>k??Symbol(t)),[k,t]),x=(0,d.feedItemSelector)((0,a.isMvk)()),y=x,F=x,N=(0,s.useCallback)((e=>{if(v&&v(e),R.view){const t=(0,d.getBlockFeedPosition)(e,{closestFeedItemSelector:y,validElemSelector:F}),o={e:i.BasicStatisticsEvents.ViewBlock,blocks:[[f,t,Date.now(),g,p].join("|")]};C.log(o)}}),[v,f,g,p]),T=(0,s.useCallback)(((e,t,o,n)=>{if(b&&b(),R.viewTime){const s=e?(0,d.getBlockFeedPosition)(e,{closestFeedItemSelector:y,validElemSelector:F}):d.NO_POSITION,r={e:i.BasicStatisticsEvents.ViewTime,type:f??u.FriendsRecommendationsBlockTypes.OTHER,position:s,time:Date.now()??0,duration:n-o,track_code:p,width:e?.offsetWidth??0,height:e?.offsetHeight??0,ref:g,start_time:o,end_time:n,state_async:t,duration_async:t!==_.STATE_ASYNC.LOADED?n-o:0};C.log(r)}}),[b,f,g,p]),A=(0,s.useCallback)((()=>{if(E&&E(p),R.hideAPI&&(0,c.partConfigEnabled)("feed_user_rec_news_feed_ignore_item_in_statistic_hoc")&&(0,l.newsfeedIgnoreItem)({type:f,ref:g,item_id:window.vk.id,owner_id:window.vk.id,track_code:p}),R.hide){const e={e:i.BasicStatisticsEvents.HideBlock,blocks:[[Date.now(),g,p].join("|")]};C.log(e)}}),[E,f,g,p]),[M]=(0,m.useHandleStatisticEvents)(N,T,S,h,[f,g,p]),B=!!f,L=!!g,O=!!p;return(0,s.useEffect)((()=>(B&&L&&O&&C.registerConsumer(I),()=>{B&&L&&O&&C.unRegisterConsumer(I)})),[B,L,O,I]),(0,n.jsx)("div",{ref:M,children:(0,n.jsx)(e,{...w,registerComponentName:I,handleViewBlock:N,handleViewTime:T,handleHideBlock:A,blockType:f,analyticRef:g,trackCode:p,stateAsync:S})})}return o.displayName=`withStatisticMethods(${e.displayName??e.name})`,o}},921175:(e,t,o)=>{var n;o.d(t,{FRIENDS_RECOM_VISITED:()=>s,TIME_TO_SAVE_FRIENDS_VISITED:()=>r,UsersRecomStatisticEvents:()=>n}),function(e){e.ShowUserRec="show_user_rec"}(n||(n={}));const s="friends_recomm_visited",r=36e5},691620:(e,t,o)=>{o.d(t,{withUsersRecomStatisticMethods:()=>l});var n=o(785893),s=o(667294),r=o(963339),i=o(921175),a=o(727172),d=o(324153),c=o(322695);function l(e,t){return o=>{const{blockType:l,analyticRef:u,registerComponentName:m,trackUsersRecomEvents:_,handleShowCard:h,handleOpenCard:f,handleAddToFriendsDone:g}=o,p=r.Stats.getInstance(),S=(0,s.useMemo)((()=>m??Symbol(t??e.displayName)),[m,t,e.displayName]),{showCard:k=!0,openCard:R=!0,addToFriendsDone:v}=_||{},b=(0,s.useCallback)(((e,t,o)=>{if(h&&h(e,t,o),k){const n={e:i.UsersRecomStatisticEvents.ShowUserRec,user_ids:[[e,Date.now(),o,u,l,t].join("|")]};p.log(n)}}),[h,u,l]),E=(0,s.useCallback)(((e,t)=>{if(f&&f(e,t),R){const o={ref:u,trackCode:t,date:Date.now()},n={e:a.BasicStatisticsEvents.OpenUser,user_ids:[[e,Date.now(),u,t].join("|")]};p.setLs(e,o,i.FRIENDS_RECOM_VISITED,i.TIME_TO_SAVE_FRIENDS_VISITED),p.log(n)}}),[f,u]),w=(0,s.useCallback)((e=>{g&&g(e),v&&e&&c.searchStatsCollector.logEvent({type:d.EventItemType.USER,track_code:e,action:d.SearchClickActionMap.ADD_FRIEND_POSSIBLE_OUT})}),[g]);return(0,s.useEffect)((()=>(l&&u&&p.registerConsumer(S),t&&!e.displayName&&(e.displayName=t),()=>{l&&u&&p.unRegisterConsumer(S)})),[l,u,S]),(0,n.jsx)(e,{...o,registerComponentName:S,handleShowCard:b,handleOpenCard:E,handleAddToFriendsDone:w})}}},518985:(e,t,o)=>{o.d(t,{connectServiceProvider:()=>s});var n=o(785893);const s=(e,t)=>({serviceInstance:o,initiatorParams:s,...r})=>(0,n.jsx)(t,{serviceInstance:o,initiatorParams:s,children:(0,n.jsx)(e,{...r})})},366197:(e,t,o)=>{o.d(t,{getServiceProvider:()=>i});var n=o(785893),s=o(667294),r=o(798116);const i=(e,t,o)=>{const i=(0,s.createContext)(null);return{useServiceInstance:()=>{const e=(0,s.useContext)(i);if(!e)throw new Error('There are not services found! Use "useServiceInstance" inside component wrapped into serviceViewer HOC!'+(o?` Happened into ${o}`:""));return e},ServiceProvider:({serviceInstance:o,initiatorParams:a,children:d})=>{const[c,l]=(0,s.useState)((()=>{if(!o){const o=e(...a||t||[]);if(!o.onDestroy){const e=(0,r.createNode)();return{...(0,r.withRegion)(e,(()=>o)),onDestroy:()=>(0,r.clearNode)(e)}}return o}return o}));return(0,s.useEffect)((()=>(l(c),()=>{c.onDestroy&&c.onDestroy()})),[c]),(0,n.jsx)(i.Provider,{value:c,children:d})}}}},278673:(e,t,o)=>{o.d(t,{connectServiceProvider:()=>s.connectServiceProvider,getServiceProvider:()=>n.getServiceProvider});var n=o(366197),s=o(518985)},460199:(e,t,o)=>{o.d(t,{NO_POSITION:()=>s,feedItemSelector:()=>i,getBlockFeedPosition:()=>r});var n=o(641309);const s=-1,r=(e,{closestFeedItemSelector:t,validElemSelector:o}={validElemSelector:!1})=>{const n=t?(r=t,e.closest(r)):e;var r;const i=n?.parentNode;if(!n||!i)return s;const a=i.children;let d=0;for(let e=0;e<a.length;e++){const t=a[e];if("string"==typeof o&&!t.matches(o)&&(d+=1),t===n)return e-d}return s};function i(e){return e?n.MVK_WALL_ITEM_SELECTOR:n.WEB_FEED_ITEM_SELECTOR}},916348:(e,t,o)=>{o.d(t,{getCropRectObject:()=>r,getUserPhoto:()=>d,getUserPhotoPosition:()=>c,needCrop:()=>a});var n=o(902947);function s(e){return{x:e?.x&&e.x>=0&&e.x<100?e.x:0,y:e?.y&&e.y>=0&&e.y<100?e.y:0,x2:e?.x2&&e.x2>0&&e.x2<=100?e.x2:100,y2:e?.y2&&e.y2>0&&e.y2<=100?e.y2:100}}function r(e){const t=s(e.crop_photo?.rect),o=s(e.crop_photo?.crop);return{x:t.x+(t.x2-t.x)*o.x/100,x2:t.x+(t.x2-t.x)*o.x2/100,y:t.y+(t.y2-t.y)*o.y/100,y2:t.y+(t.y2-t.y)*o.y2/100}}function i(e,t,o,s){if(!t.length)return;const r=(e.x2-e.x)/100,i=(e.y2-e.y)/100,a=(0,n.isRetina)()?2:1;let d=t?.reduce(((e,t)=>e?.width>t.width?e:t));return d=d?t?.reduce(((e,t)=>!e||t.width*r>=o*a&&t.height*i>=s*a&&(t.width<e?.width||!e?.width)?t:e),d):d,d}function a(e,t){const o=r(e);return function(e){return 100-e.x2+e.x}(o)>t||function(e){return 100-e.y2+e.y}(o)>t}function d(e,t,o,n){return new Promise((s=>{const r=function(e,t,o,n){return i(e,t,o,n)?.url||""}(e,t.crop_photo?.photo.sizes||[],o,n);if(!r)return void s(t.photo_400||t.photo_200||t.photo_100||"");const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{const t=document.createElement("CANVAS"),o=t.getContext("2d"),n=a.width*e.x/100,r=a.height*e.y/100,i=a.width*e.x2/100-n,d=a.height*e.y2/100-r;t.height=d,t.width=i,o?.drawImage(a,n,r,i,d,0,0,i,d);const c=t.toDataURL();s(c)},a.src=r}))}function c(e,t,o,n){const s=i(e,t.crop_photo?.photo.sizes||[],o,n);if(!s||!s.width||!s.height)return;const r=s.width*(e.x2-e.x)/100,a=s.height*(e.y2-e.y)/100,d=r/o,c=a/n,l=d<c?d:c,u=s.width/l,m=s.height/l;let _=u*e.x/100,h=m*e.y/100;_+=(r/l-o)/2,h+=(a/l-n)/2;const f={positionX:_,positionY:h,sizeWidth:u,sizeHeight:m};return{url:s.url||"",userPhotoPosition:f}}},456918:(e,t,o)=>{o.d(t,{fetchDataOnAvatarEdit:()=>b,fetchDataOnCoverUpdate:()=>v,fetchDataOnWebProfileItemStat:()=>E,getOwnerCoverPhotoUploadServer:()=>p,removeFromFollowers:()=>g,removeFromFriends:()=>f,removeOwnerCoverPhoto:()=>k,saveOwnerCoverPhoto:()=>R,sendHideOnboardingCards:()=>S,showValidationError:()=>w});var n=o(166695),s=o(893682),r=o(585688),i=o(66452),a=o(762003),d=o(306529),c=o(960864),l=o(159663),u=o(471828),m=o(938346),_=o(322695),h=o(324153);function f(e){const t=e.id,o={user_id:t},s=(0,i.friendsRecommLogCheckVisited)(t);return s&&(o.ref=(0,r.getRef)(),s.trackCode&&(o.track_code=s.trackCode),(0,i.friendsRecommLogCleanVisited)(t)),(0,n.api)("friends.delete",o).then((e=>((0,a.tryLogOutOfSerpClick)(a.outOfSerpProfile,t,a.clickTypeRemoveFriendOut),_.searchStatsCollector.logOutOfSerpEvent({action:h.SearchClickActionMap.REMOVE_FRIEND_OUT,type:h.EventItemType.USER}),e)))}function g({id:e}){const t={subscriber_id:e};return(0,n.api)("friends.deleteSubscriber",t)}function p(e){return(0,n.api)("photos.getOwnerCoverPhotoUploadServer",e)}function S(){return(0,n.api)("onboarding.hideCardsBlock",{})}function k(){return(0,n.api)("photos.removeOwnerCoverPhoto",{})}function R(e){return(0,n.api)("photos.saveOwnerCoverPhoto",e)}function v(e){return(0,c.execute)({"users.get":{user_ids:String(e),fields:"cover,photo_avg_color"}}).then((e=>{if(!e["users.get"]){const e=new Error("something wrong with owner loading");throw(0,m.logProfileError)({error:e}),e}return{owner:e["users.get"][0]}}))}function b(e){return(0,c.execute)({"users.get":{user_ids:e.toString(),fields:"has_photo,image_status,photo_max,photo_medium_rec,photo_rec,photo_200,photo_400,photo_avg_color,photo_id,photo_max_size,is_nft"},"photos.get":{owner_id:e,album_id:"profile",rev:1,count:1},"photos.getAll":{owner_id:e,photo_sizes:1,extended:1,skip_hidden:1},"stories.get":{owner_id:e}}).then((e=>{const t={};return e["users.get"]&&(t.owner=e["users.get"][0]),e["photos.get"]&&(t.avatar=e["photos.get"].items[0]),e["stories.get"]&&(t.stories=e["stories.get"]),e["photos.getAll"]&&(t.photos={response:e["photos.getAll"],status:d.LoadingStatus.loaded}),t}))}function E(e){return(0,n.api)("users.get",{user_ids:e.toString(),fields:"id,cover,verified,image_status,has_photo,status,friend_status,profile_buttons,third_party_buttons"}).then((([e])=>e)).catch((e=>{(0,m.logProfileError)({error:e,additionalText:"something wrong with getting owner for stat"})}))}function w(e){(0,l.showFastBox)(u.getLang("friends_add_phone_validation_error_title"),(0,u.langSex)(e.sex||s.BaseSexEnumNames.UNKNOWN,u.getLang("friends_add_phone_validation_error","raw")).replace("{name}",e.first_name_dat||""),u.getLang("friends_add_phone_validation_error_action"),(()=>window.nav.go("/settings?validate=1")),u.getLang("global_cancel"))}},997650:(e,t,o)=>{o.d(t,{observe:()=>c,useInView:()=>l});var n=o(667294);const s=new Map,r=new WeakMap;let i,a=0;function d(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(o=e.root,o?(r.has(o)||(a+=1,r.set(o,a.toString())),r.get(o)):"0"):e[t]}`;var o})).toString()}function c(e,t,o={},n=i){if(void 0===window.IntersectionObserver&&void 0!==n){const s=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof o.threshold?o.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}const{id:r,observer:a,elements:c}=function(e){let t=d(e),o=s.get(t);if(!o){const n=new Map;let r;const i=new IntersectionObserver((t=>{t.forEach((t=>{var o;const s=t.isIntersecting&&r.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=s),null==(o=n.get(t.target))||o.forEach((e=>{e(s,t)}))}))}),e);r=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),o={id:t,observer:i,elements:n},s.set(t,o)}return o}(o);let l=c.get(e)||[];return c.has(e)||c.set(e,l),l.push(t),a.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(c.delete(e),a.unobserve(e)),0===c.size&&(a.disconnect(),s.delete(r))}}n.Component;function l({threshold:e,delay:t,trackVisibility:o,rootMargin:s,root:r,triggerOnce:i,skip:a,initialInView:d,fallbackInView:l,onChange:u}={}){var m;const[_,h]=n.useState(null),f=n.useRef(),[g,p]=n.useState({inView:!!d,entry:void 0});f.current=u,n.useEffect((()=>{if(a||!_)return;let n;return n=c(_,((e,t)=>{p({inView:e,entry:t}),f.current&&f.current(e,t),t.isIntersecting&&i&&n&&(n(),n=void 0)}),{root:r,rootMargin:s,threshold:e,trackVisibility:o,delay:t},l),()=>{n&&n()}}),[Array.isArray(e)?e.toString():e,_,r,s,i,a,o,l,t]);const S=null==(m=g.entry)?void 0:m.target,k=n.useRef();_||!S||i||a||k.current===S||(k.current=S,p({inView:!!d,entry:void 0}));const R=[h,g.inView,g.entry];return R.ref=R[0],R.inView=R[1],R.entry=R[2],R}}}]);try{stManager.done("dist/web/chunks/c55d7a58.d034ab14.js")}catch(e){}