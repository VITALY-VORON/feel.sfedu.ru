(()=>{"use strict";var e,t,n,o={97391:(e,t,n)=>{n.d(t,{connectTrackTmrGroupsJoin:()=>c,groupsJoinAction:()=>l,trackTmrGroupsJoin:()=>a});var o=n(963526),r=n(166695),s=n(798116),i=n(977053);const a=()=>{(0,i.partConfigEnabled)("group_join_track_event_count")&&(0,o.tmrSendTimespentEvent)(o.MY_TRACKER_COUNT_EVENT_IDS.COMMUNITY_SUBSCRIBE)},u=(0,s.createEffect)({name:"fx/track_group_join",handler:a}),c=e=>(0,s.sample)({clock:e.done,target:u}),l=(e,t,n)=>(0,r.api)("groups.join",e,t,n).then((e=>(a(),e)))},34467:(e,t,n)=>{n.d(t,{connectTrackTmrGroupsJoin:()=>o.connectTrackTmrGroupsJoin,groupsJoinAction:()=>o.groupsJoinAction,trackTmrGroupsJoin:()=>o.trackTmrGroupsJoin});var o=n(97391)},414599:(e,t,n)=>{n.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>o,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>l,REACTION_ID_DEFAULT:()=>s,REACTION_ID_MAX:()=>i,REACTION_ID_MIN:()=>a,REACTION_ID_UNSET:()=>u,REACTION_SET_ITEMS_MIN_COUNT:()=>c,SHOW_TOOLTIP_TIMEOUT:()=>r});const o=600,r=140,s=0,i=7,a=0,u=void 0,c=2,l=s},144812:(e,t,n)=>{n.d(t,{reactionCountsBrandUnwrap:()=>r,reactionCountsBrandWrap:()=>s});var o=n(982350);const r=e=>(0,o.unwrap)(e),s=e=>(0,o.wrap)(e)},654200:(e,t,n)=>{n.d(t,{areCountersEqual:()=>T,calcCounters:()=>S,calcCountersSum:()=>y,calcCountersWeightedSum:()=>E,counterForReactionId:()=>w,getDefaultReaction:()=>c,getDefaultReactionTitle:()=>l,getReaction:()=>u,hasReactionsForCounts:()=>O,isReactionIdSet:()=>_,isReactionIdUnset:()=>b,isUnknownObject:()=>a,isValidReactionId:()=>g,parseReactionId:()=>v,parseReactionIdOrUnset:()=>m,parseReactionMenuConfig:()=>I,prepareReactionMenuSet:()=>p,validateReactionSetPayloaditems:()=>f});var o=n(414599),r=n(144812),s=n(659397);const i=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e),a=e=>null!==e&&"object"==typeof e,u=(e,t)=>e.itemsById[t],c=e=>u(e,o.REACTION_ID_DEFAULT),l=e=>c(e)?.title,d=(e,t)=>0===e.length?"":((e,t,n=!0)=>e.reduce(((e,o)=>{const r=t(o),s=t(e);return s===r?n?e:o:s<r?e:o})))(e,(e=>(t.width-e.width)**2+(t.height-e.height)**2),!1).url,p=(e,t,n)=>{const o=t.map((({asset:e,color_sets:t,id:o,score:r,title:s})=>({animationURL:e.animation_url||void 0,backgroundColor:t?.background,id:o,imageMenuURL:d(e.images,n.imageMenuSize),imagePreviewURL:"imagePreviewSize"in n?d(e.images,n.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in n?d(e.images,n.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in n?d(e.images,n.imageStoryPreviewSize):void 0,score:r,title:s,titleColor:t?.foreground}))),r={};return o.forEach((e=>{r[e.id]=e})),{id:e,items:o,itemsById:r}},_=e=>e!==o.REACTION_ID_UNSET,b=e=>e===o.REACTION_ID_UNSET,g=e=>i(e)&&e>=o.REACTION_ID_MIN&&e<=o.REACTION_ID_MAX,v=e=>{const t=parseInt(e,10);return g(t)?{isValid:!0,value:t}:{isValid:!1}},m=e=>{const t=v(e);return t.isValid?t.value:o.REACTION_ID_UNSET},f=(e,t)=>{if(e.length<o.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error(`Invalid reactions items count in set '${t}': ${e.length}`)}},I=e=>{if(!a(e))return;const t={},{animationShowStaticAfterEnd:n,menuShowDelay:r,openedDefaultReactionId:s,reportJsErrors:i}=e;return"number"!=typeof r&&void 0!==r||(t.menuShowDelay=r),"boolean"==typeof n&&(t.animationShowStaticAfterEnd=n),"boolean"==typeof i&&(t.reportJsErrors=i),"number"==typeof s||null===s?null===s?t.openedDefaultReactionId=void 0:g(s)&&(t.openedDefaultReactionId=s):t.openedDefaultReactionId=o.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t},S=(e,t)=>{const n=(0,r.reactionCountsBrandWrap)({});return Object.entries((0,r.reactionCountsBrandUnwrap)(e)).forEach((([e,o])=>{const r=e,s=t?.itemsById?.[r]?.score??1;n[r]=s*(o||0)})),n},y=e=>Object.values((0,r.reactionCountsBrandUnwrap)(e)).reduce(((e,t)=>e+(t||0)),0),E=e=>y((0,r.reactionCountsBrandWrap)(e)),O=e=>y(e)>0,w=(e,t)=>e[t]??void 0,T=(e,t)=>e&&t?(0,s.isEqual)(e,t):e===t},982350:(e,t,n)=>{n.d(t,{unwrap:()=>o,wrap:()=>r});const o=e=>e,r=e=>e},5072:(e,t,n)=>{n.d(t,{PostSubscribeSuggest:()=>v});var o=n(785893),r=n(667294),s=n(659397),i=n(780891),a=n(493829),u=n(441430),c=n(471828),l=n(53768),d=n(393355),p=n(534691),_=n(751602),b=n(654200),g=n(214009);const v=({groupId:e,avatarUrl:t,objectId:n,isLast:v,ajaxService:m})=>{const[f,I]=(0,r.useState)(!1),[S,y]=(0,r.useState)(!1),[E,O]=(0,r.useState)(!1),w=(0,r.useRef)(null);(0,r.useEffect)((()=>{v&&(()=>{const e=(0,p.getPostElem)(n);e&&(w.current=e.querySelector(".PostActivityBar"))})()}),[]),(0,r.useEffect)((()=>{w.current&&w.current.classList.toggle("PostActivityBar--isLast")}),[f]);return(0,l.useReactionsGlobalUpdateEventsForObject)((0,_.likePostObjectId)(n),(({reactionIdState:e,suggestSubscribe:t})=>{(0,b.isReactionIdSet)(e.reactionId)&&t&&I(!0)})),(0,d.useSubscribeGlobalUpdateEventsForObject)(e,(({isSubscribed:e})=>{y(e)})),f?(0,o.jsx)(i.AppRootProvider,{children:(0,o.jsxs)("div",{className:(0,s.classNames)("PostSubscribeSuggest",{PostSubscribeSuggest__isLast:v}),children:[(0,o.jsx)(a.Avatar,{size:24,src:t}),(0,o.jsx)("span",{className:"PostSubscribeSuggest__message",children:c.getLang("groups_post_subscribe_suggest_message")}),(0,o.jsx)(u.Button,{onClick:S?async()=>{O(!0);try{await m.groupsLeave({group_id:e}),(0,g.emitEvent)(g.WallDataEvents.post_subscribe_update,{groupId:e,isSubscribed:!1})}catch(e){console.log(e)}finally{O(!1)}}:async()=>{O(!0);try{await m.groupsJoin({group_id:e}),(0,g.emitEvent)(g.WallDataEvents.post_subscribe_update,{groupId:e,isSubscribed:!0})}catch(e){console.log(e)}finally{O(!1)}},size:"s",appearance:"accent",mode:S?"secondary":"primary",className:"PostSubscribeSuggest__button",loading:E,children:S?c.getLang("groups_post_subscribe_suggest_btn_unsubscribe"):c.getLang("groups_post_subscribe_suggest_btn_subscribe")})]})}):null}},852847:(e,t,n)=>{n.d(t,{AjaxServiceInstance:()=>r});var o=n(703510);const r={groupsJoin:o.Groups.join,groupsLeave:o.Groups.leave}},703510:(e,t,n)=>{n.d(t,{Groups:()=>i});var o=n(304939),r=n(166695),s=n(34467);const i={join:async e=>(0,s.groupsJoinAction)({...e},{version:o.API_VERSION}),leave:async e=>(0,r.api)("groups.leave",{...e},{version:o.API_VERSION}),toggle:async({apiParams:e,isMember:t})=>t?i.leave(e):i.join(e),getById:async({group_ids:e,fields:t})=>{if(!e)return null;let n;try{n=await(0,r.api)("groups.getById",{group_ids:e,fields:t},{version:o.API_VERSION})}catch(e){console.error(e)}return n?.groups?.[0]??null},edit:async e=>(0,r.api)("groups.edit",{...e},{version:o.API_VERSION}),getMembers:async e=>(0,r.api)("groups.getMembers",{...e},{version:o.API_VERSION})}},244138:(e,t,n)=>{var o=n(785893),r=n(802130),s=n(973935),i=n(5072),a=n(852847),u=n(234173),c=n(618418);window.vk?.pe?.static_manager_dynamic_imports&&window.vk?.stDomain&&(n.p=window.vk.stDomain+"/dist/");const l={init(e,t){s.render((0,o.jsx)(i.PostSubscribeSuggest,{...t,ajaxService:a.AjaxServiceInstance}),e),e&&(0,c.pushNavDestroy)((()=>s.unmountComponentAtNode(e)))}};try{window.stManager.done(window.jsc("web/ecomm_feed_post_subscribe_suggest.js")),(0,u.tq)().setStartupHandler("EcommFeedPostSubscribeSuggest/init",(({payload:e})=>{const{target:t,data:n}=e;l.init(t,n)}))}catch(e){}requestIdleCallback((()=>{try{(0,r.statlogsValueEvent)("entries_requests",1,"ecomm_feed_post_subscribe_suggest","web")}catch{}}),{timeout:5e3})},751602:(e,t,n)=>{function o(e){const t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;const[,n,o]=t;return{objectType:n,objectId:o}}n.d(t,{getElementLikeButtonCount:()=>a,getElementLikeButtonIcon:()=>u,getElementLikeButtonLabel:()=>c,isObjectTypeIsVideo:()=>i,likePostObjectId:()=>r,likeReplyObjectId:()=>s,parseLikeObjectId:()=>o});const r=e=>`wall${e}`,s=e=>`wall_reply${e}`,i=e=>["video","video_comment"].includes(e),a=e=>e?.querySelector(".like_button_count, ._like_button_count")??void 0,u=e=>e?.querySelector(".like_button_icon, ._like_button_icon")??void 0,c=e=>e.querySelector(".like_button_label, ._like_button_label")??void 0},815483:(e,t,n)=>{n.d(t,{ReactionMenuTitleVariants:()=>s,TITLE_VARIANT_DEFAULT:()=>r,TitleVariantWithLikedUsers:()=>o});const o="WithLikedUsers",r=o,s=[o,"TitleOnly"]},53768:(e,t,n)=>{n.d(t,{useReactionsGlobalStateForObject:()=>u,useReactionsGlobalUpdateEventsForObject:()=>c});var o=n(667294),r=n(654200),s=n(214009),i=n(751602),a=n(27553);function u(e,{payloadIsSuitable:t}={}){const[n,s]=(0,o.useState)(void 0),i=(0,a.usePreviousRef)(n);return c(e,(0,o.useCallback)((function(e){t&&!t(e)||e.counts&&!(0,r.areCountersEqual)(e.counts,i.current??void 0)&&s(e.counts)}),[e])),{counts:n}}function c(e,t){!function({onAnyPostCountsAnyUpdate:e}){(0,o.useEffect)((()=>(0,s.registerNonGlobalNonUniqueListener)(s.WallDataEvents.post_reactions_counts_update,e)),[e])}({onAnyPostCountsAnyUpdate:(0,o.useCallback)((function(n){(0,i.likePostObjectId)(n.postFullId)===e&&t(n)}),[e])})}},849367:(e,t,n)=>{n.d(t,{ButtonStyleVariant:()=>o});const o={Post:"post",Reply:"reply"}},27553:(e,t,n)=>{n.d(t,{isValidButtonStyleVariant:()=>p,isValidButtonTitleVariant:()=>d,isValidEnvironment:()=>i,preloadImage:()=>a,usePrevious:()=>u,usePreviousRef:()=>c});var o=n(667294),r=n(815483),s=n(849367);const i=()=>"function"==typeof window.cur?.viewAsBox?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(window.Widgets?.oauth?.(),!1),a=e=>new Promise(((t,n)=>{const o=new Image;o.src=e,o.onload=()=>t(),o.onerror=()=>n()})),u=e=>{const t=(0,o.useRef)(e);return(0,o.useEffect)((()=>{t.current=e})),t.current},c=e=>{const t=(0,o.useRef)(e);return(0,o.useEffect)((()=>{t.current=e})),t},l=Object.values(s.ButtonStyleVariant),d=e=>r.ReactionMenuTitleVariants.includes(e),p=e=>l.includes(e)},214009:(e,t,n)=>{n.d(t,{WallDataEvents:()=>s,emitEvent:()=>l,registerNonGlobalNonUniqueListener:()=>c,registerUniqueListener:()=>u});var o=n(288824),r=n(195763);const s={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},i=(0,o.makeSharedState)("wall-data",(()=>({emitter:new r.default,keyedListeners:Object.create(null)})),{version:0}),a=(e,t,n)=>{const o=i(),r=o.keyedListeners?.[e]?.[t];return r&&o.emitter.removeListener(e,r),((e,t,n)=>{const o=i();return o.emitter.addListener(e,n),o.keyedListeners[e]={...o.keyedListeners[e],[t]:n},()=>{o.emitter.removeListener(e,n);const r=o.keyedListeners[e]?.[t];r===n&&delete o.keyedListeners[e]?.[t]}})(e,t,n)},u=(e,t,n)=>a(t,e,n),c=(e,t)=>((e,t)=>{const n=i();return n.emitter.addListener(e,t),()=>{n.emitter.removeListener(e,t)}})(e,t),l=(e,t)=>{i().emitter.emit(e,t)}},393355:(e,t,n)=>{n.d(t,{useSubscribeGlobalUpdateEventsForObject:()=>s});var o=n(667294),r=n(214009);const s=(e,t)=>{const n=(0,o.useCallback)((function(n){n.groupId===e&&t(n)}),[e]);(0,o.useEffect)((()=>(0,r.registerNonGlobalNonUniqueListener)(r.WallDataEvents.post_subscribe_update,n)),[n])}}},r={};function s(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return o[e].call(n.exports,n,n.exports,s),n.exports}s.m=o,e=[],s.O=(t,n,o,r)=>{if(!n){var i=1/0;for(l=0;l<e.length;l++){for(var[n,o,r]=e[l],a=!0,u=0;u<n.length;u++)(!1&r||i>=r)&&Object.keys(s.O).every((e=>s.O[e](n[u])))?n.splice(u--,1):(a=!1,r<i&&(i=r));if(a){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,o,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var r=Object.create(null);s.r(r);var i={};t=t||[null,n({}),n([]),n(n)];for(var a=2&o&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,s.d(r,i),r},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.e=()=>Promise.resolve(),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/dist/",(()=>{var e={67147:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[i,a,u]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(u)var l=u(s)}for(t&&t(n);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(l)},n=self.webpackChunkvkweb=self.webpackChunkvkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=s.O(void 0,[213,83737,2067,20795,57451,95167],(()=>s(244138)));i=s.O(i)})();