"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[99812],{37946:(_,e,t)=>{t.d(e,{default:()=>s});const s={icon:"IllegalConfirmModal-module__icon--tp606",text:"IllegalConfirmModal-module__text--TQQTm",actions:"IllegalConfirmModal-module__actions--_yQkX"}},705755:(_,e,t)=>{t.d(e,{cutTextToHighlight:()=>i});const s="highlight",o="cutTextToHighlight",r=15;function i(_){let e=null;document.querySelectorAll(`${_}:not(.${o})`).forEach((_=>{if(_.classList.add(o),null===e){const t=getComputedStyle(_).font;e=function(_){const e=document.createElement("canvas").getContext("2d");function t(_){const t=e.measureText(_).width;return Math.ceil(t)}return e.font=_,t}(t)}_.innerHTML=function(_,e,t="…"){const o=_.querySelector("."+s);if(!o)return _.innerHTML;let i=_.innerHTML.indexOf('<em class="'+s+'">');if(o.offsetLeft+o.offsetWidth<=_.offsetWidth-r)return _.innerHTML;if(o.offsetWidth<_.offsetWidth-r){let s=0,a="",c=i;for(;c>0&&s+o.offsetWidth<=_.offsetWidth;){let i=_.innerHTML.lastIndexOf(" ",c-1);if(-1===i&&(i=0),a=_.innerHTML.substring(i,c)+a,s=e(t+a.trim()),!(s+o.offsetWidth<=_.offsetWidth-r))break;c=i}i=c}if(i>0)return t+_.innerHTML.substring(i).trim();return _.innerHTML}(_,e)}))}},869143:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{iSearch:()=>iSearch,searcher:()=>searcher});var _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(636322),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15042),_web_lib_market__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(349776),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(330),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(802130),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(30655),_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(97875),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(255693),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(93367),_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(762003),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(379440),_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(70689),_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(488844),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(159663),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(471828),_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(902947),_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(705755),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(656334),_shared_communities_actions__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(34467),_web_ecomm_market_MarketSearchBanner_utils_hideFeaturing__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(781779),_web_search_init__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(804614),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(977053),_shared_ranges__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(184132),_web_search_components_IllegalConfirmModal__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(330046),_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(723970),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(226059),_vkontakte_internal_vkjs_lib_API__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(166695),_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(954314),_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(514232),_shared_friends_friends_stats__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(379696),_search_utils__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(207563),_shared_friends_constants__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(932247);const sectionAuto="auto",sectionAudio="audio",sectionVideo="video",sectionClips="clips",sectionStatuses="statuses",sectionPeople="people",sectionCommunities="communities",sectionMiniApps="mini_apps",sectionQuick="quick",moduleEmpty=void 0,moduleFriends="friends",moduleGroupsCatalog="groups_catalog",moduleGroupsRecommendations="groups_recommendations",paramQuery="c[q]",paramSection="c[section]",paramCategory="c[category]",paramSort="c[sort]",paramPhoto="c[photo]",paramInvite="c[invite]",paramSkipCatalog="c[skip_catalog]",paramGroupsRecommendationsModel="c[need_groups_recommendations_model]",paramFrom="c[from]",paramBlockPosition="c[block_position]",paramSectionPage="c[section_page]",hasIsIllegalContent=()=>document.querySelector("#results").classList.contains("search_results_illegal"),confirmIllegalContent=()=>{const _=document.querySelector("#results"),e=document.querySelector(".search_query_wrap");_&&_.classList.remove("search_results_illegal"),e&&e.classList.remove("search_query_illegal")},showIllegalPlaceHolder=()=>{const _=document.querySelector("#results");_.innerHTML=`<div id="no_results" class="no_rows">${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("search_inappropriate_query")}</div>`,_.classList.remove("search_results_illegal")},showConfirmIllegalContent=_=>{(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("search_groups_confirm_disable_safe_search_web2")&&hasIsIllegalContent()&&(document.querySelector(".search_query_wrap").classList.add("search_query_illegal"),(0,_web_search_components_IllegalConfirmModal__WEBPACK_IMPORTED_MODULE_22__.showIllegalConfirmModal)({onDisable:()=>{confirmIllegalContent()},callbackClose:()=>{showIllegalPlaceHolder()},isNotSafe:_}))},searcher={initSearchStatusFilters:_web_search_init__WEBPACK_IMPORTED_MODULE_19__.initSearchStatusFilters,init(_){const e=globalHistory.length;e&&globalHistory[e-1]&&globalHistory[e-1].loc.indexOf("search")?cur.search_return_to=globalHistory[e-1].loc:cur.search_return_to="/",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("header");const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query");if(!(t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.data)(t,"opts")||{}).isNew){const e=window.iSearch;e.destroy(),vk.id&&e.init(t,_)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)(t),"search"===nav.objLoc[0]&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(cur,{oid:_.user_id,module:"search"}),cur.nav.push(((_,e,t)=>{if(void 0!==_[0]||cur.searchLoc&&void 0!==_.act)return clearTimeout(cur.setLocTO),void(nav.strLoc!==cur.loc&&cur.loc&&hab.setLoc(cur.loc));if(cur.searchLoc){let _=!1;for(const e in t)if("c["===e.substr(0,2)){_=!0;break}if(cur.onLocationChange&&cur.onLocationChange(_),!_)return!0}const s=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.clone)(t);delete s[0];const o=s[paramSection]||s.section||sectionQuick;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_menu")&&uiRightMenu&&uiRightMenu.switchMenu((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)(`search_menu_${o}`,"search_menu")),searcher.setSection(o),searcher.sendSearchReq(s,!0),!1}))),cur.options||(cur.options={reply_names:{}}),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(cur.options,_),searcher.applyOptions(_),t.ignoreFixed=cur.section==sectionStatuses,window.scrollTop=document.body.scrollTop=pageNode.scrollTop=htmlNode.scrollTop=0,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(window,"resize",searcher.onResize),setTimeout(searcher.scrollCheck,50),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_3__.checkPageBlocks,200);const s=window.audioPlayer;s&&s.showCurrentTrack&&s.showCurrentTrack(),cur._back={text:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("search_back_to"),show:[()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("header");const e=globalHistory.length;e&&globalHistory[e-1]&&globalHistory[e-1].loc.indexOf("search")&&(cur.search_return_to=globalHistory[e-1].loc),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(window,"resize",searcher.onResize);const t=window.iSearch;t.destroy(),vk.id&&t.init((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query"),_)}],hide:[()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(window,"resize",searcher.onResize),window.iSearch.destroy()}]},cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_30__.cutTextToHighlight)(".labeled__searchServicesDesc"),this.logSearch(cur.params,_),showConfirmIllegalContent(1===cur.params["c[not_safe]"]),"auto"!==cur?.params?.section&&"auto"!==cur?.params?.["c[section]"]||((0,_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_27__.searchProfilingService)().setProfilingMarkEnd({component:_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_27__.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION,service:"search_all",isAnonymous:!1}),(0,_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_27__.searchProfilingService)().removeProfilingMark(_web_search_stats_searchProfilingService__WEBPACK_IMPORTED_MODULE_27__.PROFILING_COMPONENTS.SEARCH_TOP_TO_SEARCH_ALL_TRANSITION))},sendSearchReq(_,e,t){if(cur.searchReq)try{cur.searchReq.abort()}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__.debugLog)(_)}e&&!_.offset&&(vk.no_ads=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.inArray)(_[paramSection],[sectionAudio]),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(_,{uf:1})),void 0!==cur.useRec&&(_.rec=cur.useRec,delete cur.useRec),_.edit=nav.objLoc.edit,_.sign=nav.objLoc.sign,_.all=nav.objLoc.all,_.change=1,cur.searchLoc&&(_.search_loc=cur.searchLoc),void 0!==cur.topType&&(_.type=cur.topType,delete cur.topType);const s=window.iSearch;s&&s.select&&(s.select.hide(),delete cur.setISearch),cur.loadingMedia||(uiSearch.showProgress("search_query"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query").ignoreFixed=_[paramSection]==sectionStatuses),nav.objLoc.from&&(_.from=nav.objLoc.from);const o=this.removeLogClickHandlers,r=this.logSearch;_.act="search_request",_.module=cur.module;const i=+new Date,a=(t,s,a,c)=>{window.cur.onSearchOrSectionChange&&window.cur.onSearchOrSectionChange.forEach((_=>_())),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(document.querySelector(".search_seo_info"));const n=_.uf&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results_wrap")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results_wrap"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("friends_filters_block")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("friends_filters_block"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("filter_form");if(n.innerHTML=s||"",e&&(l&&(l.innerHTML=a||""),n.setAttribute("style",c),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)("search_query")),t.loc){const _=`${locProtocol}//${location.host}/${t.loc}`,e=document.URL===_?"":document.URL;setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_16__.updateCounters.pbind(_,e),10)}searcher.applyOptions(t,e),uiSearch.hideProgress("search_query"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("search_clear_params");const E=window.audioPlayer;E&&E.showCurrentTrack&&E.showCurrentTrack(),cur.onSearchFinish&&cur.onSearchFinish(),(0,_web_lib_market__WEBPACK_IMPORTED_MODULE_2__.shortCurrency)(),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_3__.checkPageBlocks,200),cur.onSearchDone&&cur.onSearchDone(),o();const u=+new Date-i;t.query_duration=t.query_duration||u,r(_,t)};cur.searchReq=ajax.post("al_search.php",_,{onDone(e,s,o,r){const i=1===_["c[not_safe]"];if(!t&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("search_groups_confirm_disable_safe_search_web2")&&i&&e.is_illegal_q)return(0,_web_search_components_IllegalConfirmModal__WEBPACK_IMPORTED_MODULE_22__.showIllegalConfirmModal)({onDisable:()=>{a(e,s,o,r)},callbackClose:()=>{a({...e,real_offset:0,has_more:!1},`<div id="no_results" class="no_rows">${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("search_inappropriate_query")}</div>`,o,r),uiSearch.hideProgress("search_query")},isNotSafe:i}),!0;confirmIllegalContent(),a(e,s,o,r)},onFail:()=>(uiSearch.hideProgress("search_query"),!0),showProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!0},hideProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!1,cur.loadingMedia=!1},ads:!(!e||_.offset)})},showMore(){if(hasIsIllegalContent())return;const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("ui_search_load_more"),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_more_results");if(!_||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(_)||cur.isSearchLoading)return void(e&&searcher.appendElements(e));if(e&&searcher.appendElements(e),!cur.has_more)return void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(_);cur.disableAutoMore=!1,cur.isSearchLoading=!0,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.lockButton)(_);const t=searcher.getSectionParams();t.offset=cur.offset,t.real_offset=cur.real_offset,t.next_from=cur.next_from,t.query_id=cur.query_id,t.edit=nav.objLoc.edit,t.sign=nav.objLoc.sign,t.all=nav.objLoc.all,t.act="show_more",t.module=cur.module,nav?.objLoc?.["c[section_page]"]&&(t["c[section_page]"]=nav.objLoc["c[section_page]"]),cur.section===sectionCommunities&&(t.random_seed=cur.random_seed,t.force_group_id=cur.force_group_id),ajax.post("al_search.php",t,{onDone(e,t){cur.isSearchLoading=!1,t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("no_results")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)("no_results"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results").insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{innerHTML:t,id:"search_more_results"}),_),cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_30__.cutTextToHighlight)(".labeled__searchServicesDesc")),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.unlockButton)(_),searcher.applyOptions(e),searcher.scrollCheck()},cache:t[paramSection]!==sectionAudio||t[paramQuery]?1:0})},switchSection(_,e,t,s){if(t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.checkEvent)(t))return!0;this.removeLogClickHandlers(),e=e||{},_!==sectionCommunities&&_!==sectionMiniApps||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(paramCategory,0),cur.filtersShown=!1);const o=searcher.getSectionParams(_);s&&(o["c[section_page]"]=s),_!==sectionAuto&&_!==sectionQuick&&e.updateStats&&(o.swt=1),e.tab&&(o.tab=1);const r=_===sectionCommunities&&s&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("search_communities_geo_section_page_enabled");if(r&&(o.query_id=window.cur.query_id),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_menu")&&uiRightMenu)if(r){const e=document.querySelector("#ui_rmenu_communities_list"),t={};e&&(e.style.display=s?"block":"none",t.preventSubmenuExpand=!0);const o=s?document.querySelector("#ui_rmenu_search_section_page_nearby"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)(`search_menu_${_}`,"search_menu");o&&uiRightMenu.switchMenu(o,!1,t)}else{const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)(`search_menu_${_}`,"search_menu");e&&uiRightMenu.switchMenu(e)}return searcher.setSection(_),searcher.sendSearchReq(o,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollToTop)(),!1},removeLogClickHandlers(){(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchPeople),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchStatuses),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchCommunities),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchAudio),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchVideo),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchClips),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceFriendsFind),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceGroupsCatalog)},logSearch(_,e){let t=_[paramQuery];if(!t)return;if(t=t.trim(),0===t.length)return;const s=cur.section,o=cur.module,r=cur.query_id,i=e.event_bits,a=e.query_duration,c=e.model_name,n=e.model_name_auto_blocks||[],l=e.is_anonym,E=e.sort,u=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("no_results")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_auto_rows")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_auto_rows").children.length>0;let d;switch(s){case sectionAudio:d=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchAudio;break;case sectionVideo:d=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchVideo;break;case sectionClips:d=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchClips;break;case sectionStatuses:d=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchStatuses;break;case sectionPeople:d=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchPeople;break;case sectionCommunities:d=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchCommunities;const e="nearby"===_[paramSectionPage]||"nearby"===window.nav.objLoc[paramSectionPage];if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("search_communities_web_blocks_enabled")||e)return void searcher.logSearchCommunitiesBlocks(t,r,i,e?_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups:_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGroups,n,l,E);break;default:return}switch(o){case moduleFriends:d=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceFriendsFind;break;case moduleGroupsCatalog:d=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceGroupsCatalog}o===moduleEmpty&&s===sectionPeople&&(d=_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceFriendsFind),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.saveSearchAttemptStats)(d,0,u,t,r,i,a,c,"","",l,0,null,E)},logSearchCommunitiesBlocks(_,e,t,s,o,r,i){const a=document.querySelector("#results.search_communities_results");if(!a)return;const c=t||window.cur.event_bits,n=e||(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.generateQID)();window.cur.query_id=n;const l=document.querySelector(".search_communities_section_link a");if(l){const _=l.getAttribute("href");"#"!==_&&l.setAttribute("href",`${_}${n}`)}if(Boolean(a.querySelector(".block_geo_groups"))){let e="";o.hasOwnProperty(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups)&&(e=o[_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups]),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchCommunities,0,!0,_,n,c,0,e,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups,"",r,2,null,i)}const E=a.querySelector(".block_user_groups"),u=a.querySelector(".block_other_groups"),d=s===_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.blockNameSearchGeoGroups;if(E||u||d){const e=o.hasOwnProperty(s)?o[s]:"";(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_9__.serviceSearchCommunities,0,!0,_,n,c,0,e,s,"",r,1,null,i,d)}},getSectionParams(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("filter_form");let t={};if(t=!e||_&&_!==cur.section||cur.section===sectionQuick?{[paramSection]:_||cur.section}:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.serializeForm)(e)||{},"communities"===cur.section){(window.nav?.objLoc?.["c[category]"]||window.nav?.objLoc?.category)&&!t[paramCategory]&&0!==t[paramCategory]&&(t[paramCategory]=window.nav.objLoc?.["c[category]"])}t[paramQuery]=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("search_query");for(const _ in t)if(t.hasOwnProperty(_)){const e="0"==t[_]&&_!==paramQuery&&_!==paramSort;t[_]&&!e||delete t[_],"-1"==t[_]&&t[`${_}_custom`]?(t[_]=t[`${_}_custom`],delete t[`${_}_custom`]):t[`${_}_custom`]&&delete t[`${_}_custom`]}return cur.section!==sectionVideo||t[paramSort]||(t[paramSort]="0"),cur.section===sectionPeople&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("photo")&&!t[paramPhoto]&&(t[paramPhoto]="0"),cur.section===sectionPeople&&t[paramInvite]&&delete t.from,cur.section!==sectionCommunities||!cur.filtersShown||t[paramQuery]||t[paramCategory]||(t[paramSkipCatalog]="1",cur.module===moduleGroupsRecommendations&&(t[paramGroupsRecommendationsModel]="1",t[paramFrom]=cur.from,t[paramBlockPosition]=cur.block_position)),t},sameParams(_){if(!cur.params)return!1;for(let e in _)if(_.hasOwnProperty(e)&&_[e]!=cur.params[e])return!1;for(let e in cur.params)if(cur.params.hasOwnProperty(e)&&_[e]!=cur.params[e])return!1;return!0},switchAudioTop(_){return cur.useRec=_,cur.audioTop=_,this.switchSection(sectionAudio)},showMedia:(_,e,t,s)=>(!t||!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.checkEvent)(t))&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("label",e)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("progress",e)),cur.loadingMedia=!s,searcher.switchSection(_,{updateStats:!0},t,s)),updResults(_){if(cur.customSearchChange)return cur.customSearchChange(),!1;const e=searcher.getSectionParams();if(searcher.sameParams(e)||e[paramSection]===sectionVideo&&!e[paramQuery]&&!nav.objLoc[paramQuery])return!1;cur.onSearchChange&&cur.onSearchChange(e);let t=(cur.section===sectionAuto||cur.section===sectionAudio&&e[paramQuery]&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("audio_lyrics_filter")||cur.section===sectionAudio&&!e[paramQuery]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("audio_lyrics_filter"))&&!e.offset;searcher.sendSearchReq(e,t,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollToTop)()},onInputChange(_){clearTimeout(cur.requestTimeout),!_||"keydown"===_.type&&13!==_.keyCode?cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),1e3):searcher.updResults()},onKey(){cur.section===sectionQuick&&(clearTimeout(cur.requestTimeout),cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),300))},isFriendNpsTriggerSent:!1,onEnter(_,e){(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_20__.partConfigEnabled)("catalog_new_friends_search_nps_triggers")&&!this.isFriendNpsTriggerSent&&((0,_shared_friends_friends_stats__WEBPACK_IMPORTED_MODULE_28__.sendSearchFriendEvent)(),this.isFriendNpsTriggerSent=!0);const t=window.iSearch;t&&t.select&&t.select.isVisible()&&t.select.active>-1||(clearTimeout(cur.requestTimeout),searcher.updResults(),searcher.highlightHotHashtag(e))},checkbox(_,e,t,s){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.checkbox)(_);let o=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.isChecked)(_)?1:0;t&&(o=1-o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(e,o),s||searcher.updResults()},setSection(_){_!==cur.section&&_!==sectionAuto&&_&&(cur.section=_)},applyOptions(options,changeSection){const iSearch=window.iSearch;iSearch.initSelect(),searcher.setSection(options.section),options.reply_names&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(cur.options.reply_names,options.reply_names),delete options.reply_names),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.extend)(cur,options),cur.params=searcher.getSectionParams();const header=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_header"),searchInput=document.querySelector("#search_query_wrap"),searchFilters=document.querySelector("#filter_form");if(Boolean(options?.hide_search_form)?(searchInput?.classList?.add("hide"),searchFilters?.classList?.add("hide")):(searchInput?.classList?.remove("hide"),searchFilters?.classList?.remove("hide")),options.tabs)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("search_tabs_wrap",options.tabs),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(header),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("search_tabs_wrap");else if(options.title){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("_header_inner",header);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_,options.title),options.summary&&_.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("span",{className:"page_block_header_count",innerHTML:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.langNumeric)(options.summary,"%s",!0)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("search_tabs_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(header)}if(null!=options.controls&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("_header_extra",header),options.controls||""),void 0!==options.auto_rows&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_auto_rows")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_auto_rows").innerHTML=options.auto_rows||""),clearTimeout(cur.setLocTO),options.loc)if(changeSection)try{nav.setLoc(options.loc)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__.debugLog)(_)}else cur.setLocTO=setTimeout((()=>{if("search"===nav.objLoc[0]||nav.objLoc[0]===sectionCommunities||"brands"===nav.objLoc[0]||nav.objLoc[0].match(/^people($|\/)/)||cur.searchLoc)try{nav.setLoc(options.loc)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__.debugLog)(_)}}),100);if(options.htitle&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setDocumentTitle)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.replaceEntities)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.stripHTML)(options.htitle))),void 0!==options.q){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("search_query",(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.replaceEntities)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.stripHTML)(options.q))||"");const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_clear_params");_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(_)}if(cur.uiSort&&void 0!==options.sortHide&&(options.sortHide&&cur.uiSort.selectItem(0,!1),cur.uiSort.disable(options.sortHide)),cur.section===sectionAuto&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("search_menu_auto","search_menu")),options.script)try{eval(options.script)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_10__.logEvalError)(_,options.script)}const isIllegal=hasIsIllegalContent(),res=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("results"),sc=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_content"),lighted=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(sc,"highlight"),noResultsClass=options?.real_offset||"auto"===options?.section?"":"search_empty_result ";res.className=`search_results ${noResultsClass}search_${cur.section}_results${cur.section===sectionStatuses||cur.section===sectionAuto?" wall_module":""}${cur.section===sectionStatuses&&""!==options.summary||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("page_block",res)?"":" page_block"} mark_top_verified ${isIllegal?"search_results_illegal":""}`,cur.section===sectionAudio&&(res.className+=" audio_w_covers"),lighted&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(sc,"highlight");const moreResults=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_more_results");cur.has_more||moreResults&&moreResults.firstChild?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("seach_pages"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("ui_search_load_more")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("ui_search_load_more")},selectHotHashtag(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query"),s=((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.data)(t,"opts")||{}).onEnter;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(t,e),s&&s(t,e),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__.statlogsValueEvent)("top_hashtag_search",0,"click"),!1},highlightHotHashtag(_){_=_?_.toLowerCase():"";let e=!1;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("search_hot_hashtags_item","search_hot_hashtags");return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.each)(t,((t,s)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(s).toLowerCase()===_?(e=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(s,"search_hot_hashtags_item_active")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(s,"search_hot_hashtags_item_active")})),e},toggleFilter(_,e,t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(_,"search_filter_shut")||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(e)?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"search_filter_open"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(_,"search_filter_shut"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__.slideDown)(e,200,(()=>{(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_3__.checkPageBlocks)(),t&&t()}))):(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__.slideUp)(e,200,(()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"search_filter_shut"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(_,"search_filter_open"),t&&t()}))},appendElements(_){if(_){for(;_.firstChild;)_.parentNode.insertBefore(_.firstChild,_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)(_)}},close:()=>nav.go(cur.search_return_to,{},{back:!0}),toggleMinimizedFilters(_,e,t){const s=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domNS)(_),o=t?0:200;return void 0===e&&(e=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(s)),!e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(s)?(cur.filtersShown=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(_,"ui_rmenu_item_expanded"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__.slideUp)(s,o)):e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(s)&&(cur.filtersShown=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(paramCategory,0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"ui_rmenu_item_expanded"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_6__.slideDown)(s,o)),!1},onCommunitiesToggle(){"search"==cur.module&&(uiRightMenu.switchMenu((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)(`search_menu_${cur.section}`,"search_menu")),searcher.updResults())},showMenuFeaturing(_){const e=document.querySelector(_);if(!e)return;e.classList.add("ui_rmenu_item--featuring");const t=()=>this.hideMenuFeaturing(_);e.addEventListener("click",t),window.cur.destroy?.push((()=>{e.removeEventListener("click",t)}))},hideMenuFeaturing(_){const e=document.querySelector(_);e&&e.classList.remove("ui_rmenu_item--featuring")},onMarketSwitchSection(_,e=!1){searcher.removeLogClickHandlers();const t=searcher.getSectionParams("market"),s=document.querySelector("#search_query"),o=document.querySelector(".search_menu_market");return e&&s?(s.value="",delete t["c[q]"]):(t.swt=1,t.tab=1),o&&uiRightMenu&&((0,_web_ecomm_market_MarketSearchBanner_utils_hideFeaturing__WEBPACK_IMPORTED_MODULE_18__.hideFeaturing)().then((()=>{const _=document.querySelector(".MarketSearchBanner");_&&_.remove(),searcher.hideMenuFeaturing(".search_menu_market")})),uiRightMenu.switchMenu(o)),searcher.setSection("market"),searcher.sameParams(t)||searcher.sendSearchReq(t,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollToTop)(),!1},subscribe(_,e,t,s,o,r,i,a,c){let n,l;const E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("search_row",_);if(cur.unsubscribed=cur.unsubscribed||{},a)return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__.showFastBox)(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("global_warning"),c,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("profile_do_unban"),(a=>{let c;_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_24__.FlatButton?.isFlatButton(a)&&(c=a,_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_24__.FlatButton.lock(c));const n=()=>{c&&_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_24__.FlatButton.unlock(c),searcher.subscribe(_,e,t,s,o,r,i),curBox()?.hide()};(0,_vkontakte_internal_vkjs_lib_API__WEBPACK_IMPORTED_MODULE_25__.api)("account.unban",{owner_id:e}).then(n,(_=>{if(_&&_.error_code===_shared_friends_constants__WEBPACK_IMPORTED_MODULE_31__.ACCESS_DENIED_CODE)return n();curBox()?.hide()}))}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("global_cancel"),(()=>{curBox()?.hide()})),!1;if(!s&&r&&!cur.unsubscribed[e]){const i=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("global_warning"),bodyStyle:"padding: 20px; line-height: 160%;"},_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang(r),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("search_group_leave"),(()=>{i.hide(),searcher.subscribe(_,e,t,s,o)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("global_cancel"));return!1}if(s){n="al_feed.php",l={act:"subscr",oid:e,hash:t,from:o||"search",ref:cur.module},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"trackcode")&&(l.trackcode=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"trackcode"))}else{n="al_fans.php",l={act:"unsub",oid:e,hash:t,from:"search",ref:cur.module},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"trackcode")&&(l.trackcode=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"trackcode"))}ajax.post(n,l,{onDone(){if(i?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(E,"touched",!!s):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggle)(`search_sub${e}`,!s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggle)(`search_unsub${e}`,!!s)),s||(cur.unsubscribed[e]=1),s&&_shared_ranges__WEBPACK_IMPORTED_MODULE_21__.Ranges.isGroupId(e)&&(0,_shared_communities_actions__WEBPACK_IMPORTED_MODULE_17__.trackTmrGroupsJoin)(),"search_auto_people_block"===o){const _=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.getTrackCodeFromElement)(E);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:s?_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.ADD_FRIEND:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.REMOVE_FRIEND,track_code:_,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.USER})}},onFail(_){if(_)return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_13__.showFastBox)(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_14__.getLang("global_error"),_).hide,2e3),!0},showProgress(){i?(_.tt&&_.tt.destroy(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(E,"loading")):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.lockButton)(_)},hideProgress(){i?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(E,"loading"):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_12__.unlockButton)(_)}})},onResize(){searcher.scrollCheck()},scrollCheck(){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mobile||cur.isSearchLoading||cur.disableAutoMore)return;const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("ui_search_load_more");if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(_)){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_more_results");return void(_&&searcher.appendElements(_))}const e=document.documentElement,t=window.innerHeight||e.clientHeight||document.body.clientHeight;(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_7__.scrollGetY)()+t+200>_.offsetTop&&searcher.showMore()},showMiniAppTooltip(_){(0,_search_utils__WEBPACK_IMPORTED_MODULE_29__.showMiniAppTooltip)({el:_})},openMiniApp(_,e,t,s){const o=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.getTrackCodeFromElement)(s);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.TAP,track_code:o,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.MINI_APP}),t&&(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_5__.showWiki)({w:`app${_}`,app_ref:e})},openCommunity(_,e,t){const s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("search_row",_),o=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.getTrackCodeFromElement)(s);return(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.TAP,track_code:o,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.GROUP}),nav.go(_,e,t)},sendNpsStats(_){const e=_?.hasAttribute(_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.SEARCH_PEOPLE_EXCEPT_FRIENDS),t=_?.hasAttribute(_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.SEARCH_PEOPLE_FRIENDS);e&&(0,_shared_friends_friends_stats__WEBPACK_IMPORTED_MODULE_28__.sendSearchFriendGlobalEvent)(),t&&(0,_shared_friends_friends_stats__WEBPACK_IMPORTED_MODULE_28__.sendSearchFriendEvent)()},openProfile(_,e){const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.gpeByClass)("search_row",_),s=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.getTrackCodeFromElement)(t);return this.sendNpsStats(_),(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.TAP,track_code:s,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.USER}),nav.go(_,e)},openProfileNps(_,e){return this.sendNpsStats(_),nav.go(_,e)},openAudioAuthor(_){const e=_?.closest("._audio_row");if(e){const _=_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_26__.AudioUtils.getAudioFromEl(e,!0);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.OPEN_OWNER,track_code:_?.trackCode||"",type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.MUSIC_AUDIO})}},openAudio(_){const e=_?.closest("._audio_row");if(e){const _=_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_26__.AudioUtils.getAudioFromEl(e,!0);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.TAP,track_code:_?.trackCode||"",type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.MUSIC_AUDIO})}},openClip(_,e){const t=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.getTrackCodeFromElement)(_);return(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.PLAY,track_code:t,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.VIDEO}),"click"===e.type&&(e.ctrlKey||e.metaKey)},openVideo(_,e){const t=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.getTrackCodeFromElement)(_);return(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.TAP,track_code:t,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.VIDEO}),cur.cancelClick?cur.cancelClick=!1:cur.chooseVideoMedia?cur.chooseVideoMedia(this,"-197864572_456239738"):Video.show(e,"-197864572_456239738",{autoplay:1,queue:0,listId:"",playlistId:"",addParams:{track_code:t}},_)},openVideoLink(_){const e=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.getTrackCodeFromElement)(_);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.PLAY,track_code:e,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.VIDEO})},openVideoAuthor(_){const e=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.getTrackCodeFromElement)(_);(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.OPEN_OWNER,track_code:e,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.VIDEO})},onPostClick(_){if(!_?.closest(".search_auto_results"))return;const e=(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.getTrackCodeFromElement)(_,"postTrackCode");(0,_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.logEvent)({action:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.SearchClickActionMap.TAP,track_code:e,type:_web_search_stats_collectClick__WEBPACK_IMPORTED_MODULE_23__.EventItemType.POST})}},iSearch={init(_,e){if(this.inited)return;const t=this;this.inited=!0,this.input=_,this.cont=_.parentNode.parentNode;const s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{className:"results_container",innerHTML:'<div class="result_list"></div>'});this.cont.appendChild(s),this.resultList=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("result_list",s)[0],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(this.resultList),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.chrome&&(this.resultList.style.opacity=1),this.resultList.style.width=s.style.width="552px",this.onShowCallback=!!e&&e.onShow,this.initSelect(e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(_,"keyup click mouseup",t.inputUpHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(document,"click",t.documentClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.addEvent)(_,"keypress keydown",t.inputDownHandler),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("top_search")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("top_search").onclick=_=>hab.getLoc().indexOf("search")?nav.go("search",_,{search:!0}):(window.searcher&&searcher.close(),!1))},inputUpHandler(_){const e=window.iSearch;if(!e.select)return;if((e.select.isVisible()&&e.select.active>-1||cur.preventISRequest)&&(delete cur.preventISRequest,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.inArray)(_.keyCode,[_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.UP,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.DOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.PAGEUP,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.PAGEDOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.RETURN])))return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.cancelEvent)(_);clearTimeout(cur.requestTimeout);const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(e.input);e.currentTerm=t;const s=cur.section;t?cur.requestTimeout=setTimeout((()=>{cur.setISearch=!0,ajax.post("/hints.php?act=a_gsearch_hints",{q:t,section:s},{onDone(_){e.currentTerm===t&&cur.setISearch&&e.showSelectList(t,_),delete cur.setISearch},cache:1})}),300):e.select.hide()},documentClick(){const _=window.iSearch;_.select&&_.select.hide()},inputDownHandler(_){const e=window.iSearch;if(e.select){if(!e.select||e.select.active<0)return _.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.RETURN&&e.select&&(cur.preventISRequest=!0,e.select.hide()),!0;if(_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.SPACE||(_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.RETURN||10===_.keyCode)&&e.select&&e.select.isVisible()){const t=e.select.list.childNodes[e.select.active],s=t?t.getAttribute("val"):"";let o;if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.each)(e.lastItems,(function(){this[0]===s&&(o=this)})),!o)return;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(e.input,o[3]+(_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.SPACE?" ":"")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)(e.input,e.input.length),_.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.SPACE&&(cur.preventISRequest=!0,e.select.hide(),searcher.updResults()),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.cancelEvent)(_)}return _.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.KEY.RETURN&&10!==_.keyCode||!e.select||!e.select.isVisible()||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.triggerEvent)(document,_.type,_),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.cancelEvent)(_))}},initSelect(){const _=window._iu,e=window.Select;if(this.select||!e||!_)return;if(!this.resultList)return;this.guid=_.reg(this);const t=this;this.select=new e(this.resultList,{selectFirst:!1,onItemSelect:this.onItemSelect.bind(this),onShow:()=>((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(t.onShowCallback)&&t.onShowCallback(),_.sel(t.guid)),onHide:_.sel.pbind(!1),cycle:!0}),this.select.hide()},showSelectList(_,e){const t=this;this.select&&((e=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isArray)(e)&&e.length?e:[]).length?(this.select.clear(),this.lastItems=e,this.select.content(e),this.select.show(),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(this.onShowCallback)&&this.onShowCallback()):t.select.hide())},onItemSelect(_){if(!this.select)return;let e;if(this.select.hide(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.each)(this.lastItems,(function(){this[0]===_&&(e=this)})),!e)return;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{innerHTML:e[3]});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(this.input,t.innerText||t.textContent),this.input.blur(),searcher.updResults()},onEvent(_){_.type===(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.opera||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.mozilla?"keypress":"keydown")&&this.select.handleKeyEvent(_)},destroy(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.cleanElems)(this.resultList),clearTimeout(_?_.requestTimeout:cur.requestTimeout),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(this.input,"keyup click mouseup",this.inputUpHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(document,"click",this.documentClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_8__.removeEvent)(this.input,"keypress keydown",this.inputDownHandler),this.select&&(this.select.destroy(),delete this.select),this.resultList&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)(this.resultList.parentNode),delete this.lastItems,this.inited=!1},updateResultsList(_){_?_+="px":_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("search_query_wrap"),"wide")?"512px":"451px",this.resultList.style.width=_}}},362568:(_,e,t)=>{t.d(e,{searchActions:()=>O,slideHide:()=>D,slideShow:()=>m});var s=t(128907),o=t(740685),r=t(488844),i=t(471828),a=t(261712),c=t(902947),n=t(159663),l=t(330),E=t(636322),u=t(93367),d=t(97875),h=t(70689),b=t(226059),P=t(977053),M=t(330046);const m=_=>{(0,h.isVisible)(_)||(0,d.slideDown)(_,150)},D=_=>{(0,h.isVisible)(_)&&(0,d.slideUp)(_,150)},O={peopleMessage(_){(0,s.showWriteMessageBox)(window.event||{},_)},peopleAction(_,e,t){ajax.post(e,t,{onDone(e){_.parentNode.replaceChild((0,h.ce)("span",{innerHTML:e}).firstChild,_)}})},ownerAction({parentNode:_},e,t){ajax.post(e,t,{onDone(e){_.innerHTML=e}})},groupAction(_,e,t,s,r){ajax.post("al_groups.php",{act:"member_action",action:e,gid:t,mid:s,hash:r,context:"search"},{onDone(e){_.parentNode.replaceChild((0,h.ce)("span",{innerHTML:e}).firstChild,_);const t=_tbLink.loc;t&&(0,o.globalHistoryDestroy)(t)}})},inviteToGroup(_,e,t,s,o){const r=o=>{let r,a;o?(r=i.getLang("search_cancel_invitation"),a=b.FlatButtonAppearance.SECONDARY):(r=i.getLang("search_send_invitation"),a=b.FlatButtonAppearance.PRIMARY),_.onclick=()=>{O.inviteToGroup(_,e,t,s,o?1:0)},b.FlatButton.setLabel(_,r),b.FlatButton.setAppearance(_,a)},c=()=>b.FlatButton.lock(_),n=()=>b.FlatButton.unlock(_);return o?ajax.post("/al_page.php",{act:"a_cancel_invite",mid:t,gid:e,hash:s},{onDone(){r(0)},showProgress:c,hideProgress:n}):ajax.post("/al_page.php",{act:"a_invite",mid:t,gid:e,hash:s},{onDone(e,t){e?r(1):((0,a.showMsg)((0,h.gpeByClass)("people_row",_),t,"msg"),(0,h.hide)(_))},showProgress:c,hideProgress:n}),!1},showLyrics(_,e,t){let s=(0,h.ge)(`lyrics${_}`);s?(0,h.isVisible)(s)?(0,h.hide)(s):(0,h.show)(s):(s=(0,h.ce)("div",{id:`lyrics${_}`,className:"audio_lyrics_wrap",innerHTML:'<div class="loading"></div>'}),(0,h.ge)(`audio${_}`).appendChild(s),ajax.post("/al_audio.php",{act:"get_lyrics",lid:e,aid:_,top:t},{onDone(_){s.innerHTML=`<div class="audio_lyrics ta_l">${_}</div>`}}))},toggleBanInGroup(_,e,t,s){(0,n.showBox)("/groupsedit.php",{act:"bl_edit",name:`id${e}`,gid:t},{stat:["page.css","ui_controls.js","ui_controls.css"]})},selectCategory(_,e,t){(0,h.ge)("c[category]").value=e,_&&(0,h.hasClass)(_,"_ui_rmenu_subitem")&&uiRightMenu.switchMenu(_);const s=(0,h.ge)("search_query");return(0,h.val)(s)&&((0,h.val)(s,""),s.focus(),(0,u.triggerEvent)(s,"keyup")),window.searcher.toggleMinimizedFilters((0,h.ge)("search_filters_minimized"),!1),window.searcher.updResults(),!1},searchUnchooseGeoPoint(){const _=(0,h.ge)("search_status_map"),e=(0,h.ge)("search_status_map_delete_wrap");(0,h.removeClass)(_,"search_status_map_selected"),(0,h.setStyle)(_,{backgroundImage:""}),e&&e.tt&&e.tt.hide&&e.tt.hide(),(0,h.val)("search_status_map_hidden",""),window.searcher.updResults()},chooseGeoPoint(_,e,t,s){boxQueue.hideLast();const o=10**10;let r=200,i=120;window.devicePixelRatio>=2&&(r*=2,i*=2),_=Math.round(_*o)/o,e=Math.round(e*o)/o;const a=(0,h.ge)("search_status_map");(0,h.addClass)(a,"search_status_map_selected"),(0,h.setStyle)(a,{backgroundImage:`url(/maps?lat=${_}&lng=${e}&z=${t}&w=${r}&h=${i})`}),s||((0,h.val)("search_status_map_hidden",`${_},${e},${t}`),window.searcher.updResults())},searchChooseGeoPoint(){const _={act:"a_choose_place_box",search:1},e=(0,h.val)("search_status_map_hidden").match(/(\-?\d{1,3}(?:\.\d+)?)\,(\-?\d{1,3}(?:\.\d+)?)(?:\,(\d+))?/);e&&(_.lat=(0,c.floatval)(e[1]),_.lon=(0,c.floatval)(e[2]),_.zoom=e[3]||8),(0,n.showBox)("/al_places.php",_),cur.chooseGeoPoint=window.searchActions.chooseGeoPoint},searchUrlOnChange(_,e,t){const s=(0,h.ge)("search_status_url"),o=s.name,i=e?"c[domain]":"c[url]";return(0,r.radiobtn)(_,e,"search_status_hint_domain"),(0,h.elfocus)(s),(0,h.val)(s)&&i!==o&&(s.name=i,window.searcher.updResults()),(0,u.cancelEvent)(t)},onChangeCommunityType(_){_=(0,c.positive)(_),(0,h.val)((0,h.ge)("c[type]"),_),m("region_filters"),3===_?(m("events_filter"),(0,h.val)((0,h.ge)("all_events"),(0,r.isChecked)("future")?0:1)):(D("events_filter"),(0,h.val)((0,h.ge)("all_events"),0)),(0,l.checkPageBlocks)(),window.searchActions.updateCommunityThemes(_),window.searcher.updResults()},updateCommunityThemes(_,e){_=(0,c.positive)(_);const t=(0,c.positive)((0,h.val)((0,h.ge)("not_safe_search")));let s=[];let o;t?s=cur.communityThemes[_]||[]:(0,E.each)(cur.communityThemes[_]||[],(function(){this[5]||s.push(this)})),e?(o=(0,c.positive)(cur.communityThemesDD.val()),!(0,E.inArray)(o,cur.notSafeThemesIds)&&o||cur.communityThemesDD.clear()):cur.communityThemesDD.clear(),cur.communityThemesDD.setOptions({autocomplete:!1}),cur.communityThemesDD.setData(s),cur.communityThemesDD.setOptions({autocomplete:!0}),_>1?m("cTheme"):D("cTheme")},onChangeCommunityTheme(_){(0,h.val)((0,h.ge)("c[theme]"),_),window.searcher.updResults()},handleChangeNotSave(_,e,t,s){const o=(0,h.val)((0,h.ge)("c[theme]"));(0,E.inArray)(o,cur.notSafeThemesIds)&&(0,h.val)((0,h.ge)("c[theme]"),""),window.searcher.checkbox(_,e,t,!0),window.searchActions.updateCommunityThemes((0,h.val)((0,h.ge)("c[type]")),!0),window.searcher.updResults(s)},onChangeNotSafe(_,e,t){const s=!!(0,r.isChecked)(_);if((0,P.partConfigEnabled)("search_groups_confirm_disable_safe_search_web2")&&cur.is_illegal_q&&s)return document.querySelector(".search_query_wrap")?.classList?.add("search_query_illegal"),void(0,M.showIllegalConfirmModal)({onDisable:()=>{window.searchActions.handleChangeNotSave(_,e,t,!0)},isNotSafe:!1});window.searchActions.handleChangeNotSave(_,e,t)}}},932247:(_,e,t)=>{t.d(e,{ACCESS_DENIED_CODE:()=>s});const s=15},379696:(_,e,t)=>{t.d(e,{sendSearchFriendEvent:()=>r,sendSearchFriendGlobalEvent:()=>i});var s=t(322695),o=t(324153);function r(){s.searchStatsCollector.logEvent({action:o.SearchClickActionMap.TAP,type:o.EventItemType.SEARCH_PEOPLE_FRIENDS,track_code:""})}function i(){s.searchStatsCollector.logEvent({action:o.SearchClickActionMap.TAP,type:o.EventItemType.SEARCH_PEOPLE_EXCEPT_FRIENDS,track_code:""})}},781779:(_,e,t)=>{t.d(e,{hideFeaturing:()=>o});var s=t(166695);const o=()=>(0,s.api)("market.searchFeaturingClose",{})},651240:(_,e,t)=>{t.d(e,{showIllegalConfirmModal:()=>b});var s=t(785893),o=t(667294),r=t(60811),i=t(258037),a=t(441430),c=t(990460),n=t(86894),l=t(284658),E=t(471828),u=t(988865),d=t(37946);const h=({onClose:_,onDisable:e,callbackClose:t,refreshCoordinates:l,isNotSafe:h})=>{(0,o.useEffect)((()=>{l()}),[]);const b=()=>{_(),t&&t()},P=h?E.getLang("search_title_not_safe_confirm_disable_safe_search"):E.getLang("search_title_confirm_disable_safe_search"),M=h?E.getLang("search_text_not_safe_confirm_disable_safe_search"):E.getLang("search_text_confirm_disable_safe_search"),m=h?E.getLang("search_close_btn_not_safe_confirm_disable_safe_search"):E.getLang("search_close_btn_confirm_disable_safe_search"),D=h?E.getLang("search_confirm_btn_not_safe_confirm_disable_safe_search"):E.getLang("search_confirm_btn_confirm_disable_safe_search");return(0,s.jsxs)(r.ModalBox,{children:[(0,s.jsx)(n.ModalDismissButton,{onClick:b,"aria-label":E.getLang("global_close")}),(0,s.jsxs)(i.Placeholder,{icon:(0,s.jsx)(u.Icon56HideOutline,{className:d.default.icon}),header:P,action:(0,s.jsxs)(n.ButtonGroup,{className:d.default.actions,mode:"vertical",align:"center",gap:"s",children:[(0,s.jsx)(a.Button,{onClick:b,size:"m",children:m}),(0,s.jsx)(a.Button,{onClick:()=>{e(),_()},size:"m",mode:"tertiary",children:D})]}),children:[(0,s.jsx)(c.Headline,{level:"1",className:d.default.text,children:M}),(0,s.jsx)("a",{href:"@vk-notification",children:E.getLang("search_link_text_confirm_disable_safe_search")})]})]})};function b({onDisable:_,callbackClose:e,isNotSafe:t}){(0,l.showMessageBoxModal)((o=>(0,s.jsx)(h,{...o,onDisable:_,callbackClose:e,isNotSafe:t})))}},330046:(_,e,t)=>{t.d(e,{showIllegalConfirmModal:()=>s.showIllegalConfirmModal});var s=t(651240)},804614:(_,e,t)=>{t.d(e,{initSearchStatusFilters:()=>h});var s=t(902947),o=t(380526),r=t(802130),i=t(70689),a=t(93367),c=t(449147),n=t(471828),l=t(585703),E=t(362568),u=t(618418),d=t(977053);function h({selData:_,contentHint:e}){const t=_=>{_.keyCode!=o.KEY.ENTER&&"keydown"==_.type||window.searcher.updResults()},h=_=>{"search"==window.cur.section&&(0,r.statlogsValueEvent)("feed_change_sort",0,_),window.cur.disableSort=!_};if((0,d.partConfigEnabled)("search_enable_news_sort_filter")){const e=()=>{const _=document.getElementById("c[sort]");_&&h(_.value),window.searcher.updResults()};new window.Dropdown(document.querySelector("#search_status_sort"),_.sort,{width:null,dark:!0,zeroPlaceholder:!0,onChange:e})}else(0,d.partConfigEnabled)("search_enable_news_sort_as_segmented_control")?window.cur.onSortChanged=_=>{const e=_.querySelector(".segmentation_control_slider");if(!e)return;e.classList.toggle("segmentation_control_slider_second");const t=e.classList.contains("segmentation_control_slider_second")?0:1;h(t);const s=document.getElementById("c[sort]");s&&(s.value=String(t)),window.searcher.updResults()}:(window.radioBtns.sort={els:[...document.querySelectorAll("#cSort .radiobtn")],val:_.sort},window.cur.onSortChanged=_=>{const e=_.querySelector("._ui_toggler");if(!e)return;e.classList.toggle("on");const t=e.classList.contains("on")?1:0;h(t);const s=document.getElementById("c[sort]");s&&(s.value=String(t)),window.searcher.updResults()});["exclude","url","content"].forEach((_=>{const e=document.querySelector(`#search_status_${_}`);if(!e)return;const s=()=>{(_=>{window.cur.searchReq||(0,i.val)(_)!=(window.cur.params&&window.cur.params[_.name]||"")&&window.searcher.updResults()})(e)};(0,a.addEvent)(e,"blur",s),(0,a.addEvent)(e,"keydown change paste",t),(0,u.pushNavDestroy)((()=>{(0,a.removeEvent)(e,"blur",s),(0,a.removeEvent)(e,"keydown change paste",t)})),(0,c.placeholderInit)(e)})),["type","attach","likes"].forEach((e=>{const t=document.querySelector(`#search_status_${e}`);new window.Dropdown(t,_[e],{width:null,dark:!0,zeroPlaceholder:!0,onChange:window.searcher.updResults})}));const b=document.querySelector("#search_status_url");(0,a.addEvent)(b,"focus blur",(_=>{if(b)if("focus"==_.type){const _=`\n        <div id="search_status_hint_opts">\n          <div class="radiobtn on" onmousedown="return searchActions.searchUrlOnChange(this, 0, event);">${n.getLang("news_searchext_link_hint")}</div>\n          <div class="radiobtn" onmousedown="return searchActions.searchUrlOnChange(this, 1, event);">${n.getLang("news_searchext_domain_hint")}</div>\n        </div>\n      `.trim();(0,l.showTooltip)(b,{text:_,className:"search_status_hint_tt",shift:[324,-15,-15],slideX:-15,dir:"right",nohide:!0,onCreate:()=>{(0,a.removeEvent)(b,"mouseout"),window.radioBtns.search_status_hint_domain={els:[...document.querySelectorAll("#search_status_hint_opts .radiobtn")],val:0}}})}else b.tt&&b.tt.hide&&b.tt.hide()}));const P=document.querySelector("#search_status_content");(0,a.addEvent)(P,"focus blur",(_=>{P&&("focus"==_.type?(0,l.showTooltip)(P,{text:e,className:"search_status_hint_tt",shift:[324,-15,-15],slideX:-15,dir:"right",onCreate:()=>{(0,a.removeEvent)(P,"mouseout")}}):P.tt&&P.tt.hide&&P.tt.hide())}));let M=document.querySelector("#search_status_map_hidden"),m=M?(0,i.val)(M)?.match(/(\-?\d{1,3}(?:\.\d+)?)\,(\-?\d{1,3}(?:\.\d+)?)(?:\,(\d+))?/):null;if(m){let _=(0,s.floatval)(m[1]),e=(0,s.floatval)(m[2]),t=m[3]||8;E.searchActions.chooseGeoPoint(_,e,t,!0)}}},207563:(_,e,t)=>{t.d(e,{removeUnseenStories:()=>i,showMiniAppTooltip:()=>a});var s=t(143066),o=t(977053),r=t(585703);function i(_){const e=document.querySelectorAll(".search_item_img_stories_unseen"+_);for(const t of e)t.classList.remove("search_item_img_stories_unseen","search_item_img_stories_unseen"+_),t.closest(".search_item_img_link")?.removeAttribute("onclick");(0,o.partConfigEnabled)("avatar_component_refactor_web")&&(0,s.removeRichAvatarOutlineAtNode)(document.body,String(_),"stories_unseen")}const a=async({el:_,isForList:e})=>{if(!_)return;await window.stManager.add(["tooltips.css","apps_search.css"]);let t=_,s=_?.dataset?.appId;const o=_.closest("[data-app-id]");!s&&o&&(s=o?.dataset.appId),e&&o&&(t=o);const i=t,a=i?.tt&&i?.tt?.container?i?.tt?.container:null;a&&"none"===a?.style?.display&&(a.classList.remove("tt_left"),a.classList.remove("tt_right"),a.classList.remove("GlobalAppsCardTooltipWrapper--up"));let c,n="left",l=-100,E="",u=!1;const d=document.documentElement.clientWidth,h=document.documentElement.clientHeight,b=_.getBoundingClientRect();b.left>d-520?(n="right",c=365):c=-b.width-10,b.top>h-400&&(l=-50,E="GlobalAppsCardTooltipWrapper--up",a&&a.classList.add(E));let P=[c,l];e&&(n="top",u=void 0,P=[-20,0]),(0,r.showTooltip)(t,{url:"al_apps.php",params:{act:"mini_app_card_tooltip",app_id:s},className:`GlobalAppsCardTooltipWrapper ${E}`,hasover:!0,ajaxdt:200,showdt:300,hidedt:300,shift:P,center:u,dir:n})}},514232:(_,e,t)=>{t.d(e,{PROFILING_COMPONENTS:()=>i,searchProfilingService:()=>c});var s=t(288824),o=t(802481),r=t(798116);const i={SEARCH_TOP_TO_SEARCH_ALL_TRANSITION:"search_top_to_search_all_transition",SEARCH_TOP_TO_SEARCH_ALL_OLD_TRANSITION:"search_top_to_search_all_old_transition"},a=()=>1e3*Number(new Date),c=(0,s.makeSharedState)("global/search/searchProfilingService",(()=>{const _=(0,r.createDomain)("SearchProfilingService"),e=_.createEvent(),t=_.createEvent(),s=_.createEvent(),i=_.createEvent(),c=_.createStore({}),n=_.createEffect((({component:_,startTime:e,service:t,entrypoint:s="",abGroup:r="",isAnonymous:i=!1})=>{const c=a()-e;return _&&e&&t?((0,o.saveStatlogEvents)({name:"search_response_profiling",value:c,keys:[_,r,t,s,String(Number(i))]}),_):""}));return c.reset(i),(0,r.sample)({clock:e,source:c,fn:(_,e)=>({..._,[e]:a()}),target:c}),(0,r.sample)({clock:s,source:c,filter:(_,e)=>Boolean(_[e.component]),fn:(_,e)=>({...e,startTime:_[e.component]}),target:n}),(0,r.sample)({clock:[n.doneData,t],source:c,fn:(_,e)=>{const t={..._};return t[e]&&delete t[e],t},target:c}),{setProfilingMarkStart:e,setProfilingMarkEnd:s,removeProfilingMark:t,reset:i}}),{version:1})}}]);try{stManager.done("dist/web/chunks/5fd1765b.000ecc95.js")}catch(_){}