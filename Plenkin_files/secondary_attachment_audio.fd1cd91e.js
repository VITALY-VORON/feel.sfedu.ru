(()=>{"use strict";var e,t,a,s,n,r,o={15916:(e,t,a)=>{a.d(t,{WebAttachPlayerAdapter:()=>u});var s=a(532865),n=a(784200),r=a(471828),o=a(954314),i=a(977053),d=a(324819),l=a(164162),c=a(854942);class u{constructor(e){this.soundBarClass="audio_row__sound_bars",this.playButtonClass="SecondaryAttachment__iconButton",this.avatarContainerClass="SecondaryAttachmentAvatar",this.secondaryAttachmentClass="SecondaryAttachment",this.langMap={lang_play:r.getLang("global_audio_play"),lang_pause:r.getLang("global_audio_pause"),lang_add_audio:r.getLang("audio_add_to_audio"),lang_remove_audio:r.getLang("audio_delete_audio"),lang_ads:r.getLang("audio_lyrics_ads")},this.features={isAudioPlayerRedesignEnabled:(0,i.partConfigEnabled)("feed_secondary_attachment_audio_redesign")},this.appendPlaylistFromElements=e=>{const t=this.getSharedFeedAudioEntryStore(),a=t.getAllAudios();return e.pushAudio(a),t.cleanUp(),e},this.getWebAttachPlaylist=e=>{if(e){let t=this.player.getPlaylist(e.type,e.ownerId,e.albumId);return t=this.appendPlaylistFromElements(t),t}return new n.WebPlayerAdapter(this.player).getPlaylistId()?this.player.getCurrentPlaylist():this.player.getPlaylist(d.AudioPlaylist.TYPE_TEMP,window.vk.id)},this.play=(e,t,a)=>{const{contextWithId:s,playlistId:n}=a??{},r=this.player.getPlaylistQueue();if(r.autoplayQueue?.enabled){let t=null;n&&(t=this.player.getPlaylist(n),s&&t.setContext(s)),this.player.playAudioItem({audio:e,playlist:t,context:s})}else{const t=this.getWebAttachPlaylist(a);this.player.playAudioItem({audio:e,playlist:t,context:a?.context??c.AudioPlaylistContext.WALL})}},this.playPlaylist=(e,t,a)=>this.player.playPlaylist(e,t,a),this.pause=()=>this.player.pauseByButton(),this.stop=()=>this.player.stop(),this.seek=e=>this.player.seek(e),this.getCurrentPlaylist=()=>this.player.getCurrentPlaylist(),this.getCurrentPlaylistId=()=>"",this.subscribe=(e,t,a)=>this.player.on(e,t,a),this.unsubscribe=e=>{(0,i.partConfigEnabled)("primary_attachment_audio_component_and_services_clean_up")&&this.player.off(e)},this.notify=(e,...t)=>{this.player.notify(e,t)},this.getCurrentAudio=()=>this.player.getCurrentAudio(),this.getPreviousAudio=()=>this.player.getPreviousAudio()??null,this.addOrDeleteAudio=(e,t)=>{const a=s.Player.coerceAttachAudioIntoAudioObject(t);o.AudioUtils.toggleAddAudio(e,a,(()=>{}),a.context)},this.setVolume=e=>{this.player.setVolume(e)},this.getVolume=()=>this.player.getVolume(),this.isAdsPlaying=()=>this.player.ads?.isActive??!1,this.isPlaying=()=>this.player.isPlaying()??!1,this.getSharedFeedAudioEntryStore=()=>(0,l.getSharedFeedAudioEntryStore)(),this.player=e,this.player.eventBus&&(this.subscriptions=this.player.eventBus.subscriptions),this.ads=this.player.ads}}},314079:(e,t,a)=>{var s=a(802130),n=a(234173),r=a(30655),o=a(15916),i=a(532865),d=a(954314),l=a(199777),c=a(481951),u=a(833449);function h(){const e=new o.WebAttachPlayerAdapter((0,r.getAudioPlayer)());return new i.Player(e)}window.vk?.pe?.static_manager_dynamic_imports&&window.vk?.stDomain&&(a.p=window.vk.stDomain+"/dist/"),window.vk.widget||((0,n.tq)().setStartupHandler("WebSecondaryAudioAttach/init",(({payload:{target:e,data:t}})=>{"audio-play"===t.after_data_action&&h().addAudioElementyToList(e)})),(0,n.tq)().setStartupHandler("WebSecondaryAudioPodcastAttach/init",(({payload:{target:e,data:t}})=>{"audio-podcast-play"===t.after_data_action&&t.podcast_id&&e?.classList.add(`_audio_row_${t.podcast_id}`)})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/playAudio",(e=>{let{audio:t}=e.payload.dataAttrs;const a=JSON.parse(t);if(a.restrictionStatus)return void d.AudioUtils.showAudioRestriction(a);const s=h(),n=e.payload.target;let r=!1;const o=[`.${i.SECONDARY_ATTACHMENT_CLASS_MAP.ACTIONS}`,`.${i.SECONDARY_ATTACHMENT_CLASS_MAP.AFTER_ITEM_SLIDER}`];if(window.cur._sliderMouseUpNowEl&&window.cur?._sliderMouseUpTargetElement?.closest(`.${i.SECONDARY_ATTACHMENT_CLASS_MAP.JS_SECONDARY_ATTACHMENT}`)&&o.every((e=>!window.cur?._sliderMouseUpTargetElement?.closest(e)))&&(r=!0),delete window.cur._sliderMouseUpNowEl,delete window.cur._sliderMouseUpTargetElement,r)return;const l=n?.closest(`.${i.SECONDARY_ATTACHMENT_CLASS_MAP.JS_SECONDARY_ATTACHMENT}`);s.togglePlay(a,l)})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/addAudio",(e=>{const t=e.payload.target,a=t?.closest(`.${i.SECONDARY_ATTACHMENT_CLASS_MAP.JS_SECONDARY_ATTACHMENT}`);h().addAudio(a)})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/uma",(e=>{const t=e.payload.target,a=t?.closest(`.${i.SECONDARY_ATTACHMENT_CLASS_MAP.JS_SECONDARY_ATTACHMENT}`),s=i.Player.getAudioDataFromElement(a);d.AudioUtils.getUMAInfo(a,s)})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/playPlaylist",(e=>{const{playlistId:t,ownerId:a,accessKey:s,restricted:n,context:r}=e.payload.dataAttrs;if(n)return;const o=e.payload?.event?.target,i=o.closest(".SecondaryAttachment__after");i&&"audio-play"===i.dataset.afterAction?h().togglePlayPlaylist(e.payload.target,t,a,s):d.AudioUtils.showAudioPlaylist(a,t,s,r,e.payload?.event)})),(0,n.tq)().setInteractiveHandler("SecondaryAttachment/showPodcast",(e=>{const{podcastId:t,restricted:a}=e.payload.dataAttrs;a?d.AudioUtils.showAudioRestriction({restrictionStatus:a}):(0,r.showPodcast)(null,t,e.payload.event,"audio")})),(0,u.onDomReady)((()=>{h().eventEmitter.on(c.AttachPlayerEvents.PLAY,l.attachPlayerEventHandler)})));try{window.stManager.done(window.jsc("web/secondary_attachment_audio.js"))}catch(e){}requestIdleCallback((()=>{try{(0,s.statlogsValueEvent)("entries_requests",1,"secondary_attachment_audio","web")}catch{}}),{timeout:5e3})}},i={};function d(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={exports:{}};return o[e].call(a.exports,a,a.exports,d),a.exports}d.m=o,e=[],d.O=(t,a,s,n)=>{if(!a){var r=1/0;for(c=0;c<e.length;c++){for(var[a,s,n]=e[c],o=!0,i=0;i<a.length;i++)(!1&n||r>=n)&&Object.keys(d.O).every((e=>d.O[e](a[i])))?a.splice(i--,1):(o=!1,n<r&&(r=n));if(o){e.splice(c--,1);var l=s();void 0!==l&&(t=l)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,s,n]},d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,d.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var n=Object.create(null);d.r(n);var r={};t=t||[null,a({}),a([]),a(a)];for(var o=2&s&&e;"object"==typeof o&&!~t.indexOf(o);o=a(o))Object.getOwnPropertyNames(o).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,d.d(n,r),n},d.d=(e,t)=>{for(var a in t)d.o(t,a)&&!d.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce(((t,a)=>(d.f[a](e,t),t)),[])),d.u=e=>24817===e?"web/chunks/hls.b496ce21.js":77794===e?"web/chunks/7bdfc282.async.758ca0aa.js":95040===e?"web/chunks/cf5562e5.async.b4aed2d1.js":40530===e?"web/chunks/5ef6139d.async.f064c195.js":69488===e?"web/chunks/a7aba191.async.c36a6a36.js":67498===e?"web/chunks/19b9f4a7.async.9c26c7dc.js":24328===e?"web/chunks/c4004e28.async.ea2a65ee.js":27370===e?"web/chunks/2c9432b5.async.5b90c7cd.js":5157===e?"web/chunks/unauth_action_box.111478de.js":25394===e?"web/chunks/AudioLongtapModal.ab967a4b.js":75980===e?"web/chunks/menu_settings.7bdcde07.js":89334===e?"web/chunks/a228276f.async.a4e26c75.js":40928===e?"web/chunks/fcbd3ef2.async.877aa898.js":9914===e?"web/chunks/52fa6987.async.94be31b8.js":59727===e?"web/chunks/VideoUpload.d33511cc.js":9375===e?"web/chunks/voice_message_player.faac3006.js":28762===e?"web/chunks/speech.3083d7af.js":57468===e?"web/chunks/SilentModeForms.d5a6e099.js":28872===e?"web/chunks/feed-client-nav-skeleton.73bce91a.js":35953===e?"web/chunks/feed-client-nav-async-right-block.f4069a0d.js":85059===e?"web/chunks/059ba3af.async.1897b369.js":67724===e?"web/chunks/VideoEditorModal.eb979233.js":22854===e?"web/chunks/PublishClipToVideoModal.dae3ac0f.js":30271===e?"web/chunks/VideoUploadModal.b8d73da8.js":31286===e?"web/chunks/VideoExternalUploadModal.2c5830cb.js":969===e?"web/chunks/0dc980e6.async.f010f601.js":92846===e?"web/chunks/ClipUploadModal.8eff9d1c.js":59240===e?"web/chunks/performance-stats.b497cf49.js":378===e?"web/chunks/79f739a7.async.6dfc0f2b.js":72491===e?"web/chunks/story_blocks.dfab0b41.js":7308===e?"web/chunks/7308.e4292e75.js":1854===e?"chunks/1854.9b4b0c68.js":18254===e?"chunks/"+e+".0ac520ae.js":92398===e?"chunks/"+e+".18cb85f5.js":"web/chunks/videoplayer-interactive.c61a72cb.js",d.miniCssF=e=>({5157:1,59727:1}[e]?"web/chunks/b1037836.css":25394===e?"web/chunks/6a66a172.css":75980===e?"web/chunks/5bbee2c9.css":57468===e?"web/chunks/122e7a6e.css":67724===e?"web/chunks/3c048aa6.css":22854===e?"web/chunks/70c35bc4.css":{30271:1,31286:1}[e]?"web/chunks/f89919fd.css":92846===e?"web/chunks/83ceb5be.css":72491===e?"web/chunks/6b53e0ac.css":void 0),d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},d.l=(e,t,a,n)=>{if(s[e])s[e].push(t);else{var r,o;if(void 0!==a)for(var i=document.getElementsByTagName("script"),l=0;l<i.length;l++){var c=i[l];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")=="vk:"+a){r=c;break}}r||(o=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,d.nc&&r.setAttribute("nonce",d.nc),r.setAttribute("data-webpack","vk:"+a),r.src=e),s[e]=[t];var u=(t,a)=>{r.onerror=r.onload=null,clearTimeout(h);var n=s[e];if(delete s[e],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((e=>e(a))),t)return t(a)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),o&&document.head.appendChild(r)}},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="/dist/",n=e=>new Promise(((t,a)=>{var s=d.miniCssF(e),n=d.p+s;if(((e,t)=>{for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var n=(o=a[s]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(n===e||n===t))return o}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){var o;if((n=(o=r[s]).getAttribute("data-href"))===e||n===t)return o}})(s,n))return t();((e,t,a,s)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=r=>{if(n.onerror=n.onload=null,"load"===r.type)a();else{var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.href||t,d=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");d.code="CSS_CHUNK_LOAD_FAILED",d.type=o,d.request=i,n.parentNode.removeChild(n),s(d)}},n.href=t,document.head.appendChild(n)})(e,n,t,a)})),r={86288:0},d.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{5157:1,22854:1,25394:1,30271:1,31286:1,57468:1,59727:1,67724:1,72491:1,75980:1,92846:1}[e]&&t.push(r[e]=n(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{d.b=document.baseURI||self.location.href;var e={86288:0};d.f.j=(t,a)=>{var s=d.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var n=new Promise(((a,n)=>s=e[t]=[a,n]));a.push(s[2]=n);var r=d.p+d.u(t),o=new Error;d.l(r,(a=>{if(d.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var n=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,s[1](o)}}),"chunk-"+t,t)}},d.O.j=t=>0===e[t];var t=(t,a)=>{var s,n,[r,o,i]=a,l=0;if(r.some((t=>0!==e[t]))){for(s in o)d.o(o,s)&&(d.m[s]=o[s]);if(i)var c=i(d)}for(t&&t(a);l<r.length;l++)n=r[l],d.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return d.O(c)},a=self.webpackChunkvkweb=self.webpackChunkvkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=d.O(void 0,[213,83737,2067,20795,57451,5038,95167,19526],(()=>d(314079)));l=d.O(l)})();